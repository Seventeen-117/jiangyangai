2025-08-01 21:20:35.239 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-08-01 21:20:35.245 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-08-01 21:20:38.643 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:20:38.648 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2025-08-01 21:20:39.600 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 942 ms. Found 1 Elasticsearch repository interface.
2025-08-01 21:20:39.613 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:20:39.615 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2025-08-01 21:20:39.627 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Reactive Elasticsearch repository interfaces.
2025-08-01 21:20:39.643 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:20:39.645 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-01 21:20:39.660 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.bgpay.bgai.repository.es.ChatRecordRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-08-01 21:20:39.660 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 JPA repository interfaces.
2025-08-01 21:20:39.677 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:20:39.679 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-08-01 21:20:39.698 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.bgpay.bgai.repository.es.ChatRecordRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-01 21:20:39.698 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-08-01 21:20:41.931 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:41.932 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:41.933 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:42.108 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:42.117 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:42.123 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:42.124 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda/0x000001d5158932e0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:42.125 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:42.144 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:42.149 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:42.178 [main] INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration - Automatically configure Seata
2025-08-01 21:20:42.314 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 21:20:42.332 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 21:20:42.363 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Initializing Global Transaction Clients ... 
2025-08-01 21:20:42.571 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 21:20:42.573 [main] INFO  io.seata.discovery.registry.RegistryFactory - use registry center type: file
2025-08-01 21:20:42.597 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 21:20:42.604 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:TMROLE,address:8.133.246.113:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='ak=
digest=default_tx_group,192.168.86.8,1754054442601
timestamp=1754054442601
authVersion=V4
vgroup=default_tx_group
ip=192.168.86.8
'} >
2025-08-01 21:20:43.390 [main] INFO  io.seata.core.rpc.netty.TmNettyRemotingClient - register TM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0xcc98ead1, L:/192.168.86.8:58348 - R:/8.133.246.113:8091]
2025-08-01 21:20:43.400 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 563 ms, version:1.8.1-SNAPSHOT,role:TMROLE,channel:[id: 0xcc98ead1, L:/192.168.86.8:58348 - R:/8.133.246.113:8091]
2025-08-01 21:20:43.401 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Transaction Manager Client is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:20:43.423 [main] INFO  io.seata.rm.datasource.AsyncWorker - Async Commit Buffer Limit: 10000
2025-08-01 21:20:43.424 [main] INFO  io.seata.rm.datasource.xa.ResourceManagerXA - ResourceManagerXA init ...
2025-08-01 21:20:43.439 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 21:20:43.440 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Resource Manager is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:20:43.440 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Global Transaction Clients are initialized. 
2025-08-01 21:20:43.911 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:44.631 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:44.670 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:44.952 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'messageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:45.083 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:45.101 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:45.110 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'listenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:45.238 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$DeferringLoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$DeferringLoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 21:20:45.261 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'deferringLoadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.DeferringLoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:45.280 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 21:20:45.297 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:45.306 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:20:46.070 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8688 (http)
2025-08-01 21:20:46.112 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - The ["http-nio-8688"] connector has been configured to support HTTP upgrade to [h2c]
2025-08-01 21:20:46.112 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8688"]
2025-08-01 21:20:46.115 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-08-01 21:20:46.116 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.20]
2025-08-01 21:20:46.652 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-08-01 21:20:47.072 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 21:20:47.072 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - RM will register :jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:20:47.072 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:RMROLE,address:8.133.246.113:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://8.133.246.113:3306/deepseek', version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='null'} >
2025-08-01 21:20:47.097 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - register RM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0xe17242ea, L:/192.168.86.8:58391 - R:/8.133.246.113:8091]
2025-08-01 21:20:47.098 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 16 ms, version:1.8.1-SNAPSHOT,role:RMROLE,channel:[id: 0xe17242ea, L:/192.168.86.8:58391 - R:/8.133.246.113:8091]
2025-08-01 21:20:47.119 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: masterDataSource
2025-08-01 21:20:47.160 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-2} inited
2025-08-01 21:20:47.236 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:20:47.240 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: slaveDataSource
2025-08-01 21:20:47.246 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 21:20:47.269 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:20:47.269 [main] INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Auto proxy data source 'dynamicDataSource' by 'AT' mode.
2025-08-01 21:20:47.282 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 21:20:47.454 [main] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-01 21:20:47.577 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
2025-08-01 21:20:47.641 [main] INFO  o.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-08-01 21:20:48.037 [main] INFO  o.s.o.j.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-01 21:20:48.128 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-01 21:20:48.130 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-01 21:20:48.656 [main] INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-01 21:20:48.664 [main] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 21:20:49.453 [main] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 开始刷新文件类型缓存
2025-08-01 21:20:49.618 [main] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,extensions,magic_numbers,is_active FROM mime_type_config WHERE (is_active = ?)
2025-08-01 21:20:49.635 [main] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:20:49.682 [main] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - <==      Total: 52
2025-08-01 21:20:49.689 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE (is_allowed = ?)
2025-08-01 21:20:49.690 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:20:49.706 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:20:49.707 [main] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 文件类型缓存刷新完成，共加载 52 个MIME类型配置和 11 个允许的文件类型
2025-08-01 21:20:49.745 [main] INFO  com.bgpay.bgai.cache.CacheWarmer - Starting to warm up caches...
2025-08-01 21:20:49.760 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,description,is_allowed FROM allowed_file_type
2025-08-01 21:20:49.760 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: 
2025-08-01 21:20:49.769 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:20:49.770 [main] INFO  com.bgpay.bgai.cache.CacheWarmer - FileTypes cache warmed up successfully
2025-08-01 21:20:49.770 [main] INFO  com.bgpay.bgai.cache.CacheWarmer - Cache warming completed
2025-08-01 21:20:50.014 [main] INFO  c.bgpay.bgai.config.NacosRouteDefinitionRepository - 初始化Nacos路由定义存储库
2025-08-01 21:20:50.016 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:20:50.016 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:20:50.017 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of d504f4bd-fb5d-443a-abe0-d3c570eff4c1_config-0
2025-08-01 21:20:50.017 [main] INFO  com.alibaba.nacos.common.remote.client - [d504f4bd-fb5d-443a-abe0-d3c570eff4c1_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d515495308
2025-08-01 21:20:50.017 [main] INFO  com.alibaba.nacos.common.remote.client - [d504f4bd-fb5d-443a-abe0-d3c570eff4c1_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d515495718
2025-08-01 21:20:50.017 [main] INFO  com.alibaba.nacos.common.remote.client - [d504f4bd-fb5d-443a-abe0-d3c570eff4c1_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:20:50.017 [main] INFO  com.alibaba.nacos.common.remote.client - [d504f4bd-fb5d-443a-abe0-d3c570eff4c1_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:20:50.018 [main] INFO  com.alibaba.nacos.common.remote.client - [d504f4bd-fb5d-443a-abe0-d3c570eff4c1_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:20:50.018 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:20:50.165 [main] INFO  com.alibaba.nacos.common.remote.client - [d504f4bd-fb5d-443a-abe0-d3c570eff4c1_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754054450123_139.227.195.146_4401
2025-08-01 21:20:50.165 [main] INFO  com.alibaba.nacos.common.remote.client - [d504f4bd-fb5d-443a-abe0-d3c570eff4c1_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:20:50.165 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [d504f4bd-fb5d-443a-abe0-d3c570eff4c1_config-0] Notify connected event to listeners.
2025-08-01 21:20:50.165 [main] INFO  com.alibaba.nacos.common.remote.client - [d504f4bd-fb5d-443a-abe0-d3c570eff4c1_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001d5155d4888
2025-08-01 21:20:50.165 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [d504f4bd-fb5d-443a-abe0-d3c570eff4c1_config-0] Connected,notify listen context...
2025-08-01 21:20:50.182 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 21:20:50.185 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-08-01 21:20:50.185 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:20:50.195 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:20:50.202 [main] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 初始化动态路由服务
2025-08-01 21:20:50.204 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:20:50.205 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:20:50.206 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of cd3142db-ddba-4aa5-89e7-d2f4e25c91d2_config-0
2025-08-01 21:20:50.206 [main] INFO  com.alibaba.nacos.common.remote.client - [cd3142db-ddba-4aa5-89e7-d2f4e25c91d2_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d515495308
2025-08-01 21:20:50.206 [main] INFO  com.alibaba.nacos.common.remote.client - [cd3142db-ddba-4aa5-89e7-d2f4e25c91d2_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d515495718
2025-08-01 21:20:50.206 [main] INFO  com.alibaba.nacos.common.remote.client - [cd3142db-ddba-4aa5-89e7-d2f4e25c91d2_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:20:50.206 [main] INFO  com.alibaba.nacos.common.remote.client - [cd3142db-ddba-4aa5-89e7-d2f4e25c91d2_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:20:50.206 [main] INFO  com.alibaba.nacos.common.remote.client - [cd3142db-ddba-4aa5-89e7-d2f4e25c91d2_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:20:50.207 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:20:50.341 [main] INFO  com.alibaba.nacos.common.remote.client - [cd3142db-ddba-4aa5-89e7-d2f4e25c91d2_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754054450300_139.227.195.146_4405
2025-08-01 21:20:50.341 [main] INFO  com.alibaba.nacos.common.remote.client - [cd3142db-ddba-4aa5-89e7-d2f4e25c91d2_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:20:50.341 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [cd3142db-ddba-4aa5-89e7-d2f4e25c91d2_config-0] Notify connected event to listeners.
2025-08-01 21:20:50.341 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [cd3142db-ddba-4aa5-89e7-d2f4e25c91d2_config-0] Connected,notify listen context...
2025-08-01 21:20:50.341 [main] INFO  com.alibaba.nacos.common.remote.client - [cd3142db-ddba-4aa5-89e7-d2f4e25c91d2_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001d5155d4888
2025-08-01 21:20:50.389 [main] WARN  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - Nacos中没有找到路由配置，使用默认配置
2025-08-01 21:20:50.389 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:20:50.389 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:20:50.389 [main] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 注册Nacos配置监听器成功
2025-08-01 21:20:50.399 [main] INFO  com.bgpay.bgai.config.NacosRouteConfigListener - 初始化Nacos路由配置监听器
2025-08-01 21:20:50.401 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:20:50.401 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:20:50.402 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 9d52e538-0ec9-4b58-b0bc-91233f60b7ea_config-0
2025-08-01 21:20:50.402 [main] INFO  com.alibaba.nacos.common.remote.client - [9d52e538-0ec9-4b58-b0bc-91233f60b7ea_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d515495308
2025-08-01 21:20:50.402 [main] INFO  com.alibaba.nacos.common.remote.client - [9d52e538-0ec9-4b58-b0bc-91233f60b7ea_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d515495718
2025-08-01 21:20:50.402 [main] INFO  com.alibaba.nacos.common.remote.client - [9d52e538-0ec9-4b58-b0bc-91233f60b7ea_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:20:50.402 [main] INFO  com.alibaba.nacos.common.remote.client - [9d52e538-0ec9-4b58-b0bc-91233f60b7ea_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:20:50.403 [main] INFO  com.alibaba.nacos.common.remote.client - [9d52e538-0ec9-4b58-b0bc-91233f60b7ea_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:20:50.403 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:20:50.542 [main] INFO  com.alibaba.nacos.common.remote.client - [9d52e538-0ec9-4b58-b0bc-91233f60b7ea_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754054450502_139.227.195.146_4406
2025-08-01 21:20:50.542 [main] INFO  com.alibaba.nacos.common.remote.client - [9d52e538-0ec9-4b58-b0bc-91233f60b7ea_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:20:50.542 [main] INFO  com.alibaba.nacos.common.remote.client - [9d52e538-0ec9-4b58-b0bc-91233f60b7ea_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001d5155d4888
2025-08-01 21:20:50.542 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [9d52e538-0ec9-4b58-b0bc-91233f60b7ea_config-0] Notify connected event to listeners.
2025-08-01 21:20:50.542 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [9d52e538-0ec9-4b58-b0bc-91233f60b7ea_config-0] Connected,notify listen context...
2025-08-01 21:20:50.582 [main] WARN  com.bgpay.bgai.config.NacosRouteConfigListener - Nacos中未找到路由配置数据
2025-08-01 21:20:50.583 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:20:50.584 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:20:51.020 [main] INFO  com.bgpay.bgai.config.RestTemplateConfig - Creating RestTemplate bean using SimpleClientHttpRequestFactory
2025-08-01 21:20:51.069 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-08-01 21:20:51.072 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-08-01 21:20:51.085 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 从WebServerApplicationContext获取实际端口: 8080
2025-08-01 21:20:51.085 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 初始化SSO配置: clientId=bgai-client-id, 使用端口=8080
2025-08-01 21:20:51.086 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - SSO URL配置已更新: redirectUri=http://localhost:8080/api/auth/callback, 系统实际运行端口=8080
2025-08-01 21:20:52.206 [main] INFO  com.bgpay.bgai.controller.AuthController - 初始化认证控制器: clientId=bgai-client-id, 配置的端口=8688
2025-08-01 21:20:52.207 [main] INFO  com.bgpay.bgai.controller.AuthController - 更新认证控制器redirectUri端口: http://localhost:8080/api/auth/callback → http://localhost:8688/api/auth/callback
2025-08-01 21:20:52.207 [main] INFO  com.bgpay.bgai.controller.AuthController - 认证控制器URL配置已更新: redirectUri=http://localhost:8688/api/auth/callback, 系统实际运行端口=8688
2025-08-01 21:20:53.868 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-08-01 21:20:54.165 [redisson-netty-5-7] INFO  o.r.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-08-01 21:20:54.234 [redisson-netty-5-11] INFO  org.redisson.connection.pool.MasterConnectionPool - 4 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-08-01 21:20:55.041 [main] INFO  com.bgpay.bgai.service.mq.RocketMQProducerService - Initializing RocketMQProducerService with producer group: billing-producer-group, nameServer: 8.133.246.113:9876
2025-08-01 21:20:55.048 [main] INFO  com.bgpay.bgai.service.mq.RocketMQProducerService - RocketMQ producer started successfully
2025-08-01 21:20:55.471 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Bean [com.bgpay.bgai.service.deepseek.DeepSeekServiceImp$$SpringCGLIB$$0] with name [deepSeekService] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2025-08-01 21:20:55.941 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#accesskey'.
2025-08-01 21:20:55.941 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#secretkey'.
2025-08-01 21:20:55.952 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 加载到2个Saga状态机定义文件
2025-08-01 21:20:56.331 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 开始解析状态机定义: bgai-saga-transaction
2025-08-01 21:20:56.331 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机 [bgai-saga-transaction] 原始版本: 0.0.5, 动态生成的新版本: 250801.212056.4de1
2025-08-01 21:20:56.331 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机定义解析成功: bgai-saga-transaction, 已更新版本号: 250801.212056.4de1
2025-08-01 21:20:56.332 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 成功加载状态机定义: /E:/project/bgai/target/classes/statelang/bgai-saga-transaction.json
2025-08-01 21:20:56.545 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 开始解析状态机定义: ChatCompletionSaga
2025-08-01 21:20:56.545 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机 [ChatCompletionSaga] 原始版本: 0.0.5, 动态生成的新版本: 250801.212056.2404
2025-08-01 21:20:56.545 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机定义解析成功: ChatCompletionSaga, 已更新版本号: 250801.212056.2404
2025-08-01 21:20:56.545 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 成功加载状态机定义: /E:/project/bgai/target/classes/statelang/chat_completion_saga.json
2025-08-01 21:20:56.545 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已设置saga.state-machine.auto-register=false，防止状态机重复注册
2025-08-01 21:20:57.650 [main] INFO  c.b.b.controller.ServiceDiscoveryExampleController - ServiceDiscoveryExampleController initialized with: serviceDiscoveryUtils=available, loadBalancedWebClient=available, loadBalancedRestTemplate=available, restTemplate=available
2025-08-01 21:20:57.858 [main] INFO  com.bgpay.bgai.service.mq.MQConsumerService - MQ consumer startup successful [group=billing-consumer-group, topic=BILLING_TOPIC, tag=USER_BILLING]
2025-08-01 21:20:57.858 [main] INFO  c.bgpay.bgai.service.mq.RocketMQBillingServiceImpl - Billing consumer initialized successfully. Ready to process unconsumed messages.
2025-08-01 21:20:59.639 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Seata事务监听器初始化
2025-08-01 21:20:59.640 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - 已设置seata.saga.state-machine.auto-register=false，防止状态机重复注册
2025-08-01 21:20:59.776 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Bean [com.bgpay.bgai.service.mq.BillingTransactionListenerImpl$$SpringCGLIB$$0] with name [billingTransactionListenerImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2025-08-01 21:21:00.022 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (billing-producer-group) init on namesrv 8.133.246.113:9876
2025-08-01 21:21:00.118 [main] DEBUG com.bgpay.bgai.config.AsyncConfig$1 - Initializing ExecutorService 'blockingExecutor'
2025-08-01 21:21:00.187 [main] INFO  com.bgpay.bgai.config.GatewayRouteConfig - 初始化默认路由配置
2025-08-01 21:21:00.392 [main] INFO  c.b.bgai.config.NacosConfig$NacosWarningHandler - Nacos警告处理器已启用，将忽略配置中心连接警告
2025-08-01 21:21:00.496 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - Seata Saga配置加载
2025-08-01 21:21:00.496 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - 状态机自动注册设置: 禁用
2025-08-01 21:21:00.496 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - 状态机自动注册已禁用，这将防止重复注册错误
2025-08-01 21:21:00.506 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#accesskey'.
2025-08-01 21:21:00.506 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#secretkey'.
2025-08-01 21:21:00.523 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Initializing Global Transaction Clients ... 
2025-08-01 21:21:00.523 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Transaction Manager Client is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:21:00.523 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Resource Manager is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:21:00.524 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:bgai#default_tx_group
2025-08-01 21:21:00.524 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Global Transaction Clients are initialized. 
2025-08-01 21:21:00.539 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 21:21:00.627 [main] INFO  i.s.s.engine.repo.impl.StateMachineRepositoryImpl - StateMachine[bgai-saga-transaction] is already exist a same version
2025-08-01 21:21:00.638 [main] INFO  i.s.s.engine.repo.impl.StateMachineRepositoryImpl - StateMachine[ChatCompletionSaga] is already exist a same version
2025-08-01 21:21:02.968 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2025-08-01 21:21:02.968 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2025-08-01 21:21:02.969 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-08-01 21:21:04.778 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-08-01 21:21:07.259 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8688"]
2025-08-01 21:21:07.263 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on ports 8080 (http), 8688 (http) with context path ''
2025-08-01 21:21:07.265 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 服务器已完全初始化，确认运行端口: 8080
2025-08-01 21:21:07.266 [main] INFO  com.bgpay.bgai.controller.AuthController - 服务器已初始化，实际运行端口: 8080
2025-08-01 21:21:07.266 [main] INFO  com.bgpay.bgai.controller.AuthController - 认证控制器URL配置已更新: redirectUri=http://localhost:8080/api/auth/callback, 系统实际运行端口=8080
2025-08-01 21:21:07.281 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-08-01 21:21:07.281 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-08-01 21:21:07.282 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-08-01 21:21:07.410 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:21:07.410 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:21:07.414 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 142cbbb5-0490-4bee-9c3c-a2272f4b3433
2025-08-01 21:21:07.416 [main] INFO  com.alibaba.nacos.common.remote.client - [142cbbb5-0490-4bee-9c3c-a2272f4b3433] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-08-01 21:21:07.416 [main] INFO  com.alibaba.nacos.common.remote.client - [142cbbb5-0490-4bee-9c3c-a2272f4b3433] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-08-01 21:21:07.417 [main] INFO  com.alibaba.nacos.common.remote.client - [142cbbb5-0490-4bee-9c3c-a2272f4b3433] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-08-01 21:21:07.417 [main] INFO  com.alibaba.nacos.common.remote.client - [142cbbb5-0490-4bee-9c3c-a2272f4b3433] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:21:07.417 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:21:07.552 [main] INFO  com.alibaba.nacos.common.remote.client - [142cbbb5-0490-4bee-9c3c-a2272f4b3433] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754054467514_139.227.195.146_4616
2025-08-01 21:21:07.552 [main] INFO  com.alibaba.nacos.common.remote.client - [142cbbb5-0490-4bee-9c3c-a2272f4b3433] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:21:07.552 [main] INFO  com.alibaba.nacos.common.remote.client - [142cbbb5-0490-4bee-9c3c-a2272f4b3433] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001d5155d4888
2025-08-01 21:21:07.552 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [142cbbb5-0490-4bee-9c3c-a2272f4b3433] Notify connected event to listeners.
2025-08-01 21:21:07.552 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-08-01 21:21:07.553 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] d750d92e-152f-4055-a641-3bc9dda85a29 registering service bgai with instance Instance{instanceId='null', ip='192.168.86.8', port=8080, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=[2408:820c:7529:92b2:b585:8e1a:c1f3:5121], preserved.register.source=SPRING_CLOUD, preserved.heart.beat.interval=5000}}
2025-08-01 21:21:07.587 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP bgai 192.168.86.8:8080 register finished
2025-08-01 21:21:07.627 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 21:21:07.746 [main] INFO  c.a.c.n.discovery.NacosDiscoveryHeartBeatPublisher - Start nacos heartBeat task scheduler.
2025-08-01 21:21:07.785 [main] INFO  com.bgpay.bgai.config.NacosConfig - 应用启动完成，当前环境: dev
2025-08-01 21:21:07.786 [main] INFO  com.bgpay.bgai.config.NacosConfig - Nacos配置中心: 8.133.246.113:8848, 命名空间: d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:21:07.786 [main] INFO  com.bgpay.bgai.config.NacosConfig - 注意: 如果看到Nacos配置加载警告，但应用正常启动，说明应用正在使用本地配置文件
2025-08-01 21:21:07.788 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 38.072 seconds (process running for 39.954)
2025-08-01 21:21:07.790 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 开始刷新文件类型缓存
2025-08-01 21:21:07.792 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,extensions,magic_numbers,is_active FROM mime_type_config WHERE (is_active = ?)
2025-08-01 21:21:07.793 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:21:07.799 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - ==================== Saga状态机加载报告 ====================
2025-08-01 21:21:07.799 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - Saga状态机配置加载状态: 成功
2025-08-01 21:21:07.799 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已加载的状态机定义文件数量: 2
2025-08-01 21:21:07.799 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已加载的状态机定义文件:
2025-08-01 21:21:07.799 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig -  - /E:/project/bgai/target/classes/statelang/bgai-saga-transaction.json
2025-08-01 21:21:07.799 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig -  - /E:/project/bgai/target/classes/statelang/chat_completion_saga.json
2025-08-01 21:21:07.799 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - Saga解析器状态: CUSTOM_FASTJSON2
2025-08-01 21:21:07.799 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 状态机解析结果: 成功 2 个, 失败 0 个
2025-08-01 21:21:07.799 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 状态机自动注册已禁用(saga.state-machine.auto-register=false)，避免重复注册错误
2025-08-01 21:21:07.799 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - =============================================================
2025-08-01 21:21:07.800 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - 应用程序已就绪，Seata事务监听器激活
2025-08-01 21:21:07.800 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Seata配置信息:
2025-08-01 21:21:07.800 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - seata.saga.state-machine.auto-register: false
2025-08-01 21:21:07.800 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - seata.enabled: 未设置
2025-08-01 21:21:07.800 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - saga.enabled: 未设置
2025-08-01 21:21:07.802 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] common-dev.yaml+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:21:07.802 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=common-dev.yaml, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:21:07.802 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=common-dev.yaml, group=DEFAULT_GROUP
2025-08-01 21:21:07.803 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] bgtech-ai.yaml+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:21:07.803 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=bgtech-ai.yaml, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:21:07.803 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=bgtech-ai.yaml, group=DEFAULT_GROUP
2025-08-01 21:21:07.805 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] bgtech-ai-dev.yaml+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:21:07.805 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=bgtech-ai-dev.yaml, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:21:07.805 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=bgtech-ai-dev.yaml, group=DEFAULT_GROUP
2025-08-01 21:21:07.805 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] bgtech-ai+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:21:07.805 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=bgtech-ai, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:21:07.805 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=bgtech-ai, group=DEFAULT_GROUP
2025-08-01 21:21:07.806 [main] INFO  com.bgpay.bgai.BgaiApplication - Application started successfully
2025-08-01 21:21:07.808 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - <==      Total: 52
2025-08-01 21:21:07.809 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE (is_allowed = ?)
2025-08-01 21:21:07.809 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:21:07.816 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:21:07.816 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 文件类型缓存刷新完成，共加载 52 个MIME类型配置和 11 个允许的文件类型
2025-08-01 21:21:49.028 [http-nio-8688-exec-1] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:21:49.029 [http-nio-8688-exec-1] WARN  com.bgpay.bgai.filter.ApiKeyWebFilter - API Key is missing for path: /api/chatGatWay-internal
2025-08-01 21:21:49.057 [http-nio-8688-exec-1] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 401 UNAUTHORIZED
2025-08-01 21:25:29.766 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:25:29.766 [http-nio-8688-exec-2] WARN  com.bgpay.bgai.filter.ApiKeyWebFilter - API Key is missing for path: /api/chatGatWay-internal
2025-08-01 21:25:29.769 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 401 UNAUTHORIZED
2025-08-01 21:25:30.105 [http-nio-8688-exec-4] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:25:30.106 [http-nio-8688-exec-4] WARN  com.bgpay.bgai.filter.ApiKeyWebFilter - API Key is missing for path: /api/chatGatWay-internal
2025-08-01 21:25:30.106 [http-nio-8688-exec-4] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 401 UNAUTHORIZED
2025-08-01 21:25:30.176 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:25:30.177 [http-nio-8688-exec-5] WARN  com.bgpay.bgai.filter.ApiKeyWebFilter - API Key is missing for path: /api/chatGatWay-internal
2025-08-01 21:25:30.178 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 401 UNAUTHORIZED
2025-08-01 21:25:30.273 [http-nio-8688-exec-6] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:25:30.273 [http-nio-8688-exec-6] WARN  com.bgpay.bgai.filter.ApiKeyWebFilter - API Key is missing for path: /api/chatGatWay-internal
2025-08-01 21:25:30.274 [http-nio-8688-exec-6] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 401 UNAUTHORIZED
2025-08-01 21:25:54.749 [http-nio-8688-exec-1] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:25:54.750 [http-nio-8688-exec-1] WARN  com.bgpay.bgai.filter.ApiKeyWebFilter - API Key is missing for path: /api/chatGatWay-internal
2025-08-01 21:25:54.751 [http-nio-8688-exec-1] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 401 UNAUTHORIZED
2025-08-01 21:25:55.510 [http-nio-8688-exec-4] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /favicon.ico from 0:0:0:0:0:0:0:1
2025-08-01 21:25:55.550 [http-nio-8688-exec-4] ERROR com.bgpay.bgai.exception.GlobalExceptionHandler - 运行时异常
org.springframework.web.reactive.resource.NoResourceFoundException: 404 NOT_FOUND "No static resource favicon.ico."
	at org.springframework.web.reactive.resource.ResourceWebHandler.lambda$handle$1(ResourceWebHandler.java:431)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Assembly trace from producer [reactor.core.publisher.MonoError] :
	reactor.core.publisher.Mono.error(Mono.java:299)
	org.springframework.web.reactive.resource.ResourceWebHandler.lambda$handle$1(ResourceWebHandler.java:431)
Error has been observed at the following site(s):
	*__________Mono.error ⇢ at org.springframework.web.reactive.resource.ResourceWebHandler.lambda$handle$1(ResourceWebHandler.java:431)
	*__________Mono.defer ⇢ at org.springframework.web.reactive.resource.ResourceWebHandler.handle(ResourceWebHandler.java:429)
	*__Mono.switchIfEmpty ⇢ at org.springframework.web.reactive.resource.ResourceWebHandler.handle(ResourceWebHandler.java:429)
	|_       Mono.flatMap ⇢ at org.springframework.web.reactive.resource.ResourceWebHandler.handle(ResourceWebHandler.java:433)
	*___________Mono.then ⇢ at org.springframework.web.reactive.result.SimpleHandlerAdapter.handle(SimpleHandlerAdapter.java:46)
Original Stack Trace:
		at org.springframework.web.reactive.resource.ResourceWebHandler.lambda$handle$1(ResourceWebHandler.java:431)
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82)
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189)
		at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102)
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onComplete(FluxConcatMapNoPrefetch.java:241)
		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:357)
		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294)
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:337)
		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108)
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367)
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241)
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)
		at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70)
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164)
		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201)
		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83)
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)
		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)
		at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82)
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:259)
		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:865)
		at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)
		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
		at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164)
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367)
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241)
		at reactor.core.publisher.FluxMap$MapSubscriber.onSubscribe(FluxMap.java:92)
		at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onNext(FluxConcatMapNoPrefetch.java:207)
		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335)
		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294)
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerComplete(FluxConcatMapNoPrefetch.java:275)
		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onComplete(FluxConcatMap.java:889)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152)
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:85)
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:210)
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:239)
		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
		at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152)
		at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102)
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onComplete(FluxConcatMapNoPrefetch.java:241)
		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onComplete(FluxDematerialize.java:121)
		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onNext(FluxDematerialize.java:91)
		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.onNext(FluxDematerialize.java:44)
		at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:335)
		at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:294)
		at reactor.core.publisher.FluxDematerialize$DematerializeSubscriber.request(FluxDematerialize.java:127)
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerComplete(FluxConcatMapNoPrefetch.java:275)
		at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onComplete(FluxConcatMap.java:889)
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231)
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onComplete(MonoPeekTerminal.java:299)
		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.onNext(MonoFilterWhen.java:141)
		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
		at reactor.core.publisher.MonoFilterWhen$MonoFilterWhenMain.request(MonoFilterWhen.java:183)
		at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139)
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331)
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331)
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:339)
		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331)
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:339)
		at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108)
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367)
		at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241)
		at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70)
		at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164)
		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201)
		at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
		at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
		at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
		at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
		at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
		at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
		at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:1583)
2025-08-01 21:25:55.573 [http-nio-8688-exec-4] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 500 INTERNAL_SERVER_ERROR
2025-08-01 21:26:07.787 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 开始刷新文件类型缓存
2025-08-01 21:26:08.891 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,extensions,magic_numbers,is_active FROM mime_type_config WHERE (is_active = ?)
2025-08-01 21:26:08.891 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:26:08.910 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - <==      Total: 52
2025-08-01 21:26:08.911 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE (is_allowed = ?)
2025-08-01 21:26:08.911 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:26:08.920 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:26:08.920 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 文件类型缓存刷新完成，共加载 52 个MIME类型配置和 11 个允许的文件类型
2025-08-01 21:26:20.022 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:26:20.022 [http-nio-8688-exec-5] WARN  com.bgpay.bgai.filter.ApiKeyWebFilter - API Key is missing for path: /api/chatGatWay-internal
2025-08-01 21:26:20.023 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 401 UNAUTHORIZED
2025-08-01 21:27:06.121 [http-nio-8688-exec-7] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:27:06.121 [http-nio-8688-exec-7] WARN  com.bgpay.bgai.filter.ApiKeyWebFilter - API Key is missing for path: /api/chatGatWay-internal
2025-08-01 21:27:06.123 [http-nio-8688-exec-7] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 401 UNAUTHORIZED
2025-08-01 21:27:46.277 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/auth/refresh-by-userid from 0:0:0:0:0:0:0:1
2025-08-01 21:27:46.314 [http-nio-8688-exec-10] WARN  com.alibaba.druid.pool.DruidAbstractDataSource - discard long time none received connection. , jdbcUrl : jdbc:mysql://8.133.246.113:3306/deepseek?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true&useSSL=false, version : 1.2.8, lastPacketReceivedIdleMillis : 97389
2025-08-01 21:27:46.388 [http-nio-8688-exec-10] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 根据用户ID刷新token: 689258T
2025-08-01 21:27:46.390 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.mapper.UserMapper.findByUserId - ==>  Preparing: SELECT * FROM t_user WHERE user_id = ?
2025-08-01 21:27:46.391 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.mapper.UserMapper.findByUserId - ==> Parameters: 689258T(String)
2025-08-01 21:27:46.407 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.mapper.UserMapper.findByUserId - <==      Total: 1
2025-08-01 21:27:46.408 [http-nio-8688-exec-10] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 用户[689258T]的旧令牌: 3d4efaee-b1d1-4122-8883-393050e4b568
2025-08-01 21:27:46.408 [http-nio-8688-exec-10] DEBUG c.bgpay.bgai.mapper.UserMapper.findByRefreshToken - ==>  Preparing: SELECT * FROM t_user WHERE refresh_token = ?
2025-08-01 21:27:46.408 [http-nio-8688-exec-10] DEBUG c.bgpay.bgai.mapper.UserMapper.findByRefreshToken - ==> Parameters: 8c242ba9-9e81-465f-bd99-7f24c6c58de9(String)
2025-08-01 21:27:46.416 [http-nio-8688-exec-10] DEBUG c.bgpay.bgai.mapper.UserMapper.findByRefreshToken - <==      Total: 1
2025-08-01 21:27:46.417 [http-nio-8688-exec-10] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 找到拥有刷新令牌的用户: 689258T，原访问令牌: 3d4efaee-b1d1-4122-8883-393050e4b568
2025-08-01 21:27:46.432 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.config.RestTemplateConfig - 发送请求: POST http://localhost:8080/auth/token
2025-08-01 21:27:46.445 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.config.RestTemplateConfig - 收到响应: POST http://localhost:8080/auth/token - 耗时: 13ms
2025-08-01 21:27:46.447 [http-nio-8080-exec-1] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /auth/token from 127.0.0.1
2025-08-01 21:27:46.450 [http-nio-8080-exec-1] INFO  com.bgpay.bgai.controller.MockAuthController - Token request: grant_type=null, code=null, refresh_token=null, client_id=null
2025-08-01 21:27:46.453 [http-nio-8080-exec-1] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 200 OK
2025-08-01 21:27:46.463 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.config.RestTemplateConfig - 发送请求: GET http://localhost:8080/auth/userinfo
2025-08-01 21:27:46.465 [http-nio-8080-exec-2] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /auth/userinfo from 127.0.0.1
2025-08-01 21:27:46.467 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.config.RestTemplateConfig - 收到响应: GET http://localhost:8080/auth/userinfo - 耗时: 3ms
2025-08-01 21:27:46.467 [http-nio-8080-exec-2] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 200 OK
2025-08-01 21:27:46.473 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.mapper.UserMapper.updateById - ==>  Preparing: UPDATE t_user SET user_id=?, username=?, email=?, avatar_url=?, last_login_time=?, access_token=?, refresh_token=?, token_expire_time=?, status=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:27:46.476 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.mapper.UserMapper.updateById - ==> Parameters: 689258T(String), 测试用户(String), test@example.com(String), https://ui-avatars.com/api/?name=测试用户(String), 2025-06-25T14:36:53(LocalDateTime), 6eab0b92-c85e-44e8-be5b-98a0bd5df63f(String), 93cc12ae-0dcd-4bf0-8c10-25f29d3a2448(String), 2025-08-01T22:27:46.463218500(LocalDateTime), 1(Integer), 2025-04-26T23:59:16(LocalDateTime), 2025-08-01T21:27:46.467218800(LocalDateTime), 1(Long)
2025-08-01 21:27:46.496 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.mapper.UserMapper.updateById - <==    Updates: 1
2025-08-01 21:27:46.496 [http-nio-8688-exec-10] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 删除旧令牌的Redis缓存: USER:TOKEN:3d4efaee-b1d1-4122-8883-393050e4b568
2025-08-01 21:27:56.501 [http-nio-8688-exec-10] WARN  com.bgpay.bgai.cache.RedisRetryAspect - Redis操作失败，准备重试 - 类: RedisTemplate, 方法: delete, 异常: Redis command timed out
2025-08-01 21:27:57.502 [http-nio-8688-exec-10] INFO  com.bgpay.bgai.cache.RedisRetryAspect - Redis操作重试 - 类: RedisTemplate, 方法: delete, 重试次数: 1
2025-08-01 21:28:05.535 [lettuce-eventExecutorLoop-2-2] INFO  io.lettuce.core.protocol.ConnectionWatchdog - Reconnecting, last destination was /8.133.246.113:6379
2025-08-01 21:28:05.559 [lettuce-nioEventLoop-4-2] INFO  io.lettuce.core.protocol.ReconnectionHandler - Reconnected to 8.133.246.113/<unresolved>:6379
2025-08-01 21:28:05.585 [http-nio-8688-exec-10] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 成功刷新用户[689258T]的令牌，旧令牌：3d4efaee-b1d1-4122-8883-393050e4b568，新令牌：6eab0b92-c85e-44e8-be5b-98a0bd5df63f
2025-08-01 21:28:05.585 [http-nio-8688-exec-10] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 显式删除旧令牌的Redis缓存: USER:TOKEN:3d4efaee-b1d1-4122-8883-393050e4b568
2025-08-01 21:28:05.614 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 200 OK
2025-08-01 21:28:20.371 [http-nio-8688-exec-3] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:28:20.371 [http-nio-8688-exec-3] WARN  com.bgpay.bgai.filter.ApiKeyWebFilter - API Key is missing for path: /api/chatGatWay-internal
2025-08-01 21:28:20.373 [http-nio-8688-exec-3] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 401 UNAUTHORIZED
2025-08-01 21:28:21.886 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:28:21.892 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:28:21.893 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:28:21.909 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:28:21.910 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:28:21.911 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:28:21.918 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:28:21.918 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.filter.ApiKeyWebFilter - Strict API Key validation passed for path: /api/chatGatWay-internal
2025-08-01 21:28:21.970 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - 接收到请求: /api/chatGatWay-internal, 文件=无文件, 问题参数=识别附件的主要信息,并检查配置是否有问题, 模型参数=deepseek-reasoner
2025-08-01 21:28:21.972 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:28:21.972 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:28:21.978 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:28:21.979 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:28:21.979 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:28:21.988 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:28:21.988 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - API Key validation passed for chatGatWay-internal
2025-08-01 21:28:21.989 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - 请求Content-Type: multipart/form-data;boundary=--------------------------202763334318408392558016
2025-08-01 21:28:21.990 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - 收集到的完整参数: question="识别附件的主要信息,并检查配置是否有问题", apiUrl="null", modelName="deepseek-reasoner", multiTurn=true
2025-08-01 21:28:21.990 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - 从X-User-Id头部获取到用户ID: 689258T
2025-08-01 21:28:22.023 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - 已验证Authorization token与X-User-Id(689258T)匹配
2025-08-01 21:28:22.025 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - PARAM TRACE [689258T]: 尝试查找匹配配置 - 参数: apiUrl=null, modelName=deepseek-reasoner
2025-08-01 21:28:22.026 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 查询配置 - userId=689258T
2025-08-01 21:28:22.026 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 添加条件 - modelName=deepseek-reasoner
2025-08-01 21:28:22.027 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 排序方式 - 按ID降序
2025-08-01 21:28:22.027 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 限制结果数 - LIMIT 1
2025-08-01 21:28:22.028 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,config_name AS name,api_url,api_key,model_name,model_type,user_id,enabled,is_default,priority,description,create_time,update_time FROM api_config WHERE (user_id = ? AND model_name = ?) ORDER BY id DESC LIMIT 1
2025-08-01 21:28:22.029 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiConfigMapper.selectList - ==> Parameters: 689258T(String), deepseek-reasoner(String)
2025-08-01 21:28:22.041 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiConfigMapper.selectList - <==      Total: 1
2025-08-01 21:28:22.042 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 查询结果 - 找到配置: id=1, modelName=deepseek-reasoner
2025-08-01 21:28:22.042 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - PARAM TRACE [689258T]: 找到匹配配置 - apiUrl=https://api.deepseek.com/chat/completions, modelName=deepseek-reasoner (原始请求: deepseek-reasoner)
2025-08-01 21:28:22.042 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - PARAM TRACE [689258T]: 使用传入的modelName: deepseek-reasoner
2025-08-01 21:28:22.042 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - API config resolved: url=https://api.deepseek.com/chat/completions, model=deepseek-reasoner
2025-08-01 21:28:22.042 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - Content processed, length: 35
2025-08-01 21:28:22.052 [http-nio-8688-exec-2] INFO  io.seata.tm.TransactionManagerHolder - TransactionManager Singleton io.seata.tm.DefaultTransactionManager@6789ada6
2025-08-01 21:28:22.083 [http-nio-8688-exec-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - Begin new global transaction [seata-server:8091:135786363947581441]
2025-08-01 21:28:22.100 [http-nio-8688-exec-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作开始 - ID: seata-server:8091:135786363947581441, 名称: com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive, 模式: AT, 路径: , IP: 192.168.86.8, 用户: system
2025-08-01 21:28:22.108 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - ==>  Preparing: INSERT INTO transaction_log ( xid, transaction_name, transaction_mode, status, request_path, source_ip, user_id, branch_ids, extra_data, start_time, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-08-01 21:28:22.115 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - ==> Parameters: seata-server:8091:135786363947581441(String), com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive(String), AT(String), ACTIVE(String), (String), 192.168.86.8(String), system(String), [](String), {"result":"active","startTime":1754054902100}(String), 2025-08-01T21:28:22.101617900(LocalDateTime), 2025-08-01T21:28:22.101617900(LocalDateTime)
2025-08-01 21:28:22.573 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - <==    Updates: 1
2025-08-01 21:28:22.608 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581441, branchId:135786363947581442, lockKeys:transaction_log:644
2025-08-01 21:28:22.621 [http-nio-8688-exec-2] WARN  i.s.c.l.EnhancedServiceLoader$InnerEnhancedServiceLoader - Load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail: io/protostuff/runtime/IdStrategy
2025-08-01 21:28:22.698 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581441, branchId:135786363947581443, lockKeys:undo_log:3809;transaction_log:644
2025-08-01 21:28:22.732 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Transaction method starting: XID=seata-server:8091:135786363947581441, method=processRequestReactive
2025-08-01 21:28:22.733 [http-nio-8688-exec-2] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - Processing reactive request: content length=35, apiUrl=https://api.deepseek.com/chat/completions, modelName=deepseek-reasoner, userId=689258T, multiTurn=true
2025-08-01 21:28:22.735 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Transaction method completed: XID=seata-server:8091:135786363947581441, method=processRequestReactive
2025-08-01 21:28:22.753 [http-nio-8688-exec-2] DEBUG c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态: ID=seata-server:8091:135786363947581441, 状态=Committed
2025-08-01 21:28:22.754 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:28:22.757 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581441(String)
2025-08-01 21:28:22.766 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:28:22.770 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==>  Preparing: UPDATE transaction_log SET xid=?, transaction_name=?, transaction_mode=?, status=?, request_path=?, source_ip=?, user_id=?, branch_ids=?, extra_data=?, start_time=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:28:22.776 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==> Parameters: seata-server:8091:135786363947581441(String), com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive(String), AT(String), Committed(String), (String), 192.168.86.8(String), system(String), [](String), {"duration":4,"result":"success","xid":"seata-server:8091:135786363947581441","startTime":1754054902731,"endTime":1754054902735,"transactionId":644,"status":"Begin"}(String), 2025-08-01T21:28:22(LocalDateTime), 2025-08-01T21:28:22(LocalDateTime), 2025-08-01T21:28:22.766889100(LocalDateTime), 644(Long)
2025-08-01 21:28:22.829 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - <==    Updates: 1
2025-08-01 21:28:22.829 [http-nio-8688-exec-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态成功: ID=seata-server:8091:135786363947581441, 状态=Committed
2025-08-01 21:28:22.836 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581441, branchId:135786363947581444, lockKeys:transaction_log:644
2025-08-01 21:28:22.863 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581441, branchId:135786363947581445, lockKeys:transaction_log:644;undo_log:3811
2025-08-01 21:28:22.895 [http-nio-8688-exec-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作结束: ID=seata-server:8091:135786363947581441, 状态=Committed
2025-08-01 21:28:22.895 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:28:22.896 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581441(String)
2025-08-01 21:28:22.901 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:28:22.902 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==>  Preparing: UPDATE transaction_log SET xid=?, transaction_name=?, transaction_mode=?, status=?, request_path=?, source_ip=?, user_id=?, branch_ids=?, extra_data=?, start_time=?, end_time=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:28:22.903 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==> Parameters: seata-server:8091:135786363947581441(String), com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive(String), AT(String), Committed(String), (String), 192.168.86.8(String), system(String), [](String), {"duration":4,"result":"success","xid":"seata-server:8091:135786363947581441","startTime":1754054902731,"endTime":1754054902735,"transactionId":644,"status":"Begin"}(String), 2025-08-01T21:28:22(LocalDateTime), 2025-08-01T21:28:22.901860800(LocalDateTime), 2025-08-01T21:28:22(LocalDateTime), 2025-08-01T21:28:22.901860800(LocalDateTime), 644(Long)
2025-08-01 21:28:22.939 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - <==    Updates: 1
2025-08-01 21:28:22.940 [http-nio-8688-exec-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作结束成功: ID=seata-server:8091:135786363947581441, 状态=Committed
2025-08-01 21:28:22.946 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581441, branchId:135786363947581446, lockKeys:transaction_log:644
2025-08-01 21:28:22.971 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581441, branchId:135786363947581447, lockKeys:undo_log:3813;transaction_log:644
2025-08-01 21:28:22.998 [http-nio-8688-exec-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - transaction seata-server:8091:135786363947581441 will be commit
2025-08-01 21:28:23.010 [http-nio-8688-exec-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - transaction end, xid = seata-server:8091:135786363947581441
2025-08-01 21:28:23.010 [http-nio-8688-exec-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - [seata-server:8091:135786363947581441] commit status: Committed
2025-08-01 21:28:23.078 [boundedElastic-4] INFO  com.bgpay.bgai.transaction.TransactionCoordinator - Transaction prepared for user 689258T: chatCompletionId=chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:23.078 [boundedElastic-4] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - Transaction prepared with chatCompletionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:23.098 [boundedElastic-4] DEBUG com.bgpay.bgai.web.WebClientConfig - Request: POST https://api.deepseek.com/chat/completions
2025-08-01 21:28:23.099 [boundedElastic-4] DEBUG com.bgpay.bgai.web.WebClientConfig - Request: POST https://api.deepseek.com/chat/completions
2025-08-01 21:28:23.845 [rpcDispatch_RMROLE_1_1_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581441', branchId=135786363947581442, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false,"skipCheckLock":true}'}
2025-08-01 21:28:23.846 [rpcDispatch_RMROLE_1_1_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581441 135786363947581442 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false,"skipCheckLock":true}
2025-08-01 21:28:23.847 [rpcDispatch_RMROLE_1_1_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:23.868 [rpcDispatch_RMROLE_1_2_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581441', branchId=135786363947581443, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false,"skipCheckLock":true}'}
2025-08-01 21:28:23.868 [rpcDispatch_RMROLE_1_2_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581441 135786363947581443 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false,"skipCheckLock":true}
2025-08-01 21:28:23.868 [rpcDispatch_RMROLE_1_2_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:23.875 [rpcDispatch_RMROLE_1_3_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581441', branchId=135786363947581444, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:28:23.875 [rpcDispatch_RMROLE_1_3_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581441 135786363947581444 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:28:23.875 [rpcDispatch_RMROLE_1_3_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:23.882 [rpcDispatch_RMROLE_1_4_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581441', branchId=135786363947581445, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:28:23.882 [rpcDispatch_RMROLE_1_4_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581441 135786363947581445 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:28:23.882 [rpcDispatch_RMROLE_1_4_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:23.889 [rpcDispatch_RMROLE_1_5_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581441', branchId=135786363947581446, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:28:23.889 [rpcDispatch_RMROLE_1_5_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581441 135786363947581446 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:28:23.890 [rpcDispatch_RMROLE_1_5_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:23.897 [rpcDispatch_RMROLE_1_6_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581441', branchId=135786363947581447, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:28:23.897 [rpcDispatch_RMROLE_1_6_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581441 135786363947581447 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:28:23.897 [rpcDispatch_RMROLE_1_6_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:41.735 [reactor-http-nio-2] DEBUG c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - Response received from DeepSeek API: {"id":"b8385f13-2ea0-4599-9fc5-6ef7d56f5311","object":"chat.completion","created":1754054903,"model"...
2025-08-01 21:28:41.737 [reactor-http-nio-2] WARN  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - 在extractUsageInfo中使用默认userId：'default'，而不是null或空字符串
2025-08-01 21:28:41.737 [reactor-http-nio-2] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - 解析完成的响应，使用用户ID: default, 聊天完成ID: b8385f13-2ea0-4599-9fc5-6ef7d56f5311
2025-08-01 21:28:41.752 [reactor-http-nio-2] DEBUG c.bgpay.bgai.mapper.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-08-01 21:28:41.752 [reactor-http-nio-2] DEBUG c.bgpay.bgai.mapper.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1754054921750(Long), deepseek-reasoner(String), 689258T(String), chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String)
2025-08-01 21:28:41.772 [reactor-http-nio-2] DEBUG c.bgpay.bgai.mapper.ChatCompletionsMapper.insert - <==    Updates: 1
2025-08-01 21:28:41.772 [reactor-http-nio-2] INFO  com.bgpay.bgai.transaction.TransactionCoordinator - Transaction committed for user 689258T: chatCompletionId=chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:41.789 [reactor-http-nio-2] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - 开始发送账单消息，chatCompletionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4, userId: 689258T
2025-08-01 21:28:41.911 [reactor-http-nio-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - Begin new global transaction [seata-server:8091:135786363947581448]
2025-08-01 21:28:41.917 [reactor-http-nio-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作开始 - ID: seata-server:8091:135786363947581448, 名称: com.bgpay.bgai.service.mq.BillingTransactionListenerImpl.executeLocalTransaction, 模式: AT, 路径: , IP: 192.168.86.8, 用户: system
2025-08-01 21:28:41.918 [reactor-http-nio-2] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - ==>  Preparing: INSERT INTO transaction_log ( xid, transaction_name, transaction_mode, status, request_path, source_ip, user_id, branch_ids, extra_data, start_time, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-08-01 21:28:41.918 [reactor-http-nio-2] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - ==> Parameters: seata-server:8091:135786363947581448(String), com.bgpay.bgai.service.mq.BillingTransactionListenerImpl.executeLocalTransaction(String), AT(String), ACTIVE(String), (String), 192.168.86.8(String), system(String), [](String), {"result":"active","startTime":1754054921917}(String), 2025-08-01T21:28:41.918934800(LocalDateTime), 2025-08-01T21:28:41.918934800(LocalDateTime)
2025-08-01 21:28:41.947 [reactor-http-nio-2] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - <==    Updates: 1
2025-08-01 21:28:41.956 [reactor-http-nio-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581448, branchId:135786363947581449, lockKeys:transaction_log:645
2025-08-01 21:28:41.978 [reactor-http-nio-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581448, branchId:135786363947581450, lockKeys:undo_log:3815;transaction_log:645
2025-08-01 21:28:42.001 [reactor-http-nio-2] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Transaction method starting: XID=seata-server:8091:135786363947581448, method=executeLocalTransaction
2025-08-01 21:28:42.001 [reactor-http-nio-2] INFO  c.b.bgai.service.mq.BillingTransactionListenerImpl - 开始执行本地事务, xid: seata-server:8091:135786363947581448, userId: 689258T, completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:42.010 [reactor-http-nio-2] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.selectCount - ==>  Preparing: SELECT COUNT( * ) AS total FROM usage_info WHERE (chat_completion_id = ?)
2025-08-01 21:28:42.011 [reactor-http-nio-2] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.selectCount - ==> Parameters: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String)
2025-08-01 21:28:42.024 [reactor-http-nio-2] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.selectCount - <==      Total: 1
2025-08-01 21:28:42.025 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:28:42.025 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581448(String)
2025-08-01 21:28:42.030 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:28:42.044 [reactor-http-nio-2] DEBUG c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态: ID=seata-server:8091:135786363947581448, 状态=COMPLETED
2025-08-01 21:28:42.045 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:28:42.045 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581448(String)
2025-08-01 21:28:42.052 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:28:42.053 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==>  Preparing: UPDATE transaction_log SET xid=?, transaction_name=?, transaction_mode=?, status=?, request_path=?, source_ip=?, user_id=?, branch_ids=?, start_time=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:28:42.054 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==> Parameters: seata-server:8091:135786363947581448(String), com.bgpay.bgai.service.mq.BillingTransactionListenerImpl.executeLocalTransaction(String), AT(String), COMPLETED(String), (String), 192.168.86.8(String), system(String), [](String), 2025-08-01T21:28:42(LocalDateTime), 2025-08-01T21:28:42(LocalDateTime), 2025-08-01T21:28:42.052936900(LocalDateTime), 645(Long)
2025-08-01 21:28:42.090 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - <==    Updates: 1
2025-08-01 21:28:42.090 [reactor-http-nio-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态成功: ID=seata-server:8091:135786363947581448, 状态=COMPLETED
2025-08-01 21:28:42.099 [reactor-http-nio-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581448, branchId:135786363947581451, lockKeys:transaction_log:645
2025-08-01 21:28:42.130 [reactor-http-nio-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581448, branchId:135786363947581452, lockKeys:undo_log:3817;transaction_log:645
2025-08-01 21:28:42.160 [reactor-http-nio-2] INFO  c.b.bgai.service.mq.BillingTransactionListenerImpl - 本地事务执行成功，提交事务, xid: seata-server:8091:135786363947581448, completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:42.160 [reactor-http-nio-2] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Transaction method completed: XID=seata-server:8091:135786363947581448, method=executeLocalTransaction
2025-08-01 21:28:42.178 [reactor-http-nio-2] DEBUG c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态: ID=seata-server:8091:135786363947581448, 状态=Committed
2025-08-01 21:28:42.179 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:28:42.179 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581448(String)
2025-08-01 21:28:42.185 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:28:42.186 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==>  Preparing: UPDATE transaction_log SET xid=?, transaction_name=?, transaction_mode=?, status=?, request_path=?, source_ip=?, user_id=?, branch_ids=?, extra_data=?, start_time=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:28:42.187 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==> Parameters: seata-server:8091:135786363947581448(String), com.bgpay.bgai.service.mq.BillingTransactionListenerImpl.executeLocalTransaction(String), AT(String), Committed(String), (String), 192.168.86.8(String), system(String), [](String), {"duration":159,"result":"success","xid":"seata-server:8091:135786363947581448","startTime":1754054922001,"endTime":1754054922160,"transactionId":645,"status":"Begin"}(String), 2025-08-01T21:28:42(LocalDateTime), 2025-08-01T21:28:42(LocalDateTime), 2025-08-01T21:28:42.186602500(LocalDateTime), 645(Long)
2025-08-01 21:28:42.223 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - <==    Updates: 1
2025-08-01 21:28:42.223 [reactor-http-nio-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态成功: ID=seata-server:8091:135786363947581448, 状态=Committed
2025-08-01 21:28:42.230 [reactor-http-nio-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581448, branchId:135786363947581453, lockKeys:transaction_log:645
2025-08-01 21:28:42.250 [reactor-http-nio-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581448, branchId:135786363947581454, lockKeys:undo_log:3819;transaction_log:645
2025-08-01 21:28:42.286 [reactor-http-nio-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作结束: ID=seata-server:8091:135786363947581448, 状态=Committed
2025-08-01 21:28:42.287 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:28:42.287 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581448(String)
2025-08-01 21:28:42.294 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:28:42.294 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==>  Preparing: UPDATE transaction_log SET xid=?, transaction_name=?, transaction_mode=?, status=?, request_path=?, source_ip=?, user_id=?, branch_ids=?, extra_data=?, start_time=?, end_time=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:28:42.295 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==> Parameters: seata-server:8091:135786363947581448(String), com.bgpay.bgai.service.mq.BillingTransactionListenerImpl.executeLocalTransaction(String), AT(String), Committed(String), (String), 192.168.86.8(String), system(String), [](String), {"duration":159,"result":"success","xid":"seata-server:8091:135786363947581448","startTime":1754054922001,"endTime":1754054922160,"transactionId":645,"status":"Begin"}(String), 2025-08-01T21:28:42(LocalDateTime), 2025-08-01T21:28:42.294632500(LocalDateTime), 2025-08-01T21:28:42(LocalDateTime), 2025-08-01T21:28:42.294632500(LocalDateTime), 645(Long)
2025-08-01 21:28:42.326 [reactor-http-nio-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - <==    Updates: 1
2025-08-01 21:28:42.326 [reactor-http-nio-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作结束成功: ID=seata-server:8091:135786363947581448, 状态=Committed
2025-08-01 21:28:42.332 [reactor-http-nio-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581448, branchId:135786363947581455, lockKeys:transaction_log:645
2025-08-01 21:28:42.353 [reactor-http-nio-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581448, branchId:135786363947581456, lockKeys:transaction_log:645;undo_log:3821
2025-08-01 21:28:42.387 [reactor-http-nio-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - transaction seata-server:8091:135786363947581448 will be commit
2025-08-01 21:28:42.394 [reactor-http-nio-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - transaction end, xid = seata-server:8091:135786363947581448
2025-08-01 21:28:42.394 [reactor-http-nio-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - [seata-server:8091:135786363947581448] commit status: Committed
2025-08-01 21:28:42.401 [reactor-http-nio-2] INFO  com.bgpay.bgai.service.mq.RocketMQProducerService - Successfully sent billing message in transaction, completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:42.401 [reactor-http-nio-2] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - 账单消息发送成功，chatCompletionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4, userId: 689258T
2025-08-01 21:28:42.407 [reactor-http-nio-2] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - 执行第一步操作 - 准备处理环境, businessKey: 689258T:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:42.419 [reactor-http-nio-2] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - 成功设置处理中状态: BILLING:PROCESSED:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4:processing
2025-08-01 21:28:42.432 [reactor-http-nio-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - Processed response for user 689258T, content length: 345
2025-08-01 21:28:42.433 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.service.mq.RocketMQBillingServiceImpl - 解码后的JSON数据: {"chatCompletionId":"chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4","completionReasoningTokens":99,"completionTokens":291,"createdAt":"2025-08-01 21:28:41.788934600","modelType":"deepseek-reasoner","promptCacheHitTokens":0,"promptCacheMissTokens":25,"promptTokens":0,"promptTokensCached":0}
2025-08-01 21:28:42.470 [ConsumeMessageThread_billing-consumer-group_1] INFO  c.bgpay.bgai.service.impl.UsageRecordServiceImpl - 缓存计费数据成功: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:42.480 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - 执行第一步操作 - 准备处理环境, businessKey: 689258T:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:42.496 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - 成功设置处理中状态: BILLING:PROCESSED:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4:processing
2025-08-01 21:28:42.525 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Calculating input cost for model: deepseek-reasoner, timePeriod: standard, tokens: 0/25
2025-08-01 21:28:42.564 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.PriceConfigMapper.selectList - ==>  Preparing: SELECT id,model_type,time_period,cache_status,io_type,price,version,effective_time,update_time FROM price_config WHERE (model_type = ? AND time_period = ? AND io_type = ? AND effective_time <= ? AND cache_status = ?) ORDER BY effective_time DESC LIMIT 1
2025-08-01 21:28:42.564 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.PriceConfigMapper.selectList - ==> Parameters: deepseek-reasoner(String), standard(String), input(String), 2025-08-01T21:28:42.562607500(LocalDateTime), miss(String)
2025-08-01 21:28:42.576 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.PriceConfigMapper.selectList - <==      Total: 1
2025-08-01 21:28:42.605 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.service.impl.BGAIServiceImpl - Cache miss cost calculated: tokens=25, price=4.0000, cost=0.0001
2025-08-01 21:28:42.605 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Total input cost calculated: 0.0001
2025-08-01 21:28:42.605 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Calculating output cost for model: deepseek-reasoner, timePeriod: standard, tokens: 291
2025-08-01 21:28:42.637 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.PriceConfigMapper.selectList - ==>  Preparing: SELECT id,model_type,time_period,cache_status,io_type,price,version,effective_time,update_time FROM price_config WHERE (model_type = ? AND time_period = ? AND io_type = ? AND effective_time <= ? AND cache_status IS NULL) ORDER BY effective_time DESC LIMIT 1
2025-08-01 21:28:42.638 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.PriceConfigMapper.selectList - ==> Parameters: deepseek-reasoner(String), standard(String), output(String), 2025-08-01T21:28:42.635608600(LocalDateTime)
2025-08-01 21:28:42.644 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.PriceConfigMapper.selectList - <==      Total: 1
2025-08-01 21:28:42.662 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Output cost calculated: tokens=291, price=16.0000, cost=0.0047
2025-08-01 21:28:42.692 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_type,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at,message_id,input_tokens,output_tokens,status,created_at,updated_at FROM usage_record WHERE (chat_completion_id = ? AND message_id = ?) LIMIT 1
2025-08-01 21:28:42.692 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - ==> Parameters: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String), 2408820C752992B2B5858E1AC1F351217FBC36BAF30C049BD6820000(String)
2025-08-01 21:28:42.703 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - <==      Total: 0
2025-08-01 21:28:42.706 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.insert - ==>  Preparing: INSERT INTO usage_record ( model_type, chat_completion_id, user_id, input_cost, output_cost, price_version, message_id, input_tokens, output_tokens, status, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-08-01 21:28:42.707 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.insert - ==> Parameters: deepseek-reasoner(String), chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String), 689258T(String), 0.0001(BigDecimal), 0.0047(BigDecimal), 1(Integer), 2408820C752992B2B5858E1AC1F351217FBC36BAF30C049BD6820000(String), 25(Integer), 291(Integer), PENDING(String), 2025-08-01T21:28:42.704367400(LocalDateTime), 2025-08-01T21:28:42.704367400(LocalDateTime)
2025-08-01 21:28:42.720 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.insert - <==    Updates: 1
2025-08-01 21:28:42.721 [ConsumeMessageThread_billing-consumer-group_1] INFO  c.bgpay.bgai.service.impl.UsageRecordServiceImpl - Inserted new usage record for completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4, messageId: 2408820C752992B2B5858E1AC1F351217FBC36BAF30C049BD6820000
2025-08-01 21:28:42.721 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Second step completed successfully. businessKey: 689258T:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:42.747 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Executing third step - updating billing status, businessKey: 689258T:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:42.748 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_type,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at,message_id,input_tokens,output_tokens,status,created_at,updated_at FROM usage_record WHERE (chat_completion_id = ? AND message_id = ?) LIMIT 1
2025-08-01 21:28:42.748 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - ==> Parameters: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String), 2408820C752992B2B5858E1AC1F351217FBC36BAF30C049BD6820000(String)
2025-08-01 21:28:42.755 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - <==      Total: 1
2025-08-01 21:28:42.761 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.UsageInfoServiceImpl - Processing usage info for user: 689258T, completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:42.762 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.b.b.mapper.UsageInfoMapper.selectByCompletionId - ==>  Preparing: SELECT * FROM usage_info WHERE chat_completion_id = ? LIMIT 1
2025-08-01 21:28:42.762 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.b.b.mapper.UsageInfoMapper.selectByCompletionId - ==> Parameters: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String)
2025-08-01 21:28:42.767 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.b.b.mapper.UsageInfoMapper.selectByCompletionId - <==      Total: 0
2025-08-01 21:28:42.769 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.insert - ==>  Preparing: INSERT INTO usage_info ( user_id, chat_completion_id, prompt_tokens, completion_tokens, total_tokens, prompt_tokens_cached, completion_reasoning_tokens, prompt_cache_hit_tokens, prompt_cache_miss_tokens, created_at, model_type, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-08-01 21:28:42.770 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.insert - ==> Parameters: 689258T(String), chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String), 25(Integer), 291(Integer), 316(Integer), 0(Integer), 99(Integer), 0(Integer), 25(Integer), 2025-08-01T21:28:42.768958200(LocalDateTime), deepseek-reasoner(String), 2025-08-01T21:28:42.768958200(LocalDateTime)
2025-08-01 21:28:42.786 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.insert - <==    Updates: 1
2025-08-01 21:28:42.786 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.UsageInfoServiceImpl - Successfully processed usage info for completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:42.791 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.update - ==>  Preparing: UPDATE usage_record SET status=?,updated_at=? WHERE (chat_completion_id = ? AND message_id = ?)
2025-08-01 21:28:42.792 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.update - ==> Parameters: COMPLETED(String), 2025-08-01T21:28:42.790961800(LocalDateTime), chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String), 2408820C752992B2B5858E1AC1F351217FBC36BAF30C049BD6820000(String)
2025-08-01 21:28:42.804 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.update - <==    Updates: 1
2025-08-01 21:28:42.840 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Third step completed successfully. businessKey: 689258T:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:28:42.841 [rpcDispatch_RMROLE_1_7_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581448', branchId=135786363947581449, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false,"skipCheckLock":true}'}
2025-08-01 21:28:42.841 [rpcDispatch_RMROLE_1_7_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581448 135786363947581449 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false,"skipCheckLock":true}
2025-08-01 21:28:42.841 [rpcDispatch_RMROLE_1_7_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:42.849 [rpcDispatch_RMROLE_1_8_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581448', branchId=135786363947581450, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false,"skipCheckLock":true}'}
2025-08-01 21:28:42.849 [rpcDispatch_RMROLE_1_8_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581448 135786363947581450 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false,"skipCheckLock":true}
2025-08-01 21:28:42.849 [rpcDispatch_RMROLE_1_8_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:42.858 [rpcDispatch_RMROLE_1_9_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581448', branchId=135786363947581451, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:28:42.858 [rpcDispatch_RMROLE_1_9_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581448 135786363947581451 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:28:42.858 [rpcDispatch_RMROLE_1_9_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:42.873 [rpcDispatch_RMROLE_1_10_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581448', branchId=135786363947581452, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:28:42.873 [rpcDispatch_RMROLE_1_10_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581448 135786363947581452 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:28:42.873 [rpcDispatch_RMROLE_1_10_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:42.874 [ConsumeMessageThread_billing-consumer-group_1] INFO  c.bgpay.bgai.service.mq.RocketMQBillingServiceImpl - Message consumed: 2408820C752992B2B5858E1AC1F351217FBC36BAF30C049BD6820000
2025-08-01 21:28:42.893 [rpcDispatch_RMROLE_1_11_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581448', branchId=135786363947581453, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:28:42.893 [rpcDispatch_RMROLE_1_11_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581448 135786363947581453 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:28:42.893 [rpcDispatch_RMROLE_1_11_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:42.906 [rpcDispatch_RMROLE_1_12_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581448', branchId=135786363947581454, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:28:42.906 [rpcDispatch_RMROLE_1_12_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581448 135786363947581454 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:28:42.906 [rpcDispatch_RMROLE_1_12_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:42.918 [rpcDispatch_RMROLE_1_13_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581448', branchId=135786363947581455, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:28:42.918 [rpcDispatch_RMROLE_1_13_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581448 135786363947581455 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:28:42.918 [rpcDispatch_RMROLE_1_13_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:42.925 [rpcDispatch_RMROLE_1_14_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581448', branchId=135786363947581456, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:28:42.925 [rpcDispatch_RMROLE_1_14_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581448 135786363947581456 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:28:42.925 [rpcDispatch_RMROLE_1_14_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:28:45.630 [reactor-http-nio-2] ERROR o.s.web.server.adapter.HttpWebHandlerAdapter - [1302c808] Error [org.springframework.dao.DataAccessResourceFailureException: 3,000 milliseconds timeout on connection http-outgoing-0 [ACTIVE]] for HTTP POST "/api/chatGatWay-internal", but ServerHttpResponse already committed (200 OK)
2025-08-01 21:28:45.633 [reactor-http-nio-2] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 200 OK
2025-08-01 21:28:45.637 [http-nio-8688-exec-4] ERROR o.a.c.c.C.[.[localhost].[/].[httpHandlerServlet] - Servlet.service() for servlet [httpHandlerServlet] threw exception
java.net.SocketTimeoutException: 3,000 milliseconds timeout on connection http-outgoing-0 [ACTIVE]
	at org.apache.http.nio.protocol.HttpAsyncRequestExecutor.timeout(HttpAsyncRequestExecutor.java:387)
	at org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:98)
	at org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:40)
	at org.apache.http.impl.nio.reactor.AbstractIODispatch.timeout(AbstractIODispatch.java:175)
	at org.apache.http.impl.nio.reactor.BaseIOReactor.sessionTimedOut(BaseIOReactor.java:261)
	at org.apache.http.impl.nio.reactor.AbstractIOReactor.timeoutCheck(AbstractIOReactor.java:506)
	at org.apache.http.impl.nio.reactor.BaseIOReactor.validate(BaseIOReactor.java:211)
	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280)
	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-08-01 21:28:45.637 [http-nio-8688-exec-4] ERROR o.a.c.c.C.[.[localhost].[/].[httpHandlerServlet] - Servlet.service() for servlet [httpHandlerServlet] in context with path [] threw exception [Failed to create response content] with root cause
java.net.SocketTimeoutException: 3,000 milliseconds timeout on connection http-outgoing-0 [ACTIVE]
	at org.apache.http.nio.protocol.HttpAsyncRequestExecutor.timeout(HttpAsyncRequestExecutor.java:387)
	at org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:98)
	at org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:40)
	at org.apache.http.impl.nio.reactor.AbstractIODispatch.timeout(AbstractIODispatch.java:175)
	at org.apache.http.impl.nio.reactor.BaseIOReactor.sessionTimedOut(BaseIOReactor.java:261)
	at org.apache.http.impl.nio.reactor.AbstractIOReactor.timeoutCheck(AbstractIOReactor.java:506)
	at org.apache.http.impl.nio.reactor.BaseIOReactor.validate(BaseIOReactor.java:211)
	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280)
	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-08-01 21:30:41.908 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:10909] result: true
2025-08-01 21:31:07.806 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 开始刷新文件类型缓存
2025-08-01 21:31:07.815 [scheduling-1] WARN  com.alibaba.druid.pool.DruidAbstractDataSource - discard long time none received connection. , jdbcUrl : jdbc:mysql://8.133.246.113:3306/deepseek?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true&useSSL=false, version : 1.2.8, lastPacketReceivedIdleMillis : 144356
2025-08-01 21:31:07.886 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,extensions,magic_numbers,is_active FROM mime_type_config WHERE (is_active = ?)
2025-08-01 21:31:07.886 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:31:07.896 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - <==      Total: 52
2025-08-01 21:31:07.897 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE (is_allowed = ?)
2025-08-01 21:31:07.897 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:31:07.905 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:31:07.905 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 文件类型缓存刷新完成，共加载 52 个MIME类型配置和 11 个允许的文件类型
2025-08-01 21:31:38.508 [http-nio-8688-exec-6] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /webjars/swagger-ui/index.html from 0:0:0:0:0:0:0:1
2025-08-01 21:31:38.552 [boundedElastic-2] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 200 OK
2025-08-01 21:31:38.746 [http-nio-8688-exec-8] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /webjars/swagger-ui/swagger-ui.css from 0:0:0:0:0:0:0:1
2025-08-01 21:31:38.746 [http-nio-8688-exec-9] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /webjars/swagger-ui/index.css from 0:0:0:0:0:0:0:1
2025-08-01 21:31:38.750 [http-nio-8688-exec-1] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /webjars/swagger-ui/swagger-ui-standalone-preset.js from 0:0:0:0:0:0:0:1
2025-08-01 21:31:38.750 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /webjars/swagger-ui/swagger-ui-bundle.js from 0:0:0:0:0:0:0:1
2025-08-01 21:31:38.750 [http-nio-8688-exec-3] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /webjars/swagger-ui/swagger-initializer.js from 0:0:0:0:0:0:0:1
2025-08-01 21:31:38.758 [http-nio-8688-exec-1] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 304 NOT_MODIFIED
2025-08-01 21:31:38.758 [http-nio-8688-exec-10] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 304 NOT_MODIFIED
2025-08-01 21:31:38.758 [boundedElastic-5] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 200 OK
2025-08-01 21:31:38.762 [http-nio-8688-exec-9] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 200 OK
2025-08-01 21:31:38.763 [http-nio-8688-exec-3] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 304 NOT_MODIFIED
2025-08-01 21:31:40.013 [http-nio-8688-exec-6] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /v3/api-docs/swagger-config from 0:0:0:0:0:0:0:1
2025-08-01 21:31:40.018 [http-nio-8688-exec-6] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 200 OK
2025-08-01 21:31:40.021 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /webjars/swagger-ui/favicon-32x32.png from 0:0:0:0:0:0:0:1
2025-08-01 21:31:40.025 [boundedElastic-2] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 200 OK
2025-08-01 21:31:40.088 [http-nio-8688-exec-7] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: GET /v3/api-docs/user from 0:0:0:0:0:0:0:1
2025-08-01 21:31:40.754 [http-nio-8688-exec-7] INFO  org.springdoc.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 657 ms
2025-08-01 21:31:40.785 [http-nio-8688-exec-8] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 200 OK
2025-08-01 21:35:25.551 [Thread-4] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-08-01 21:35:25.552 [Thread-12] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-08-01 21:35:25.553 [Thread-4] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-08-01 21:35:25.553 [Thread-0] INFO  com.bgpay.bgai.BgaiApplication - 执行应用关闭钩子，正在关闭资源...
2025-08-01 21:35:25.553 [Thread-12] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-08-01 21:35:32.691 [SpringContextShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-08-01 21:35:32.691 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] d750d92e-152f-4055-a641-3bc9dda85a29 deregistering service bgai with instance: Instance{instanceId='null', ip='192.168.86.8', port=8080, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-08-01 21:35:32.698 [SpringContextShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-08-01 21:35:32.701 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-08-01 21:35:32.701 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-08-01 21:35:32.701 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-08-01 21:35:32.701 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-08-01 21:35:32.701 [SpringContextShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-08-01 21:35:32.702 [SpringContextShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@244f95d2[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-08-01 21:35:32.702 [SpringContextShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1754054467514_139.227.195.146_4616
2025-08-01 21:35:32.708 [nacos-grpc-client-executor-8.133.246.113-335] WARN  c.a.nacos.common.remote.client.grpc.GrpcClient - [1754054467514_139.227.195.146_4616]Ignore error event,isRunning:false,isAbandon=false
2025-08-01 21:35:32.711 [SpringContextShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@779fd855[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 336]
2025-08-01 21:35:32.711 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@351c5f40[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 288]
2025-08-01 21:35:32.712 [SpringContextShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-08-01 21:35:32.712 [SpringContextShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-08-01 21:35:32.712 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-08-01 21:35:32.723 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0xcc98ead1, L:/192.168.86.8:58348 ! R:/8.133.246.113:8091]
2025-08-01 21:35:32.724 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0xcc98ead1, L:/192.168.86.8:58348 ! R:/8.133.246.113:8091]
2025-08-01 21:35:32.724 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0xcc98ead1, L:/192.168.86.8:58348 ! R:/8.133.246.113:8091]
2025-08-01 21:35:32.724 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0xcc98ead1, L:/192.168.86.8:58348 ! R:/8.133.246.113:8091]
2025-08-01 21:35:32.724 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xcc98ead1, L:/192.168.86.8:58348 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:35:32.724 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xcc98ead1, L:/192.168.86.8:58348 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:35:32.724 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0xe17242ea, L:/192.168.86.8:58391 ! R:/8.133.246.113:8091]
2025-08-01 21:35:32.724 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0xe17242ea, L:/192.168.86.8:58391 ! R:/8.133.246.113:8091]
2025-08-01 21:35:32.724 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0xe17242ea, L:/192.168.86.8:58391 ! R:/8.133.246.113:8091]
2025-08-01 21:35:32.725 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0xe17242ea, L:/192.168.86.8:58391 ! R:/8.133.246.113:8091]
2025-08-01 21:35:32.725 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xe17242ea, L:/192.168.86.8:58391 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:35:32.725 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xe17242ea, L:/192.168.86.8:58391 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:35:32.727 [SpringContextShutdownHook] DEBUG com.bgpay.bgai.config.AsyncConfig$1 - Shutting down ExecutorService 'blockingExecutor'
2025-08-01 21:35:32.755 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:10911] result: true
2025-08-01 21:35:32.755 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:9876] result: true
2025-08-01 21:35:32.755 [SpringContextShutdownHook] INFO  com.bgpay.bgai.service.mq.RocketMQProducerService - RocketMQ producer shutdown
2025-08-01 21:35:32.768 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:10911] result: true
2025-08-01 21:35:32.768 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:9876] result: true
2025-08-01 21:35:32.798 [SpringContextShutdownHook] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 动态路由服务关闭，执行清理操作
2025-08-01 21:35:32.800 [SpringContextShutdownHook] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 21:37:08.188 [main] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/Administrator/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/Administrator/.m2/repository/org/json/json/20220320/json-20220320.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-08-01 21:37:08.191 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-08-01 21:37:08.192 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - The following 1 profile is active: "dev"
2025-08-01 21:37:08.918 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'allowedFileTypeMapper' and 'com.bgpay.bgai.mapper.AllowedFileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.919 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiClientMapper' and 'com.bgpay.bgai.mapper.ApiClientMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.919 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiConfigMapper' and 'com.bgpay.bgai.mapper.ApiConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.919 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiKeyMapper' and 'com.bgpay.bgai.mapper.ApiKeyMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.919 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'chatCompletionsMapper' and 'com.bgpay.bgai.mapper.ChatCompletionsMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.919 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'choicesMapper' and 'com.bgpay.bgai.mapper.ChoicesMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.919 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'fileTypeMapper' and 'com.bgpay.bgai.mapper.FileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.919 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceConfigMapper' and 'com.bgpay.bgai.mapper.PriceConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.920 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceVersionMapper' and 'com.bgpay.bgai.mapper.PriceVersionMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.920 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'transactionLogMapper' and 'com.bgpay.bgai.mapper.TransactionLogMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.920 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageInfoMapper' and 'com.bgpay.bgai.mapper.UsageInfoMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.920 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageRecordMapper' and 'com.bgpay.bgai.mapper.UsageRecordMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.920 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'userMapper' and 'com.bgpay.bgai.mapper.UserMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:08.920 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - No MyBatis mapper was found in '[com.bgpay.bgai.mapper]' package. Please check your configuration.
2025-08-01 21:37:08.921 [main] WARN  o.s.c.annotation.ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'gatewayBeanFactoryPostProcessor' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static' and/or marking the containing configuration class as 'proxyBeanMethods=false'.
2025-08-01 21:37:09.011 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'unifiedEnvironmentConfig' of type [com.bgpay.bgai.config.UnifiedEnvironmentConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:09.012 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'environment' of type [org.springframework.core.env.StandardEnvironment] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:09.097 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'testBeanPostProcessor' of type [com.bgpay.bgai.config.TestBeanPostProcessor$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [bgaiServiceImplInjector] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 21:37:09.106 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'messageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:09.109 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:09.134 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:09.138 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'listenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:09.451 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - SeataDisableConfiguration已加载，Seata在测试环境中被禁用
2025-08-01 21:37:09.451 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - 设置系统属性: seata.enabled=false, saga.enabled=false
2025-08-01 21:37:09.665 [main] INFO  com.bgpay.bgai.config.NacosRouteConfigListener - 初始化Nacos路由配置监听器
2025-08-01 21:37:09.667 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:37:09.667 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:37:09.668 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 8a41334a-d5d8-42b0-ba58-27128950c861_config-0
2025-08-01 21:37:09.669 [main] INFO  com.alibaba.nacos.common.remote.client - [8a41334a-d5d8-42b0-ba58-27128950c861_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d4bc636090
2025-08-01 21:37:09.669 [main] INFO  com.alibaba.nacos.common.remote.client - [8a41334a-d5d8-42b0-ba58-27128950c861_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d4bc6364a0
2025-08-01 21:37:09.669 [main] INFO  com.alibaba.nacos.common.remote.client - [8a41334a-d5d8-42b0-ba58-27128950c861_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:37:09.669 [main] INFO  com.alibaba.nacos.common.remote.client - [8a41334a-d5d8-42b0-ba58-27128950c861_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:37:09.669 [main] INFO  com.alibaba.nacos.common.remote.client - [8a41334a-d5d8-42b0-ba58-27128950c861_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:37:09.670 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:37:09.822 [main] INFO  com.alibaba.nacos.common.remote.client - [8a41334a-d5d8-42b0-ba58-27128950c861_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754055429753_139.227.195.146_5031
2025-08-01 21:37:09.822 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [8a41334a-d5d8-42b0-ba58-27128950c861_config-0] Notify connected event to listeners.
2025-08-01 21:37:09.822 [main] INFO  com.alibaba.nacos.common.remote.client - [8a41334a-d5d8-42b0-ba58-27128950c861_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:37:09.822 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [8a41334a-d5d8-42b0-ba58-27128950c861_config-0] Connected,notify listen context...
2025-08-01 21:37:09.823 [main] INFO  com.alibaba.nacos.common.remote.client - [8a41334a-d5d8-42b0-ba58-27128950c861_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001d4bc79be68
2025-08-01 21:37:09.837 [main] WARN  com.bgpay.bgai.config.NacosRouteConfigListener - Nacos中未找到路由配置数据
2025-08-01 21:37:09.838 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:37:09.838 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:37:09.842 [main] INFO  c.bgpay.bgai.config.NacosRouteDefinitionRepository - 初始化Nacos路由定义存储库
2025-08-01 21:37:09.844 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:37:09.844 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:37:09.845 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 57afa317-2b07-4268-a4a0-b2f5aac97ba1_config-0
2025-08-01 21:37:09.845 [main] INFO  com.alibaba.nacos.common.remote.client - [57afa317-2b07-4268-a4a0-b2f5aac97ba1_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d4bc636090
2025-08-01 21:37:09.845 [main] INFO  com.alibaba.nacos.common.remote.client - [57afa317-2b07-4268-a4a0-b2f5aac97ba1_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d4bc6364a0
2025-08-01 21:37:09.846 [main] INFO  com.alibaba.nacos.common.remote.client - [57afa317-2b07-4268-a4a0-b2f5aac97ba1_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:37:09.846 [main] INFO  com.alibaba.nacos.common.remote.client - [57afa317-2b07-4268-a4a0-b2f5aac97ba1_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:37:09.846 [main] INFO  com.alibaba.nacos.common.remote.client - [57afa317-2b07-4268-a4a0-b2f5aac97ba1_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:37:09.846 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:37:10.024 [main] INFO  com.alibaba.nacos.common.remote.client - [57afa317-2b07-4268-a4a0-b2f5aac97ba1_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754055429928_139.227.195.146_5037
2025-08-01 21:37:10.024 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [57afa317-2b07-4268-a4a0-b2f5aac97ba1_config-0] Notify connected event to listeners.
2025-08-01 21:37:10.024 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [57afa317-2b07-4268-a4a0-b2f5aac97ba1_config-0] Connected,notify listen context...
2025-08-01 21:37:10.024 [main] INFO  com.alibaba.nacos.common.remote.client - [57afa317-2b07-4268-a4a0-b2f5aac97ba1_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:37:10.025 [main] INFO  com.alibaba.nacos.common.remote.client - [57afa317-2b07-4268-a4a0-b2f5aac97ba1_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001d4bc79be68
2025-08-01 21:37:10.043 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 21:37:10.043 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:37:10.043 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:37:10.164 [main] INFO  com.bgpay.bgai.config.RestTemplateConfig - Creating RestTemplate bean using SimpleClientHttpRequestFactory
2025-08-01 21:37:10.300 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - WebServerApplicationContext不可用或WebServer为null，使用配置端口: 8688
2025-08-01 21:37:10.301 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 初始化SSO配置: clientId=bgai-client-id, 使用端口=8688
2025-08-01 21:37:10.302 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 根据实际端口生成redirectUri: http://localhost:8688/api/auth/callback
2025-08-01 21:37:10.302 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - SSO URL配置已更新: redirectUri=http://localhost:8688/api/auth/callback, 系统实际运行端口=8688
2025-08-01 21:37:10.302 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 测试环境中跳过Redis数据清理
2025-08-01 21:37:10.496 [main] WARN  o.s.b.w.r.c.GenericReactiveWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
2025-08-01 21:37:10.500 [main] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-08-01 21:37:10.503 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 57 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 71 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 72 common frames omitted
2025-08-01 21:37:10.505 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: Failed to load ApplicationContext for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 33 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 57 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 71 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 72 common frames omitted
2025-08-01 21:37:10.515 [main] INFO  com.bgpay.bgai.base.YamlDataProvider - 从YAML文件加载测试数据: src/test/resources/test-data/ReactiveYamlDataDrivenApiTest/testChatApi.yml
2025-08-01 21:37:10.516 [main] WARN  com.bgpay.bgai.base.YamlDataProvider - YAML文件不存在: src/test/resources/test-data/ReactiveYamlDataDrivenApiTest/testChatApi.yml
2025-08-01 21:37:10.522 [main] INFO  com.bgpay.bgai.base.YamlDataProvider - 从指定YAML文件加载测试数据: src/test/resources/test-data/api/reactive-users.yml
2025-08-01 21:37:10.578 [main] ERROR io.qameta.allure.AllureLifecycle - Could not add attachment: no test is running
2025-08-01 21:37:10.584 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.592 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 4d998385-e5ce-4b0b-a729-f5b738639041
2025-08-01 21:37:10.594 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 2ab085b6-3b20-44a9-bbfb-bfa22d2fa967 not found
2025-08-01 21:37:10.594 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 2ab085b6-3b20-44a9-bbfb-bfa22d2fa967 not found
2025-08-01 21:37:10.602 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.604 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.605 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.606 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.619 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.627 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: aa1a2872-8253-4019-a8dd-e7002fea38c3
2025-08-01 21:37:10.627 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid b8c1e02a-5925-444e-9e64-22533898d370 not found
2025-08-01 21:37:10.627 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid b8c1e02a-5925-444e-9e64-22533898d370 not found
2025-08-01 21:37:10.633 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.634 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.636 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.637 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.647 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.656 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 8534f5c2-3a57-47d7-a84d-e53feaa09c0a
2025-08-01 21:37:10.657 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid ab7e407f-95d3-4fb3-bc1b-34f651e2990f not found
2025-08-01 21:37:10.657 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid ab7e407f-95d3-4fb3-bc1b-34f651e2990f not found
2025-08-01 21:37:10.670 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.671 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.673 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.674 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.685 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.693 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 4cfe77ad-a763-4549-ac9d-73d9633b3899
2025-08-01 21:37:10.693 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 589ecf5a-fbd8-4aef-b50a-9912a3dd1805 not found
2025-08-01 21:37:10.693 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 589ecf5a-fbd8-4aef-b50a-9912a3dd1805 not found
2025-08-01 21:37:10.699 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.700 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.701 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.702 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.713 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.730 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 37c0442e-da72-4f52-9472-9acc9d63ac8b
2025-08-01 21:37:10.730 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 694aa88b-3295-417a-81f6-7cf4ece6dfec not found
2025-08-01 21:37:10.730 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 694aa88b-3295-417a-81f6-7cf4ece6dfec not found
2025-08-01 21:37:10.739 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.740 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.741 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.742 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.752 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.759 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: eace7eef-b480-4f07-b6aa-a969c640057e
2025-08-01 21:37:10.759 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid e8cd9f2d-0c8d-4af7-8d37-096904923228 not found
2025-08-01 21:37:10.760 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid e8cd9f2d-0c8d-4af7-8d37-096904923228 not found
2025-08-01 21:37:10.766 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.771 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.772 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.773 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.782 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.790 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: e2439527-35cf-4d64-b9ae-bb4029333001
2025-08-01 21:37:10.790 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid b52d0163-0cdc-4d3a-86f6-a4c9aff8938a not found
2025-08-01 21:37:10.790 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid b52d0163-0cdc-4d3a-86f6-a4c9aff8938a not found
2025-08-01 21:37:10.796 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.797 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.797 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:10.799 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@62d21afd]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@3795591d testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5f069693 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4d770bcd, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@93b535f4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@b00ddee3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@5ef6fa34], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:11.408 [main] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/Administrator/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/Administrator/.m2/repository/org/json/json/20220320/json-20220320.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-08-01 21:37:11.414 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-08-01 21:37:11.414 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - The following 1 profile is active: "dev"
2025-08-01 21:37:14.946 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:37:14.950 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-01 21:37:15.066 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.bgpay.bgai.repository.es.ChatRecordRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-08-01 21:37:15.068 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 103 ms. Found 0 JPA repository interfaces.
2025-08-01 21:37:15.288 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'allowedFileTypeMapper' and 'com.bgpay.bgai.mapper.AllowedFileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.289 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiClientMapper' and 'com.bgpay.bgai.mapper.ApiClientMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.289 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiConfigMapper' and 'com.bgpay.bgai.mapper.ApiConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.289 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiKeyMapper' and 'com.bgpay.bgai.mapper.ApiKeyMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.289 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'chatCompletionsMapper' and 'com.bgpay.bgai.mapper.ChatCompletionsMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.289 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'choicesMapper' and 'com.bgpay.bgai.mapper.ChoicesMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.289 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'fileTypeMapper' and 'com.bgpay.bgai.mapper.FileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.290 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceConfigMapper' and 'com.bgpay.bgai.mapper.PriceConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.290 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceVersionMapper' and 'com.bgpay.bgai.mapper.PriceVersionMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.290 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'transactionLogMapper' and 'com.bgpay.bgai.mapper.TransactionLogMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.290 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageInfoMapper' and 'com.bgpay.bgai.mapper.UsageInfoMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.290 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageRecordMapper' and 'com.bgpay.bgai.mapper.UsageRecordMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.290 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'userMapper' and 'com.bgpay.bgai.mapper.UserMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 21:37:15.290 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - No MyBatis mapper was found in '[com.bgpay.bgai.mapper]' package. Please check your configuration.
2025-08-01 21:37:15.296 [main] WARN  o.s.c.annotation.ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'gatewayBeanFactoryPostProcessor' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static' and/or marking the containing configuration class as 'proxyBeanMethods=false'.
2025-08-01 21:37:15.770 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:15.771 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:15.771 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:15.864 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:15.871 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:15.875 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:15.876 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda/0x000001d4bcb76950] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:15.877 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:15.882 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:15.887 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:15.896 [main] INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration - Automatically configure Seata
2025-08-01 21:37:16.037 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 21:37:16.052 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 21:37:16.060 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Initializing Global Transaction Clients ... 
2025-08-01 21:37:16.192 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 21:37:16.194 [main] INFO  io.seata.discovery.registry.RegistryFactory - use registry center type: file
2025-08-01 21:37:16.207 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 21:37:16.212 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:TMROLE,address:8.133.246.113:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='ak=
digest=default_tx_group,192.168.86.8,1754055436210
timestamp=1754055436210
authVersion=V4
vgroup=default_tx_group
ip=192.168.86.8
'} >
2025-08-01 21:37:16.465 [main] INFO  io.seata.core.rpc.netty.TmNettyRemotingClient - register TM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0x6056b4ed, L:/192.168.86.8:63275 - R:/8.133.246.113:8091]
2025-08-01 21:37:16.474 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 105 ms, version:1.8.1-SNAPSHOT,role:TMROLE,channel:[id: 0x6056b4ed, L:/192.168.86.8:63275 - R:/8.133.246.113:8091]
2025-08-01 21:37:16.475 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Transaction Manager Client is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:37:16.493 [main] INFO  io.seata.rm.datasource.AsyncWorker - Async Commit Buffer Limit: 10000
2025-08-01 21:37:16.494 [main] INFO  io.seata.rm.datasource.xa.ResourceManagerXA - ResourceManagerXA init ...
2025-08-01 21:37:16.505 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 21:37:16.506 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Resource Manager is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:37:16.506 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Global Transaction Clients are initialized. 
2025-08-01 21:37:16.510 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'unifiedEnvironmentConfig' of type [com.bgpay.bgai.config.UnifiedEnvironmentConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [persistenceExceptionTranslationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:16.511 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'environment' of type [org.springframework.core.env.StandardEnvironment] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [persistenceExceptionTranslationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:16.614 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:16.665 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:16.690 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:16.839 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'messageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:16.890 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:16.918 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:16.928 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'listenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:17.007 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'testBeanPostProcessor' of type [com.bgpay.bgai.config.TestBeanPostProcessor$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [bgaiServiceImplInjector] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 21:37:17.061 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 21:37:17.075 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:17.081 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:37:17.750 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-08-01 21:37:17.777 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - The ["http-nio-auto-1"] connector has been configured to support HTTP upgrade to [h2c]
2025-08-01 21:37:17.778 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-1"]
2025-08-01 21:37:17.781 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-08-01 21:37:17.781 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.20]
2025-08-01 21:37:18.304 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-08-01 21:37:18.778 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 21:37:18.778 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - RM will register :jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:37:18.778 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:RMROLE,address:8.133.246.113:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://8.133.246.113:3306/deepseek', version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='null'} >
2025-08-01 21:37:18.808 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - register RM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0x77e75e3f, L:/192.168.86.8:63282 - R:/8.133.246.113:8091]
2025-08-01 21:37:18.808 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 21 ms, version:1.8.1-SNAPSHOT,role:RMROLE,channel:[id: 0x77e75e3f, L:/192.168.86.8:63282 - R:/8.133.246.113:8091]
2025-08-01 21:37:18.828 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: masterDataSource
2025-08-01 21:37:18.873 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-2} inited
2025-08-01 21:37:18.961 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:37:18.964 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: slaveDataSource
2025-08-01 21:37:18.981 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 21:37:19.006 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:37:19.007 [main] INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Auto proxy data source 'dynamicDataSource' by 'AT' mode.
2025-08-01 21:37:19.025 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 21:37:19.245 [main] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-01 21:37:19.446 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
2025-08-01 21:37:19.528 [main] INFO  o.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-08-01 21:37:19.726 [main] INFO  o.s.o.j.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-01 21:37:19.831 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-01 21:37:19.839 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-01 21:37:21.447 [main] INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-01 21:37:21.456 [main] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 21:37:22.609 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - SeataDisableConfiguration已加载，Seata在测试环境中被禁用
2025-08-01 21:37:22.609 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - 设置系统属性: seata.enabled=false, saga.enabled=false
2025-08-01 21:37:23.466 [main] INFO  com.bgpay.bgai.config.NacosRouteConfigListener - 初始化Nacos路由配置监听器
2025-08-01 21:37:23.471 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:37:23.471 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:37:23.473 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 5d604a7c-9033-4cb0-86a0-d6a9e7221347_config-0
2025-08-01 21:37:23.474 [main] INFO  com.alibaba.nacos.common.remote.client - [5d604a7c-9033-4cb0-86a0-d6a9e7221347_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d4bc636090
2025-08-01 21:37:23.474 [main] INFO  com.alibaba.nacos.common.remote.client - [5d604a7c-9033-4cb0-86a0-d6a9e7221347_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d4bc6364a0
2025-08-01 21:37:23.474 [main] INFO  com.alibaba.nacos.common.remote.client - [5d604a7c-9033-4cb0-86a0-d6a9e7221347_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:37:23.474 [main] INFO  com.alibaba.nacos.common.remote.client - [5d604a7c-9033-4cb0-86a0-d6a9e7221347_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:37:23.475 [main] INFO  com.alibaba.nacos.common.remote.client - [5d604a7c-9033-4cb0-86a0-d6a9e7221347_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:37:23.476 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:37:23.628 [main] INFO  com.alibaba.nacos.common.remote.client - [5d604a7c-9033-4cb0-86a0-d6a9e7221347_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754055443566_139.227.195.146_3278
2025-08-01 21:37:23.628 [main] INFO  com.alibaba.nacos.common.remote.client - [5d604a7c-9033-4cb0-86a0-d6a9e7221347_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:37:23.628 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [5d604a7c-9033-4cb0-86a0-d6a9e7221347_config-0] Notify connected event to listeners.
2025-08-01 21:37:23.628 [main] INFO  com.alibaba.nacos.common.remote.client - [5d604a7c-9033-4cb0-86a0-d6a9e7221347_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001d4bc79be68
2025-08-01 21:37:23.628 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [5d604a7c-9033-4cb0-86a0-d6a9e7221347_config-0] Connected,notify listen context...
2025-08-01 21:37:23.642 [main] WARN  com.bgpay.bgai.config.NacosRouteConfigListener - Nacos中未找到路由配置数据
2025-08-01 21:37:23.643 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:37:23.643 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:37:23.657 [main] INFO  c.bgpay.bgai.config.NacosRouteDefinitionRepository - 初始化Nacos路由定义存储库
2025-08-01 21:37:23.659 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:37:23.659 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:37:23.660 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 1b6a6156-df9d-41fd-9ef9-5b00117d2de2_config-0
2025-08-01 21:37:23.660 [main] INFO  com.alibaba.nacos.common.remote.client - [1b6a6156-df9d-41fd-9ef9-5b00117d2de2_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d4bc636090
2025-08-01 21:37:23.660 [main] INFO  com.alibaba.nacos.common.remote.client - [1b6a6156-df9d-41fd-9ef9-5b00117d2de2_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001d4bc6364a0
2025-08-01 21:37:23.660 [main] INFO  com.alibaba.nacos.common.remote.client - [1b6a6156-df9d-41fd-9ef9-5b00117d2de2_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:37:23.660 [main] INFO  com.alibaba.nacos.common.remote.client - [1b6a6156-df9d-41fd-9ef9-5b00117d2de2_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:37:23.661 [main] INFO  com.alibaba.nacos.common.remote.client - [1b6a6156-df9d-41fd-9ef9-5b00117d2de2_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:37:23.661 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:37:23.809 [main] INFO  com.alibaba.nacos.common.remote.client - [1b6a6156-df9d-41fd-9ef9-5b00117d2de2_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754055443752_139.227.195.146_3279
2025-08-01 21:37:23.809 [main] INFO  com.alibaba.nacos.common.remote.client - [1b6a6156-df9d-41fd-9ef9-5b00117d2de2_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:37:23.809 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [1b6a6156-df9d-41fd-9ef9-5b00117d2de2_config-0] Notify connected event to listeners.
2025-08-01 21:37:23.809 [main] INFO  com.alibaba.nacos.common.remote.client - [1b6a6156-df9d-41fd-9ef9-5b00117d2de2_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001d4bc79be68
2025-08-01 21:37:23.809 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [1b6a6156-df9d-41fd-9ef9-5b00117d2de2_config-0] Connected,notify listen context...
2025-08-01 21:37:23.823 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 21:37:23.823 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:37:23.823 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:37:24.038 [main] INFO  com.bgpay.bgai.config.RestTemplateConfig - Creating RestTemplate bean using SimpleClientHttpRequestFactory
2025-08-01 21:37:24.079 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-08-01 21:37:24.083 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-08-01 21:37:24.100 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 从WebServerApplicationContext获取实际端口: 8080
2025-08-01 21:37:24.100 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 初始化SSO配置: clientId=bgai-client-id, 使用端口=8080
2025-08-01 21:37:24.101 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 根据实际端口生成redirectUri: http://localhost:8080/api/auth/callback
2025-08-01 21:37:24.101 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - SSO URL配置已更新: redirectUri=http://localhost:8080/api/auth/callback, 系统实际运行端口=8080
2025-08-01 21:37:24.521 [main] ERROR com.bgpay.bgai.cache.RedisRetryAspect - Redis操作在多次重试后失败 - 类: RedisTemplate, 方法: keys, 异常: Redis操作失败
java.lang.RuntimeException: Redis操作失败
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$0(RedisRetryAspect.java:53)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at com.bgpay.bgai.cache.RedisRetryAspect.retryAroundRedisOperations(RedisRetryAspect.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$1.keys(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:716)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$0.keys(<generated>)
	at com.bgpay.bgai.service.impl.UserServiceImpl.cleanupOldRedisData(UserServiceImpl.java:179)
	at com.bgpay.bgai.service.impl.UserServiceImpl.init(UserServiceImpl.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:422)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.NullPointerException: Cannot invoke "org.springframework.data.redis.connection.RedisConnection.isPipelined()" because "connToUse" is null
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:390)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:363)
	at org.springframework.data.redis.core.RedisTemplate.doWithKeys(RedisTemplate.java:775)
	at org.springframework.data.redis.core.RedisTemplate.keys(RedisTemplate.java:628)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$0(RedisRetryAspect.java:46)
	... 98 common frames omitted
2025-08-01 21:37:24.525 [main] ERROR com.bgpay.bgai.service.impl.UserServiceImpl - 清理旧的Redis数据时发生错误
java.lang.RuntimeException: Redis操作失败
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$0(RedisRetryAspect.java:53)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at com.bgpay.bgai.cache.RedisRetryAspect.retryAroundRedisOperations(RedisRetryAspect.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$1.keys(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:716)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$0.keys(<generated>)
	at com.bgpay.bgai.service.impl.UserServiceImpl.cleanupOldRedisData(UserServiceImpl.java:179)
	at com.bgpay.bgai.service.impl.UserServiceImpl.init(UserServiceImpl.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:422)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.NullPointerException: Cannot invoke "org.springframework.data.redis.connection.RedisConnection.isPipelined()" because "connToUse" is null
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:390)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:363)
	at org.springframework.data.redis.core.RedisTemplate.doWithKeys(RedisTemplate.java:775)
	at org.springframework.data.redis.core.RedisTemplate.keys(RedisTemplate.java:628)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$0(RedisRetryAspect.java:46)
	... 98 common frames omitted
2025-08-01 21:37:24.779 [main] WARN  o.s.b.w.r.c.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
2025-08-01 21:37:24.779 [main] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 21:37:24.785 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0x6056b4ed, L:/192.168.86.8:63275 ! R:/8.133.246.113:8091]
2025-08-01 21:37:24.786 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0x6056b4ed, L:/192.168.86.8:63275 ! R:/8.133.246.113:8091]
2025-08-01 21:37:24.786 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0x6056b4ed, L:/192.168.86.8:63275 ! R:/8.133.246.113:8091]
2025-08-01 21:37:24.786 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0x6056b4ed, L:/192.168.86.8:63275 ! R:/8.133.246.113:8091]
2025-08-01 21:37:24.787 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x6056b4ed, L:/192.168.86.8:63275 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:37:24.787 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x6056b4ed, L:/192.168.86.8:63275 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:37:24.789 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0x77e75e3f, L:/192.168.86.8:63282 ! R:/8.133.246.113:8091]
2025-08-01 21:37:24.790 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0x77e75e3f, L:/192.168.86.8:63282 ! R:/8.133.246.113:8091]
2025-08-01 21:37:24.791 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-08-01 21:37:24.792 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0x77e75e3f, L:/192.168.86.8:63282 ! R:/8.133.246.113:8091]
2025-08-01 21:37:24.792 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0x77e75e3f, L:/192.168.86.8:63282 ! R:/8.133.246.113:8091]
2025-08-01 21:37:24.792 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x77e75e3f, L:/192.168.86.8:63282 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:37:24.792 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x77e75e3f, L:/192.168.86.8:63282 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:37:24.819 [main] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-08-01 21:37:24.822 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 58 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 72 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 73 common frames omitted
2025-08-01 21:37:24.823 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 33 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 58 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 72 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 73 common frames omitted
2025-08-01 21:37:24.842 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 初始化测试类: SampleWebFluxControllerTest
2025-08-01 21:37:24.844 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid a1d5f31e-0d99-455b-8dee-6d960d51f4b9 not found
2025-08-01 21:37:24.844 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 初始化WebFlux测试: SampleWebFluxControllerTest
2025-08-01 21:37:24.847 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.865 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testCreateMessage, testId: 9adb0a45-682c-459d-a9f3-087b28baa5bb
2025-08-01 21:37:24.866 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 7824b411-0d7d-4ed7-bd1e-446f347f7aba not found
2025-08-01 21:37:24.867 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 7824b411-0d7d-4ed7-bd1e-446f347f7aba not found
2025-08-01 21:37:24.877 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testCreateMessage, testId: 9adb0a45-682c-459d-a9f3-087b28baa5bb
2025-08-01 21:37:24.880 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.881 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.884 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.887 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.896 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.908 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testDeleteMessage, testId: d44140de-af16-4534-ab35-d3f122527658
2025-08-01 21:37:24.909 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 090acc4b-87e1-4d59-8893-568bfc8e162e not found
2025-08-01 21:37:24.909 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 090acc4b-87e1-4d59-8893-568bfc8e162e not found
2025-08-01 21:37:24.922 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testDeleteMessage, testId: d44140de-af16-4534-ab35-d3f122527658
2025-08-01 21:37:24.930 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.931 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.931 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.932 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.940 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.948 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testGetMessageById, testId: 823aa998-2778-41b8-8924-a13eef4749f3
2025-08-01 21:37:24.949 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 751ad647-aa34-4ae9-99e1-3205a34bd617 not found
2025-08-01 21:37:24.949 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 751ad647-aa34-4ae9-99e1-3205a34bd617 not found
2025-08-01 21:37:24.971 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testGetMessageById, testId: 823aa998-2778-41b8-8924-a13eef4749f3
2025-08-01 21:37:24.979 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.980 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.980 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:24.980 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.000 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.011 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testGetMessages, testId: 714a17e6-b86c-40f0-a0be-c66eef0f57be
2025-08-01 21:37:25.011 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 2ca5fcff-dc07-48de-ae7e-acdfb40fafff not found
2025-08-01 21:37:25.011 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 2ca5fcff-dc07-48de-ae7e-acdfb40fafff not found
2025-08-01 21:37:25.028 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testGetMessages, testId: 714a17e6-b86c-40f0-a0be-c66eef0f57be
2025-08-01 21:37:25.038 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.039 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.042 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.046 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.067 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.096 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testMessageStream, testId: 34bd3039-87be-4d02-9ae0-8aef1cbb6929
2025-08-01 21:37:25.096 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 61f7b3fe-3d01-4402-baac-bfaa55a26ae7 not found
2025-08-01 21:37:25.096 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 61f7b3fe-3d01-4402-baac-bfaa55a26ae7 not found
2025-08-01 21:37:25.126 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testMessageStream, testId: 34bd3039-87be-4d02-9ae0-8aef1cbb6929
2025-08-01 21:37:25.133 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.134 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.135 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.135 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.158 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.180 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testUpdateMessage, testId: 576a8672-36ba-42bc-a490-26eeaab529e2
2025-08-01 21:37:25.180 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid cdf1d3d3-09a0-4167-bf51-2cf56ad7af3c not found
2025-08-01 21:37:25.180 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid cdf1d3d3-09a0-4167-bf51-2cf56ad7af3c not found
2025-08-01 21:37:25.206 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testUpdateMessage, testId: 576a8672-36ba-42bc-a490-26eeaab529e2
2025-08-01 21:37:25.210 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.213 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.215 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:37:25.216 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@6ee07d7f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@36bc2ec5 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@379c4c02 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a5fab78, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@36a1fd20, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2ca132ad, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@1fba3fd6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6fefc5ea, org.springframework.boot.test.context.SpringBootTestAnnotation@75b56ce3], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 21:44:32.121 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-08-01 21:44:32.122 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-08-01 21:44:34.103 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:44:34.105 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2025-08-01 21:44:34.477 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 369 ms. Found 1 Elasticsearch repository interface.
2025-08-01 21:44:34.486 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:44:34.487 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2025-08-01 21:44:34.494 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2025-08-01 21:44:34.504 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:44:34.505 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-01 21:44:34.516 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.bgpay.bgai.repository.es.ChatRecordRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-08-01 21:44:34.516 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 JPA repository interfaces.
2025-08-01 21:44:34.530 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:44:34.532 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-08-01 21:44:34.547 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.bgpay.bgai.repository.es.ChatRecordRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-01 21:44:34.547 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-08-01 21:44:35.283 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:35.284 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:35.284 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:35.341 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:35.348 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:35.352 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:35.352 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda/0x000001ce4f885e10] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:35.353 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:35.360 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:35.364 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:35.371 [main] INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration - Automatically configure Seata
2025-08-01 21:44:35.451 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 21:44:35.463 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 21:44:35.470 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Initializing Global Transaction Clients ... 
2025-08-01 21:44:35.605 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 21:44:35.606 [main] INFO  io.seata.discovery.registry.RegistryFactory - use registry center type: file
2025-08-01 21:44:35.618 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 21:44:35.623 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:TMROLE,address:8.133.246.113:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='ak=
digest=default_tx_group,192.168.86.8,1754055875621
timestamp=1754055875621
authVersion=V4
vgroup=default_tx_group
ip=192.168.86.8
'} >
2025-08-01 21:44:35.796 [main] INFO  io.seata.core.rpc.netty.TmNettyRemotingClient - register TM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0xa051d14f, L:/192.168.86.8:65516 - R:/8.133.246.113:8091]
2025-08-01 21:44:35.802 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 82 ms, version:1.8.1-SNAPSHOT,role:TMROLE,channel:[id: 0xa051d14f, L:/192.168.86.8:65516 - R:/8.133.246.113:8091]
2025-08-01 21:44:35.803 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Transaction Manager Client is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:44:35.818 [main] INFO  io.seata.rm.datasource.AsyncWorker - Async Commit Buffer Limit: 10000
2025-08-01 21:44:35.819 [main] INFO  io.seata.rm.datasource.xa.ResourceManagerXA - ResourceManagerXA init ...
2025-08-01 21:44:35.825 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 21:44:35.826 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Resource Manager is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:44:35.826 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Global Transaction Clients are initialized. 
2025-08-01 21:44:36.015 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:36.334 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:36.351 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:36.473 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'messageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:36.540 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:36.555 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:36.560 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'listenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:36.605 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$DeferringLoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$DeferringLoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 21:44:36.610 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'deferringLoadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.DeferringLoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:36.619 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 21:44:36.623 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:36.636 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:44:36.997 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8688 (http)
2025-08-01 21:44:37.011 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - The ["http-nio-8688"] connector has been configured to support HTTP upgrade to [h2c]
2025-08-01 21:44:37.011 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8688"]
2025-08-01 21:44:37.013 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-08-01 21:44:37.014 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.20]
2025-08-01 21:44:37.248 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-08-01 21:44:37.588 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 21:44:37.588 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - RM will register :jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:44:37.588 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:RMROLE,address:8.133.246.113:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://8.133.246.113:3306/deepseek', version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='null'} >
2025-08-01 21:44:37.609 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - register RM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0x4b042094, L:/192.168.86.8:65532 - R:/8.133.246.113:8091]
2025-08-01 21:44:37.609 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 11 ms, version:1.8.1-SNAPSHOT,role:RMROLE,channel:[id: 0x4b042094, L:/192.168.86.8:65532 - R:/8.133.246.113:8091]
2025-08-01 21:44:37.631 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: masterDataSource
2025-08-01 21:44:37.675 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-2} inited
2025-08-01 21:44:37.778 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:44:37.783 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: slaveDataSource
2025-08-01 21:44:37.800 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 21:44:37.814 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:44:37.815 [main] INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Auto proxy data source 'dynamicDataSource' by 'AT' mode.
2025-08-01 21:44:37.824 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 21:44:37.986 [main] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-01 21:44:38.101 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
2025-08-01 21:44:38.165 [main] INFO  o.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-08-01 21:44:38.554 [main] INFO  o.s.o.j.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-01 21:44:38.639 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-01 21:44:38.640 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-01 21:44:39.045 [main] INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-01 21:44:39.052 [main] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 21:44:39.563 [main] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 开始刷新文件类型缓存
2025-08-01 21:44:39.675 [main] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,extensions,magic_numbers,is_active FROM mime_type_config WHERE (is_active = ?)
2025-08-01 21:44:39.689 [main] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:44:39.730 [main] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - <==      Total: 52
2025-08-01 21:44:39.736 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE (is_allowed = ?)
2025-08-01 21:44:39.736 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:44:39.747 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:44:39.748 [main] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 文件类型缓存刷新完成，共加载 52 个MIME类型配置和 11 个允许的文件类型
2025-08-01 21:44:39.788 [main] INFO  com.bgpay.bgai.cache.CacheWarmer - Starting to warm up caches...
2025-08-01 21:44:39.805 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,description,is_allowed FROM allowed_file_type
2025-08-01 21:44:39.806 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: 
2025-08-01 21:44:39.817 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:44:39.817 [main] INFO  com.bgpay.bgai.cache.CacheWarmer - FileTypes cache warmed up successfully
2025-08-01 21:44:39.817 [main] INFO  com.bgpay.bgai.cache.CacheWarmer - Cache warming completed
2025-08-01 21:44:39.956 [main] INFO  c.bgpay.bgai.config.NacosRouteDefinitionRepository - 初始化Nacos路由定义存储库
2025-08-01 21:44:39.957 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:44:39.957 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:44:39.958 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of d589a933-0ce1-49b4-b0f3-9079ead8064b_config-0
2025-08-01 21:44:39.958 [main] INFO  com.alibaba.nacos.common.remote.client - [d589a933-0ce1-49b4-b0f3-9079ead8064b_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ce4f487670
2025-08-01 21:44:39.958 [main] INFO  com.alibaba.nacos.common.remote.client - [d589a933-0ce1-49b4-b0f3-9079ead8064b_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ce4f487a80
2025-08-01 21:44:39.958 [main] INFO  com.alibaba.nacos.common.remote.client - [d589a933-0ce1-49b4-b0f3-9079ead8064b_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:44:39.958 [main] INFO  com.alibaba.nacos.common.remote.client - [d589a933-0ce1-49b4-b0f3-9079ead8064b_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:44:39.959 [main] INFO  com.alibaba.nacos.common.remote.client - [d589a933-0ce1-49b4-b0f3-9079ead8064b_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:44:39.959 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:44:40.092 [main] INFO  com.alibaba.nacos.common.remote.client - [d589a933-0ce1-49b4-b0f3-9079ead8064b_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754055880032_139.227.195.146_3428
2025-08-01 21:44:40.092 [main] INFO  com.alibaba.nacos.common.remote.client - [d589a933-0ce1-49b4-b0f3-9079ead8064b_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:44:40.092 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [d589a933-0ce1-49b4-b0f3-9079ead8064b_config-0] Notify connected event to listeners.
2025-08-01 21:44:40.092 [main] INFO  com.alibaba.nacos.common.remote.client - [d589a933-0ce1-49b4-b0f3-9079ead8064b_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001ce4f5c6b70
2025-08-01 21:44:40.092 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [d589a933-0ce1-49b4-b0f3-9079ead8064b_config-0] Connected,notify listen context...
2025-08-01 21:44:40.105 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 21:44:40.107 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-08-01 21:44:40.108 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:44:40.122 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:44:40.128 [main] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 初始化动态路由服务
2025-08-01 21:44:40.130 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:44:40.130 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:44:40.131 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of a6c66bf2-4054-4b85-a8ea-0d2aab2a8dec_config-0
2025-08-01 21:44:40.131 [main] INFO  com.alibaba.nacos.common.remote.client - [a6c66bf2-4054-4b85-a8ea-0d2aab2a8dec_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ce4f487670
2025-08-01 21:44:40.132 [main] INFO  com.alibaba.nacos.common.remote.client - [a6c66bf2-4054-4b85-a8ea-0d2aab2a8dec_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ce4f487a80
2025-08-01 21:44:40.132 [main] INFO  com.alibaba.nacos.common.remote.client - [a6c66bf2-4054-4b85-a8ea-0d2aab2a8dec_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:44:40.132 [main] INFO  com.alibaba.nacos.common.remote.client - [a6c66bf2-4054-4b85-a8ea-0d2aab2a8dec_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:44:40.132 [main] INFO  com.alibaba.nacos.common.remote.client - [a6c66bf2-4054-4b85-a8ea-0d2aab2a8dec_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:44:40.132 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:44:40.259 [main] INFO  com.alibaba.nacos.common.remote.client - [a6c66bf2-4054-4b85-a8ea-0d2aab2a8dec_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754055880203_139.227.195.146_3433
2025-08-01 21:44:40.259 [main] INFO  com.alibaba.nacos.common.remote.client - [a6c66bf2-4054-4b85-a8ea-0d2aab2a8dec_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:44:40.259 [main] INFO  com.alibaba.nacos.common.remote.client - [a6c66bf2-4054-4b85-a8ea-0d2aab2a8dec_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001ce4f5c6b70
2025-08-01 21:44:40.259 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [a6c66bf2-4054-4b85-a8ea-0d2aab2a8dec_config-0] Notify connected event to listeners.
2025-08-01 21:44:40.259 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [a6c66bf2-4054-4b85-a8ea-0d2aab2a8dec_config-0] Connected,notify listen context...
2025-08-01 21:44:40.305 [main] WARN  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - Nacos中没有找到路由配置，使用默认配置
2025-08-01 21:44:40.305 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:44:40.305 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:44:40.306 [main] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 注册Nacos配置监听器成功
2025-08-01 21:44:40.315 [main] INFO  com.bgpay.bgai.config.NacosRouteConfigListener - 初始化Nacos路由配置监听器
2025-08-01 21:44:40.317 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:44:40.317 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:44:40.318 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of a29525ba-e82f-4c14-9864-01f34e8df5ba_config-0
2025-08-01 21:44:40.318 [main] INFO  com.alibaba.nacos.common.remote.client - [a29525ba-e82f-4c14-9864-01f34e8df5ba_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ce4f487670
2025-08-01 21:44:40.318 [main] INFO  com.alibaba.nacos.common.remote.client - [a29525ba-e82f-4c14-9864-01f34e8df5ba_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ce4f487a80
2025-08-01 21:44:40.318 [main] INFO  com.alibaba.nacos.common.remote.client - [a29525ba-e82f-4c14-9864-01f34e8df5ba_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:44:40.318 [main] INFO  com.alibaba.nacos.common.remote.client - [a29525ba-e82f-4c14-9864-01f34e8df5ba_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:44:40.318 [main] INFO  com.alibaba.nacos.common.remote.client - [a29525ba-e82f-4c14-9864-01f34e8df5ba_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:44:40.318 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:44:40.451 [main] INFO  com.alibaba.nacos.common.remote.client - [a29525ba-e82f-4c14-9864-01f34e8df5ba_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754055880389_139.227.195.146_3434
2025-08-01 21:44:40.451 [main] INFO  com.alibaba.nacos.common.remote.client - [a29525ba-e82f-4c14-9864-01f34e8df5ba_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:44:40.451 [main] INFO  com.alibaba.nacos.common.remote.client - [a29525ba-e82f-4c14-9864-01f34e8df5ba_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001ce4f5c6b70
2025-08-01 21:44:40.451 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [a29525ba-e82f-4c14-9864-01f34e8df5ba_config-0] Notify connected event to listeners.
2025-08-01 21:44:40.451 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [a29525ba-e82f-4c14-9864-01f34e8df5ba_config-0] Connected,notify listen context...
2025-08-01 21:44:40.504 [main] WARN  com.bgpay.bgai.config.NacosRouteConfigListener - Nacos中未找到路由配置数据
2025-08-01 21:44:40.504 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:44:40.504 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:44:40.787 [main] INFO  com.bgpay.bgai.config.RestTemplateConfig - Creating RestTemplate bean using SimpleClientHttpRequestFactory
2025-08-01 21:44:40.820 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-08-01 21:44:40.821 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-08-01 21:44:40.829 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 从WebServerApplicationContext获取实际端口: 8080
2025-08-01 21:44:40.829 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 初始化SSO配置: clientId=bgai-client-id, 使用端口=8080
2025-08-01 21:44:40.829 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - SSO URL配置已更新: redirectUri=http://localhost:8080/api/auth/callback, 系统实际运行端口=8080
2025-08-01 21:44:41.591 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 已清理 1 个旧的token缓存
2025-08-01 21:44:41.599 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 已清理 1 个旧的用户信息缓存
2025-08-01 21:44:41.693 [main] INFO  com.bgpay.bgai.controller.AuthController - 初始化认证控制器: clientId=bgai-client-id, 配置的端口=8688
2025-08-01 21:44:41.693 [main] INFO  com.bgpay.bgai.controller.AuthController - 更新认证控制器redirectUri端口: http://localhost:8080/api/auth/callback → http://localhost:8688/api/auth/callback
2025-08-01 21:44:41.693 [main] INFO  com.bgpay.bgai.controller.AuthController - 认证控制器URL配置已更新: redirectUri=http://localhost:8688/api/auth/callback, 系统实际运行端口=8688
2025-08-01 21:44:43.069 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-08-01 21:44:43.209 [redisson-netty-5-6] INFO  o.r.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-08-01 21:44:43.248 [redisson-netty-5-11] INFO  org.redisson.connection.pool.MasterConnectionPool - 4 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-08-01 21:44:43.770 [main] INFO  com.bgpay.bgai.service.mq.RocketMQProducerService - Initializing RocketMQProducerService with producer group: billing-producer-group, nameServer: 8.133.246.113:9876
2025-08-01 21:44:43.777 [main] INFO  com.bgpay.bgai.service.mq.RocketMQProducerService - RocketMQ producer started successfully
2025-08-01 21:44:44.158 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Bean [com.bgpay.bgai.service.deepseek.DeepSeekServiceImp$$SpringCGLIB$$0] with name [deepSeekService] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2025-08-01 21:44:44.672 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#accesskey'.
2025-08-01 21:44:44.673 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#secretkey'.
2025-08-01 21:44:44.686 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 加载到2个Saga状态机定义文件
2025-08-01 21:44:44.920 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 开始解析状态机定义: bgai-saga-transaction
2025-08-01 21:44:44.921 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机 [bgai-saga-transaction] 原始版本: 0.0.5, 动态生成的新版本: 250801.214444.70b6
2025-08-01 21:44:44.921 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机定义解析成功: bgai-saga-transaction, 已更新版本号: 250801.214444.70b6
2025-08-01 21:44:44.921 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 成功加载状态机定义: /E:/project/bgai/target/classes/statelang/bgai-saga-transaction.json
2025-08-01 21:44:44.927 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 开始解析状态机定义: ChatCompletionSaga
2025-08-01 21:44:44.927 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机 [ChatCompletionSaga] 原始版本: 0.0.5, 动态生成的新版本: 250801.214444.a44d
2025-08-01 21:44:44.927 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机定义解析成功: ChatCompletionSaga, 已更新版本号: 250801.214444.a44d
2025-08-01 21:44:44.927 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 成功加载状态机定义: /E:/project/bgai/target/classes/statelang/chat_completion_saga.json
2025-08-01 21:44:44.928 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已设置saga.state-machine.auto-register=false，防止状态机重复注册
2025-08-01 21:44:45.969 [main] INFO  c.b.b.controller.ServiceDiscoveryExampleController - ServiceDiscoveryExampleController initialized with: serviceDiscoveryUtils=available, loadBalancedWebClient=available, loadBalancedRestTemplate=available, restTemplate=available
2025-08-01 21:44:46.141 [main] INFO  com.bgpay.bgai.service.mq.MQConsumerService - MQ consumer startup successful [group=billing-consumer-group, topic=BILLING_TOPIC, tag=USER_BILLING]
2025-08-01 21:44:46.141 [main] INFO  c.bgpay.bgai.service.mq.RocketMQBillingServiceImpl - Billing consumer initialized successfully. Ready to process unconsumed messages.
2025-08-01 21:44:47.946 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Seata事务监听器初始化
2025-08-01 21:44:47.946 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - 已设置seata.saga.state-machine.auto-register=false，防止状态机重复注册
2025-08-01 21:44:48.088 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Bean [com.bgpay.bgai.service.mq.BillingTransactionListenerImpl$$SpringCGLIB$$0] with name [billingTransactionListenerImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2025-08-01 21:44:48.285 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (billing-producer-group) init on namesrv 8.133.246.113:9876
2025-08-01 21:44:48.397 [main] DEBUG com.bgpay.bgai.config.AsyncConfig$1 - Initializing ExecutorService 'blockingExecutor'
2025-08-01 21:44:48.471 [main] INFO  com.bgpay.bgai.config.GatewayRouteConfig - 初始化默认路由配置
2025-08-01 21:44:48.668 [main] INFO  c.b.bgai.config.NacosConfig$NacosWarningHandler - Nacos警告处理器已启用，将忽略配置中心连接警告
2025-08-01 21:44:48.790 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - Seata Saga配置加载
2025-08-01 21:44:48.790 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - 状态机自动注册设置: 禁用
2025-08-01 21:44:48.790 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - 状态机自动注册已禁用，这将防止重复注册错误
2025-08-01 21:44:48.800 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#accesskey'.
2025-08-01 21:44:48.801 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#secretkey'.
2025-08-01 21:44:48.823 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Initializing Global Transaction Clients ... 
2025-08-01 21:44:48.823 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Transaction Manager Client is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:44:48.823 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Resource Manager is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:44:48.823 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:bgai#default_tx_group
2025-08-01 21:44:48.824 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Global Transaction Clients are initialized. 
2025-08-01 21:44:48.833 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 21:44:48.866 [main] INFO  i.s.s.engine.repo.impl.StateMachineRepositoryImpl - StateMachine[bgai-saga-transaction] is already exist a same version
2025-08-01 21:44:48.879 [main] INFO  i.s.s.engine.repo.impl.StateMachineRepositoryImpl - StateMachine[ChatCompletionSaga] is already exist a same version
2025-08-01 21:44:52.198 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2025-08-01 21:44:52.198 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2025-08-01 21:44:52.198 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2025-08-01 21:44:52.198 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2025-08-01 21:44:52.198 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2025-08-01 21:44:52.198 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2025-08-01 21:44:52.198 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2025-08-01 21:44:52.198 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2025-08-01 21:44:52.199 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2025-08-01 21:44:52.199 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2025-08-01 21:44:52.199 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2025-08-01 21:44:52.199 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-08-01 21:44:52.199 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2025-08-01 21:44:52.199 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-08-01 21:44:55.179 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-08-01 21:44:59.234 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8688"]
2025-08-01 21:44:59.239 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on ports 8080 (http), 8688 (http) with context path ''
2025-08-01 21:44:59.241 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 服务器已完全初始化，确认运行端口: 8080
2025-08-01 21:44:59.241 [main] INFO  com.bgpay.bgai.controller.AuthController - 服务器已初始化，实际运行端口: 8080
2025-08-01 21:44:59.242 [main] INFO  com.bgpay.bgai.controller.AuthController - 认证控制器URL配置已更新: redirectUri=http://localhost:8080/api/auth/callback, 系统实际运行端口=8080
2025-08-01 21:44:59.252 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-08-01 21:44:59.252 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-08-01 21:44:59.253 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-08-01 21:44:59.301 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:44:59.302 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:44:59.306 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 786d6796-1700-4401-a48b-559525f74aea
2025-08-01 21:44:59.308 [main] INFO  com.alibaba.nacos.common.remote.client - [786d6796-1700-4401-a48b-559525f74aea] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-08-01 21:44:59.308 [main] INFO  com.alibaba.nacos.common.remote.client - [786d6796-1700-4401-a48b-559525f74aea] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-08-01 21:44:59.309 [main] INFO  com.alibaba.nacos.common.remote.client - [786d6796-1700-4401-a48b-559525f74aea] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-08-01 21:44:59.309 [main] INFO  com.alibaba.nacos.common.remote.client - [786d6796-1700-4401-a48b-559525f74aea] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:44:59.309 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:44:59.448 [main] INFO  com.alibaba.nacos.common.remote.client - [786d6796-1700-4401-a48b-559525f74aea] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754055899385_139.227.195.146_3685
2025-08-01 21:44:59.448 [main] INFO  com.alibaba.nacos.common.remote.client - [786d6796-1700-4401-a48b-559525f74aea] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:44:59.449 [main] INFO  com.alibaba.nacos.common.remote.client - [786d6796-1700-4401-a48b-559525f74aea] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001ce4f5c6b70
2025-08-01 21:44:59.449 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [786d6796-1700-4401-a48b-559525f74aea] Notify connected event to listeners.
2025-08-01 21:44:59.449 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-08-01 21:44:59.452 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] d750d92e-152f-4055-a641-3bc9dda85a29 registering service bgai with instance Instance{instanceId='null', ip='192.168.86.8', port=8080, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=[2408:820c:7529:92b2:b585:8e1a:c1f3:5121], preserved.register.source=SPRING_CLOUD, preserved.heart.beat.interval=5000}}
2025-08-01 21:44:59.502 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP bgai 192.168.86.8:8080 register finished
2025-08-01 21:44:59.560 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 21:44:59.682 [main] INFO  c.a.c.n.discovery.NacosDiscoveryHeartBeatPublisher - Start nacos heartBeat task scheduler.
2025-08-01 21:44:59.722 [main] INFO  com.bgpay.bgai.config.NacosConfig - 应用启动完成，当前环境: dev
2025-08-01 21:44:59.722 [main] INFO  com.bgpay.bgai.config.NacosConfig - Nacos配置中心: 8.133.246.113:8848, 命名空间: d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:44:59.722 [main] INFO  com.bgpay.bgai.config.NacosConfig - 注意: 如果看到Nacos配置加载警告，但应用正常启动，说明应用正在使用本地配置文件
2025-08-01 21:44:59.724 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 32.805 seconds (process running for 35.77)
2025-08-01 21:44:59.731 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 开始刷新文件类型缓存
2025-08-01 21:44:59.733 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,extensions,magic_numbers,is_active FROM mime_type_config WHERE (is_active = ?)
2025-08-01 21:44:59.733 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:44:59.742 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - ==================== Saga状态机加载报告 ====================
2025-08-01 21:44:59.742 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - Saga状态机配置加载状态: 成功
2025-08-01 21:44:59.742 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已加载的状态机定义文件数量: 2
2025-08-01 21:44:59.742 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已加载的状态机定义文件:
2025-08-01 21:44:59.742 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig -  - /E:/project/bgai/target/classes/statelang/bgai-saga-transaction.json
2025-08-01 21:44:59.742 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig -  - /E:/project/bgai/target/classes/statelang/chat_completion_saga.json
2025-08-01 21:44:59.742 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - Saga解析器状态: CUSTOM_FASTJSON2
2025-08-01 21:44:59.742 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 状态机解析结果: 成功 2 个, 失败 0 个
2025-08-01 21:44:59.742 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 状态机自动注册已禁用(saga.state-machine.auto-register=false)，避免重复注册错误
2025-08-01 21:44:59.742 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - =============================================================
2025-08-01 21:44:59.743 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - 应用程序已就绪，Seata事务监听器激活
2025-08-01 21:44:59.743 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Seata配置信息:
2025-08-01 21:44:59.743 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - seata.saga.state-machine.auto-register: false
2025-08-01 21:44:59.743 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - seata.enabled: 未设置
2025-08-01 21:44:59.743 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - saga.enabled: 未设置
2025-08-01 21:44:59.746 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - <==      Total: 52
2025-08-01 21:44:59.747 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] common-dev.yaml+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:44:59.747 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=common-dev.yaml, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:44:59.747 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=common-dev.yaml, group=DEFAULT_GROUP
2025-08-01 21:44:59.748 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] bgtech-ai.yaml+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:44:59.748 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=bgtech-ai.yaml, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:44:59.748 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=bgtech-ai.yaml, group=DEFAULT_GROUP
2025-08-01 21:44:59.748 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE (is_allowed = ?)
2025-08-01 21:44:59.748 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:44:59.751 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] bgtech-ai-dev.yaml+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:44:59.751 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=bgtech-ai-dev.yaml, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:44:59.751 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=bgtech-ai-dev.yaml, group=DEFAULT_GROUP
2025-08-01 21:44:59.751 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] bgtech-ai+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:44:59.751 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=bgtech-ai, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:44:59.751 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=bgtech-ai, group=DEFAULT_GROUP
2025-08-01 21:44:59.752 [main] INFO  com.bgpay.bgai.BgaiApplication - Application started successfully
2025-08-01 21:44:59.755 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:44:59.755 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 文件类型缓存刷新完成，共加载 52 个MIME类型配置和 11 个允许的文件类型
2025-08-01 21:45:47.844 [http-nio-8688-exec-2] WARN  reactor.core.Exceptions - throwIfFatal detected a jvm fatal exception, which is thrown and logged below:
java.lang.NoClassDefFoundError: com/bgpay/bgai/utils/LogUtils
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 35 common frames omitted
2025-08-01 21:45:47.849 [http-nio-8688-exec-2] WARN  reactor.core.Exceptions - throwIfFatal detected a jvm fatal exception, which is thrown and logged below:
java.lang.NoClassDefFoundError: com/bgpay/bgai/utils/LogUtils
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 35 common frames omitted
2025-08-01 21:45:47.850 [http-nio-8688-exec-2] WARN  reactor.core.Exceptions - throwIfFatal detected a jvm fatal exception, which is thrown and logged below:
java.lang.NoClassDefFoundError: com/bgpay/bgai/utils/LogUtils
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 35 common frames omitted
2025-08-01 21:45:47.850 [http-nio-8688-exec-2] WARN  reactor.core.Exceptions - throwIfFatal detected a jvm fatal exception, which is thrown and logged below:
java.lang.NoClassDefFoundError: com/bgpay/bgai/utils/LogUtils
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 35 common frames omitted
2025-08-01 21:45:47.850 [http-nio-8688-exec-2] WARN  reactor.core.Exceptions - throwIfFatal detected a jvm fatal exception, which is thrown and logged below:
java.lang.NoClassDefFoundError: com/bgpay/bgai/utils/LogUtils
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 35 common frames omitted
2025-08-01 21:45:47.851 [http-nio-8688-exec-2] ERROR o.a.c.c.C.[.[localhost].[/].[httpHandlerServlet] - Servlet.service() for servlet [httpHandlerServlet] in context with path [] threw exception [Servlet execution threw an exception] with root cause
java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-08-01 21:46:10.845 [http-nio-8688-exec-5] WARN  reactor.core.Exceptions - throwIfFatal detected a jvm fatal exception, which is thrown and logged below:
java.lang.NoClassDefFoundError: com/bgpay/bgai/utils/LogUtils
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	... 35 common frames omitted
2025-08-01 21:46:10.846 [http-nio-8688-exec-5] WARN  reactor.core.Exceptions - throwIfFatal detected a jvm fatal exception, which is thrown and logged below:
java.lang.NoClassDefFoundError: com/bgpay/bgai/utils/LogUtils
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	... 35 common frames omitted
2025-08-01 21:46:10.846 [http-nio-8688-exec-5] WARN  reactor.core.Exceptions - throwIfFatal detected a jvm fatal exception, which is thrown and logged below:
java.lang.NoClassDefFoundError: com/bgpay/bgai/utils/LogUtils
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	... 35 common frames omitted
2025-08-01 21:46:10.846 [http-nio-8688-exec-5] WARN  reactor.core.Exceptions - throwIfFatal detected a jvm fatal exception, which is thrown and logged below:
java.lang.NoClassDefFoundError: com/bgpay/bgai/utils/LogUtils
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	... 35 common frames omitted
2025-08-01 21:46:10.846 [http-nio-8688-exec-5] WARN  reactor.core.Exceptions - throwIfFatal detected a jvm fatal exception, which is thrown and logged below:
java.lang.NoClassDefFoundError: com/bgpay/bgai/utils/LogUtils
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	... 35 common frames omitted
2025-08-01 21:46:10.846 [http-nio-8688-exec-5] ERROR o.a.c.c.C.[.[localhost].[/].[httpHandlerServlet] - Servlet.service() for servlet [httpHandlerServlet] in context with path [] threw exception [Servlet execution threw an exception] with root cause
java.lang.ClassNotFoundException: com.bgpay.bgai.utils.LogUtils
	at com.bgpay.bgai.filter.LogTraceWebFilter.filter(LogTraceWebFilter.java:25)
	at org.springframework.web.server.handler.DefaultWebFilterChain.invokeFilter(DefaultWebFilterChain.java:114)
	at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:108)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:45)
	at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:265)
	at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4568)
	at org.springframework.http.server.reactive.ServletHttpHandlerAdapter.service(ServletHttpHandlerAdapter.java:199)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-08-01 21:47:00.803 [SpringContextShutdownHook] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-08-01 21:47:00.812 [Thread-12] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-08-01 21:47:00.812 [Thread-12] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-08-01 21:47:00.857 [Thread-4] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-08-01 21:47:00.858 [Thread-4] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-08-01 21:47:00.887 [Thread-0] INFO  com.bgpay.bgai.BgaiApplication - 执行应用关闭钩子，正在关闭资源...
2025-08-01 21:47:06.071 [SpringContextShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-08-01 21:47:06.071 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] d750d92e-152f-4055-a641-3bc9dda85a29 deregistering service bgai with instance: Instance{instanceId='null', ip='192.168.86.8', port=8080, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-08-01 21:47:06.109 [SpringContextShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-08-01 21:47:06.113 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-08-01 21:47:06.113 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-08-01 21:47:06.118 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-08-01 21:47:06.118 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-08-01 21:47:06.118 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-08-01 21:47:06.118 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-08-01 21:47:06.118 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-08-01 21:47:06.118 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-08-01 21:47:06.118 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-08-01 21:47:06.118 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-08-01 21:47:06.118 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-08-01 21:47:06.118 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-08-01 21:47:06.118 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-08-01 21:47:06.118 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-08-01 21:47:06.118 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-08-01 21:47:06.118 [SpringContextShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-08-01 21:47:06.118 [SpringContextShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@7d2c61c2[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-08-01 21:47:06.119 [SpringContextShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1754055899385_139.227.195.146_3685
2025-08-01 21:47:06.137 [SpringContextShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7011f548[Running, pool size = 5, active threads = 1, queued tasks = 0, completed tasks = 61]
2025-08-01 21:47:06.137 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@1d473835[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 42]
2025-08-01 21:47:06.137 [SpringContextShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-08-01 21:47:06.138 [SpringContextShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-08-01 21:47:06.146 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-08-01 21:47:06.184 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0xa051d14f, L:/192.168.86.8:65516 ! R:/8.133.246.113:8091]
2025-08-01 21:47:06.184 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0xa051d14f, L:/192.168.86.8:65516 ! R:/8.133.246.113:8091]
2025-08-01 21:47:06.185 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0xa051d14f, L:/192.168.86.8:65516 ! R:/8.133.246.113:8091]
2025-08-01 21:47:06.185 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0xa051d14f, L:/192.168.86.8:65516 ! R:/8.133.246.113:8091]
2025-08-01 21:47:06.185 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xa051d14f, L:/192.168.86.8:65516 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:47:06.185 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xa051d14f, L:/192.168.86.8:65516 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:47:06.186 [nacos-grpc-client-executor-8.133.246.113-61] WARN  c.a.nacos.common.remote.client.grpc.GrpcClient - [1754055899385_139.227.195.146_3685]Ignore error event,isRunning:false,isAbandon=false
2025-08-01 21:47:06.186 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0x4b042094, L:/192.168.86.8:65532 ! R:/8.133.246.113:8091]
2025-08-01 21:47:06.186 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0x4b042094, L:/192.168.86.8:65532 ! R:/8.133.246.113:8091]
2025-08-01 21:47:06.186 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0x4b042094, L:/192.168.86.8:65532 ! R:/8.133.246.113:8091]
2025-08-01 21:47:06.186 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0x4b042094, L:/192.168.86.8:65532 ! R:/8.133.246.113:8091]
2025-08-01 21:47:06.186 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x4b042094, L:/192.168.86.8:65532 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:47:06.186 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x4b042094, L:/192.168.86.8:65532 ! R:/8.133.246.113:8091]) will closed
2025-08-01 21:47:06.194 [SpringContextShutdownHook] DEBUG com.bgpay.bgai.config.AsyncConfig$1 - Shutting down ExecutorService 'blockingExecutor'
2025-08-01 21:47:06.249 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:10911] result: true
2025-08-01 21:47:06.251 [SpringContextShutdownHook] INFO  com.bgpay.bgai.service.mq.RocketMQProducerService - RocketMQ producer shutdown
2025-08-01 21:47:06.275 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:10911] result: true
2025-08-01 21:47:06.275 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:9876] result: true
2025-08-01 21:47:06.323 [SpringContextShutdownHook] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 动态路由服务关闭，执行清理操作
2025-08-01 21:47:06.328 [SpringContextShutdownHook] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 21:47:22.831 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-08-01 21:47:22.832 [main] INFO  com.bgpay.bgai.BgaiApplication - The following 1 profile is active: "dev"
2025-08-01 21:47:25.117 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:47:25.120 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2025-08-01 21:47:25.600 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 475 ms. Found 1 Elasticsearch repository interface.
2025-08-01 21:47:25.610 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:47:25.612 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2025-08-01 21:47:25.622 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Reactive Elasticsearch repository interfaces.
2025-08-01 21:47:25.634 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:47:25.635 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-01 21:47:25.649 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.bgpay.bgai.repository.es.ChatRecordRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-08-01 21:47:25.649 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 JPA repository interfaces.
2025-08-01 21:47:25.663 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 21:47:25.664 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-08-01 21:47:25.679 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.bgpay.bgai.repository.es.ChatRecordRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-01 21:47:25.679 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-08-01 21:47:26.427 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:26.428 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:26.428 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:26.470 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:26.474 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:26.476 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:26.477 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda/0x0000019948884b88] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:26.478 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:26.484 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:26.487 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:26.490 [main] INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration - Automatically configure Seata
2025-08-01 21:47:26.541 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 21:47:26.552 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 21:47:26.556 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Initializing Global Transaction Clients ... 
2025-08-01 21:47:26.627 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 21:47:26.628 [main] INFO  io.seata.discovery.registry.RegistryFactory - use registry center type: file
2025-08-01 21:47:26.639 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 21:47:26.644 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:TMROLE,address:8.133.246.113:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='ak=
digest=default_tx_group,192.168.86.8,1754056046641
timestamp=1754056046641
authVersion=V4
vgroup=default_tx_group
ip=192.168.86.8
'} >
2025-08-01 21:47:26.781 [main] INFO  io.seata.core.rpc.netty.TmNettyRemotingClient - register TM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0x6a8d58bc, L:/192.168.86.8:50232 - R:/8.133.246.113:8091]
2025-08-01 21:47:26.787 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 61 ms, version:1.8.1-SNAPSHOT,role:TMROLE,channel:[id: 0x6a8d58bc, L:/192.168.86.8:50232 - R:/8.133.246.113:8091]
2025-08-01 21:47:26.788 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Transaction Manager Client is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:47:26.798 [main] INFO  io.seata.rm.datasource.AsyncWorker - Async Commit Buffer Limit: 10000
2025-08-01 21:47:26.799 [main] INFO  io.seata.rm.datasource.xa.ResourceManagerXA - ResourceManagerXA init ...
2025-08-01 21:47:26.804 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 21:47:26.804 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Resource Manager is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:47:26.804 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Global Transaction Clients are initialized. 
2025-08-01 21:47:26.972 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:27.260 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:27.283 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:27.429 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'messageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:27.510 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:27.524 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:27.529 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'listenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:27.575 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$DeferringLoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$DeferringLoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 21:47:27.582 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'deferringLoadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.DeferringLoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:27.590 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 21:47:27.596 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:27.608 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 21:47:28.014 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8688 (http)
2025-08-01 21:47:28.034 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - The ["http-nio-8688"] connector has been configured to support HTTP upgrade to [h2c]
2025-08-01 21:47:28.034 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8688"]
2025-08-01 21:47:28.036 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-08-01 21:47:28.036 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.20]
2025-08-01 21:47:28.308 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-08-01 21:47:28.583 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 21:47:28.584 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - RM will register :jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:47:28.584 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:RMROLE,address:8.133.246.113:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://8.133.246.113:3306/deepseek', version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='null'} >
2025-08-01 21:47:28.605 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - register RM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0x418a70fb, L:/192.168.86.8:50236 - R:/8.133.246.113:8091]
2025-08-01 21:47:28.606 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 11 ms, version:1.8.1-SNAPSHOT,role:RMROLE,channel:[id: 0x418a70fb, L:/192.168.86.8:50236 - R:/8.133.246.113:8091]
2025-08-01 21:47:28.618 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: masterDataSource
2025-08-01 21:47:28.649 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-2} inited
2025-08-01 21:47:28.724 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:47:28.727 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: slaveDataSource
2025-08-01 21:47:28.734 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 21:47:28.756 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 21:47:28.757 [main] INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Auto proxy data source 'dynamicDataSource' by 'AT' mode.
2025-08-01 21:47:28.766 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 21:47:28.896 [main] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-01 21:47:28.994 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
2025-08-01 21:47:29.044 [main] INFO  o.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-08-01 21:47:29.565 [main] INFO  o.s.o.j.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-01 21:47:29.650 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-01 21:47:29.652 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-01 21:47:30.192 [main] INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-01 21:47:30.200 [main] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 21:47:30.826 [main] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 开始刷新文件类型缓存
2025-08-01 21:47:30.923 [main] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,extensions,magic_numbers,is_active FROM mime_type_config WHERE (is_active = ?)
2025-08-01 21:47:30.936 [main] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:47:30.966 [main] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - <==      Total: 52
2025-08-01 21:47:30.969 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE (is_allowed = ?)
2025-08-01 21:47:30.969 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:47:30.978 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:47:30.978 [main] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 文件类型缓存刷新完成，共加载 52 个MIME类型配置和 11 个允许的文件类型
2025-08-01 21:47:31.008 [main] INFO  com.bgpay.bgai.cache.CacheWarmer - Starting to warm up caches...
2025-08-01 21:47:31.020 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,description,is_allowed FROM allowed_file_type
2025-08-01 21:47:31.020 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: 
2025-08-01 21:47:31.030 [main] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:47:31.030 [main] INFO  com.bgpay.bgai.cache.CacheWarmer - FileTypes cache warmed up successfully
2025-08-01 21:47:31.031 [main] INFO  com.bgpay.bgai.cache.CacheWarmer - Cache warming completed
2025-08-01 21:47:31.177 [main] INFO  c.bgpay.bgai.config.NacosRouteDefinitionRepository - 初始化Nacos路由定义存储库
2025-08-01 21:47:31.179 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:47:31.179 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:47:31.179 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 5dcff20d-d841-4dcb-918d-04c6c7c3332f_config-0
2025-08-01 21:47:31.180 [main] INFO  com.alibaba.nacos.common.remote.client - [5dcff20d-d841-4dcb-918d-04c6c7c3332f_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x00000199484869f8
2025-08-01 21:47:31.180 [main] INFO  com.alibaba.nacos.common.remote.client - [5dcff20d-d841-4dcb-918d-04c6c7c3332f_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000019948486e08
2025-08-01 21:47:31.180 [main] INFO  com.alibaba.nacos.common.remote.client - [5dcff20d-d841-4dcb-918d-04c6c7c3332f_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:47:31.180 [main] INFO  com.alibaba.nacos.common.remote.client - [5dcff20d-d841-4dcb-918d-04c6c7c3332f_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:47:31.180 [main] INFO  com.alibaba.nacos.common.remote.client - [5dcff20d-d841-4dcb-918d-04c6c7c3332f_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:47:31.181 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:47:31.311 [main] INFO  com.alibaba.nacos.common.remote.client - [5dcff20d-d841-4dcb-918d-04c6c7c3332f_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754056051252_139.227.195.146_3118
2025-08-01 21:47:31.311 [main] INFO  com.alibaba.nacos.common.remote.client - [5dcff20d-d841-4dcb-918d-04c6c7c3332f_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:47:31.311 [main] INFO  com.alibaba.nacos.common.remote.client - [5dcff20d-d841-4dcb-918d-04c6c7c3332f_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x00000199485c5a70
2025-08-01 21:47:31.311 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [5dcff20d-d841-4dcb-918d-04c6c7c3332f_config-0] Notify connected event to listeners.
2025-08-01 21:47:31.311 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [5dcff20d-d841-4dcb-918d-04c6c7c3332f_config-0] Connected,notify listen context...
2025-08-01 21:47:31.326 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 21:47:31.329 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-08-01 21:47:31.329 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:47:31.337 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:47:31.343 [main] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 初始化动态路由服务
2025-08-01 21:47:31.345 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:47:31.345 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:47:31.346 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 6f9e9a8c-4c46-4afa-9f0e-7b57a4dacec3_config-0
2025-08-01 21:47:31.346 [main] INFO  com.alibaba.nacos.common.remote.client - [6f9e9a8c-4c46-4afa-9f0e-7b57a4dacec3_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x00000199484869f8
2025-08-01 21:47:31.346 [main] INFO  com.alibaba.nacos.common.remote.client - [6f9e9a8c-4c46-4afa-9f0e-7b57a4dacec3_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000019948486e08
2025-08-01 21:47:31.346 [main] INFO  com.alibaba.nacos.common.remote.client - [6f9e9a8c-4c46-4afa-9f0e-7b57a4dacec3_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:47:31.346 [main] INFO  com.alibaba.nacos.common.remote.client - [6f9e9a8c-4c46-4afa-9f0e-7b57a4dacec3_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:47:31.346 [main] INFO  com.alibaba.nacos.common.remote.client - [6f9e9a8c-4c46-4afa-9f0e-7b57a4dacec3_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:47:31.347 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:47:31.474 [main] INFO  com.alibaba.nacos.common.remote.client - [6f9e9a8c-4c46-4afa-9f0e-7b57a4dacec3_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754056051416_139.227.195.146_3119
2025-08-01 21:47:31.474 [main] INFO  com.alibaba.nacos.common.remote.client - [6f9e9a8c-4c46-4afa-9f0e-7b57a4dacec3_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:47:31.474 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [6f9e9a8c-4c46-4afa-9f0e-7b57a4dacec3_config-0] Notify connected event to listeners.
2025-08-01 21:47:31.474 [main] INFO  com.alibaba.nacos.common.remote.client - [6f9e9a8c-4c46-4afa-9f0e-7b57a4dacec3_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x00000199485c5a70
2025-08-01 21:47:31.474 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [6f9e9a8c-4c46-4afa-9f0e-7b57a4dacec3_config-0] Connected,notify listen context...
2025-08-01 21:47:31.526 [main] WARN  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - Nacos中没有找到路由配置，使用默认配置
2025-08-01 21:47:31.526 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:47:31.526 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:47:31.526 [main] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 注册Nacos配置监听器成功
2025-08-01 21:47:31.535 [main] INFO  com.bgpay.bgai.config.NacosRouteConfigListener - 初始化Nacos路由配置监听器
2025-08-01 21:47:31.537 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:47:31.537 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:47:31.538 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of c9851f90-6ca8-46c8-8427-ccd4534e7a2f_config-0
2025-08-01 21:47:31.538 [main] INFO  com.alibaba.nacos.common.remote.client - [c9851f90-6ca8-46c8-8427-ccd4534e7a2f_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x00000199484869f8
2025-08-01 21:47:31.538 [main] INFO  com.alibaba.nacos.common.remote.client - [c9851f90-6ca8-46c8-8427-ccd4534e7a2f_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000019948486e08
2025-08-01 21:47:31.538 [main] INFO  com.alibaba.nacos.common.remote.client - [c9851f90-6ca8-46c8-8427-ccd4534e7a2f_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 21:47:31.538 [main] INFO  com.alibaba.nacos.common.remote.client - [c9851f90-6ca8-46c8-8427-ccd4534e7a2f_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 21:47:31.539 [main] INFO  com.alibaba.nacos.common.remote.client - [c9851f90-6ca8-46c8-8427-ccd4534e7a2f_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:47:31.539 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:47:31.677 [main] INFO  com.alibaba.nacos.common.remote.client - [c9851f90-6ca8-46c8-8427-ccd4534e7a2f_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754056051617_139.227.195.146_3120
2025-08-01 21:47:31.677 [main] INFO  com.alibaba.nacos.common.remote.client - [c9851f90-6ca8-46c8-8427-ccd4534e7a2f_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:47:31.677 [main] INFO  com.alibaba.nacos.common.remote.client - [c9851f90-6ca8-46c8-8427-ccd4534e7a2f_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x00000199485c5a70
2025-08-01 21:47:31.677 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [c9851f90-6ca8-46c8-8427-ccd4534e7a2f_config-0] Notify connected event to listeners.
2025-08-01 21:47:31.677 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [c9851f90-6ca8-46c8-8427-ccd4534e7a2f_config-0] Connected,notify listen context...
2025-08-01 21:47:31.728 [main] WARN  com.bgpay.bgai.config.NacosRouteConfigListener - Nacos中未找到路由配置数据
2025-08-01 21:47:31.729 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:47:31.729 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:47:32.079 [main] INFO  com.bgpay.bgai.config.RestTemplateConfig - Creating RestTemplate bean using SimpleClientHttpRequestFactory
2025-08-01 21:47:32.119 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-08-01 21:47:32.121 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-08-01 21:47:32.132 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 从WebServerApplicationContext获取实际端口: 8080
2025-08-01 21:47:32.132 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 初始化SSO配置: clientId=bgai-client-id, 使用端口=8080
2025-08-01 21:47:32.133 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - SSO URL配置已更新: redirectUri=http://localhost:8080/api/auth/callback, 系统实际运行端口=8080
2025-08-01 21:47:33.137 [main] INFO  com.bgpay.bgai.controller.AuthController - 初始化认证控制器: clientId=bgai-client-id, 配置的端口=8688
2025-08-01 21:47:33.137 [main] INFO  com.bgpay.bgai.controller.AuthController - 更新认证控制器redirectUri端口: http://localhost:8080/api/auth/callback → http://localhost:8688/api/auth/callback
2025-08-01 21:47:33.137 [main] INFO  com.bgpay.bgai.controller.AuthController - 认证控制器URL配置已更新: redirectUri=http://localhost:8688/api/auth/callback, 系统实际运行端口=8688
2025-08-01 21:47:34.501 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-08-01 21:47:34.695 [redisson-netty-5-7] INFO  o.r.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-08-01 21:47:34.741 [redisson-netty-5-11] INFO  org.redisson.connection.pool.MasterConnectionPool - 4 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-08-01 21:47:35.295 [main] INFO  com.bgpay.bgai.service.mq.RocketMQProducerService - Initializing RocketMQProducerService with producer group: billing-producer-group, nameServer: 8.133.246.113:9876
2025-08-01 21:47:35.301 [main] INFO  com.bgpay.bgai.service.mq.RocketMQProducerService - RocketMQ producer started successfully
2025-08-01 21:47:35.603 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Bean [com.bgpay.bgai.service.deepseek.DeepSeekServiceImp$$SpringCGLIB$$0] with name [deepSeekService] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2025-08-01 21:47:35.989 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#accesskey'.
2025-08-01 21:47:35.990 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#secretkey'.
2025-08-01 21:47:36.004 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 加载到2个Saga状态机定义文件
2025-08-01 21:47:36.296 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 开始解析状态机定义: bgai-saga-transaction
2025-08-01 21:47:36.296 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机 [bgai-saga-transaction] 原始版本: 0.0.5, 动态生成的新版本: 250801.214736.bc25
2025-08-01 21:47:36.297 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机定义解析成功: bgai-saga-transaction, 已更新版本号: 250801.214736.bc25
2025-08-01 21:47:36.297 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 成功加载状态机定义: /E:/project/bgai/target/classes/statelang/bgai-saga-transaction.json
2025-08-01 21:47:36.301 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 开始解析状态机定义: ChatCompletionSaga
2025-08-01 21:47:36.301 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机 [ChatCompletionSaga] 原始版本: 0.0.5, 动态生成的新版本: 250801.214736.4f82
2025-08-01 21:47:36.301 [main] INFO  com.bgpay.bgai.saga.CustomSagaJsonParser - 状态机定义解析成功: ChatCompletionSaga, 已更新版本号: 250801.214736.4f82
2025-08-01 21:47:36.301 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 成功加载状态机定义: /E:/project/bgai/target/classes/statelang/chat_completion_saga.json
2025-08-01 21:47:36.301 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已设置saga.state-machine.auto-register=false，防止状态机重复注册
2025-08-01 21:47:37.310 [main] INFO  c.b.b.controller.ServiceDiscoveryExampleController - ServiceDiscoveryExampleController initialized with: serviceDiscoveryUtils=available, loadBalancedWebClient=available, loadBalancedRestTemplate=available, restTemplate=available
2025-08-01 21:47:37.473 [main] INFO  com.bgpay.bgai.service.mq.MQConsumerService - MQ consumer startup successful [group=billing-consumer-group, topic=BILLING_TOPIC, tag=USER_BILLING]
2025-08-01 21:47:37.473 [main] INFO  c.bgpay.bgai.service.mq.RocketMQBillingServiceImpl - Billing consumer initialized successfully. Ready to process unconsumed messages.
2025-08-01 21:47:38.627 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Seata事务监听器初始化
2025-08-01 21:47:38.627 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - 已设置seata.saga.state-machine.auto-register=false，防止状态机重复注册
2025-08-01 21:47:38.763 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Bean [com.bgpay.bgai.service.mq.BillingTransactionListenerImpl$$SpringCGLIB$$0] with name [billingTransactionListenerImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
2025-08-01 21:47:38.969 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (billing-producer-group) init on namesrv 8.133.246.113:9876
2025-08-01 21:47:39.060 [main] DEBUG com.bgpay.bgai.config.AsyncConfig$1 - Initializing ExecutorService 'blockingExecutor'
2025-08-01 21:47:39.138 [main] INFO  com.bgpay.bgai.config.GatewayRouteConfig - 初始化默认路由配置
2025-08-01 21:47:39.368 [main] INFO  c.b.bgai.config.NacosConfig$NacosWarningHandler - Nacos警告处理器已启用，将忽略配置中心连接警告
2025-08-01 21:47:39.481 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - Seata Saga配置加载
2025-08-01 21:47:39.481 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - 状态机自动注册设置: 禁用
2025-08-01 21:47:39.481 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - 状态机自动注册已禁用，这将防止重复注册错误
2025-08-01 21:47:39.498 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#accesskey'.
2025-08-01 21:47:39.498 [main] WARN  i.s.s.b.a.provider.SpringBootConfigurationProvider - The get method not found for the field 'SeataProperties#secretkey'.
2025-08-01 21:47:39.534 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Initializing Global Transaction Clients ... 
2025-08-01 21:47:39.535 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Transaction Manager Client is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:47:39.535 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Resource Manager is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 21:47:39.535 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:bgai#default_tx_group
2025-08-01 21:47:39.536 [main] INFO  io.seata.saga.tm.DefaultSagaTransactionalTemplate - Global Transaction Clients are initialized. 
2025-08-01 21:47:39.547 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 21:47:39.581 [main] INFO  i.s.s.engine.repo.impl.StateMachineRepositoryImpl - StateMachine[bgai-saga-transaction] is already exist a same version
2025-08-01 21:47:39.594 [main] INFO  i.s.s.engine.repo.impl.StateMachineRepositoryImpl - StateMachine[ChatCompletionSaga] is already exist a same version
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2025-08-01 21:47:41.634 [main] INFO  o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-08-01 21:47:43.121 [main] INFO  o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-08-01 21:47:45.828 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8688"]
2025-08-01 21:47:45.833 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on ports 8080 (http), 8688 (http) with context path ''
2025-08-01 21:47:45.835 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 服务器已完全初始化，确认运行端口: 8080
2025-08-01 21:47:45.835 [main] INFO  com.bgpay.bgai.controller.AuthController - 服务器已初始化，实际运行端口: 8080
2025-08-01 21:47:45.835 [main] INFO  com.bgpay.bgai.controller.AuthController - 认证控制器URL配置已更新: redirectUri=http://localhost:8080/api/auth/callback, 系统实际运行端口=8080
2025-08-01 21:47:45.846 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-08-01 21:47:45.846 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-08-01 21:47:45.847 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-08-01 21:47:45.890 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 21:47:45.890 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 21:47:45.895 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 585c2aba-981b-4863-b388-8e1105b63ee8
2025-08-01 21:47:45.897 [main] INFO  com.alibaba.nacos.common.remote.client - [585c2aba-981b-4863-b388-8e1105b63ee8] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-08-01 21:47:45.898 [main] INFO  com.alibaba.nacos.common.remote.client - [585c2aba-981b-4863-b388-8e1105b63ee8] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-08-01 21:47:45.898 [main] INFO  com.alibaba.nacos.common.remote.client - [585c2aba-981b-4863-b388-8e1105b63ee8] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-08-01 21:47:45.898 [main] INFO  com.alibaba.nacos.common.remote.client - [585c2aba-981b-4863-b388-8e1105b63ee8] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 21:47:45.899 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 21:47:46.057 [main] INFO  com.alibaba.nacos.common.remote.client - [585c2aba-981b-4863-b388-8e1105b63ee8] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754056065999_139.227.195.146_3243
2025-08-01 21:47:46.057 [main] INFO  com.alibaba.nacos.common.remote.client - [585c2aba-981b-4863-b388-8e1105b63ee8] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 21:47:46.057 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [585c2aba-981b-4863-b388-8e1105b63ee8] Notify connected event to listeners.
2025-08-01 21:47:46.057 [main] INFO  com.alibaba.nacos.common.remote.client - [585c2aba-981b-4863-b388-8e1105b63ee8] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x00000199485c5a70
2025-08-01 21:47:46.057 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-08-01 21:47:46.059 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] d750d92e-152f-4055-a641-3bc9dda85a29 registering service bgai with instance Instance{instanceId='null', ip='192.168.86.8', port=8080, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=[2408:820c:7529:92b2:b585:8e1a:c1f3:5121], preserved.register.source=SPRING_CLOUD, preserved.heart.beat.interval=5000}}
2025-08-01 21:47:46.086 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP bgai 192.168.86.8:8080 register finished
2025-08-01 21:47:46.125 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 21:47:46.253 [main] INFO  c.a.c.n.discovery.NacosDiscoveryHeartBeatPublisher - Start nacos heartBeat task scheduler.
2025-08-01 21:47:46.293 [main] INFO  com.bgpay.bgai.config.NacosConfig - 应用启动完成，当前环境: dev
2025-08-01 21:47:46.293 [main] INFO  com.bgpay.bgai.config.NacosConfig - Nacos配置中心: 8.133.246.113:8848, 命名空间: d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:47:46.293 [main] INFO  com.bgpay.bgai.config.NacosConfig - 注意: 如果看到Nacos配置加载警告，但应用正常启动，说明应用正在使用本地配置文件
2025-08-01 21:47:46.295 [main] INFO  com.bgpay.bgai.BgaiApplication - Started BgaiApplication in 30.225 seconds (process running for 33.77)
2025-08-01 21:47:46.299 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 开始刷新文件类型缓存
2025-08-01 21:47:46.300 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,extensions,magic_numbers,is_active FROM mime_type_config WHERE (is_active = ?)
2025-08-01 21:47:46.301 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:47:46.309 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - ==================== Saga状态机加载报告 ====================
2025-08-01 21:47:46.309 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - Saga状态机配置加载状态: 成功
2025-08-01 21:47:46.309 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已加载的状态机定义文件数量: 2
2025-08-01 21:47:46.309 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已加载的状态机定义文件:
2025-08-01 21:47:46.309 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig -  - /E:/project/bgai/target/classes/statelang/bgai-saga-transaction.json
2025-08-01 21:47:46.309 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig -  - /E:/project/bgai/target/classes/statelang/chat_completion_saga.json
2025-08-01 21:47:46.309 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - Saga解析器状态: CUSTOM_FASTJSON2
2025-08-01 21:47:46.310 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 状态机解析结果: 成功 2 个, 失败 0 个
2025-08-01 21:47:46.310 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 状态机自动注册已禁用(saga.state-machine.auto-register=false)，避免重复注册错误
2025-08-01 21:47:46.310 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - =============================================================
2025-08-01 21:47:46.312 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - <==      Total: 52
2025-08-01 21:47:46.312 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - 应用程序已就绪，Seata事务监听器激活
2025-08-01 21:47:46.312 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Seata配置信息:
2025-08-01 21:47:46.312 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - seata.saga.state-machine.auto-register: false
2025-08-01 21:47:46.312 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - seata.enabled: 未设置
2025-08-01 21:47:46.312 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - saga.enabled: 未设置
2025-08-01 21:47:46.313 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE (is_allowed = ?)
2025-08-01 21:47:46.314 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:47:46.315 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] common-dev.yaml+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:47:46.315 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=common-dev.yaml, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:47:46.315 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=common-dev.yaml, group=DEFAULT_GROUP
2025-08-01 21:47:46.315 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] bgtech-ai.yaml+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:47:46.315 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=bgtech-ai.yaml, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:47:46.315 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=bgtech-ai.yaml, group=DEFAULT_GROUP
2025-08-01 21:47:46.317 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] bgtech-ai-dev.yaml+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:47:46.318 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=bgtech-ai-dev.yaml, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:47:46.318 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=bgtech-ai-dev.yaml, group=DEFAULT_GROUP
2025-08-01 21:47:46.318 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] bgtech-ai+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 21:47:46.318 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=bgtech-ai, group=DEFAULT_GROUP, cnt=1
2025-08-01 21:47:46.318 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=bgtech-ai, group=DEFAULT_GROUP
2025-08-01 21:47:46.319 [main] INFO  com.bgpay.bgai.BgaiApplication - Application started successfully
2025-08-01 21:47:46.320 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:47:46.320 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 文件类型缓存刷新完成，共加载 52 个MIME类型配置和 11 个允许的文件类型
2025-08-01 21:49:20.935 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:49:20.969 [http-nio-8688-exec-2] WARN  com.alibaba.druid.pool.DruidAbstractDataSource - discard long time none received connection. , jdbcUrl : jdbc:mysql://8.133.246.113:3306/deepseek?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true&useSSL=false, version : 1.2.8, lastPacketReceivedIdleMillis : 94636
2025-08-01 21:49:21.038 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:49:21.039 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:49:21.048 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:49:21.050 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:49:21.050 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:49:21.058 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:49:21.058 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.filter.ApiKeyWebFilter - Strict API Key validation passed for path: /api/chatGatWay-internal
2025-08-01 21:49:21.162 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - 接收到请求: /api/chatGatWay-internal, 文件=无文件, 问题参数=识别附件的主要信息,并检查配置是否有问题, 模型参数=deepseek-reasoner
2025-08-01 21:49:21.166 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:49:21.167 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:49:21.177 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:49:21.178 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:49:21.179 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:49:21.187 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:49:21.187 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - API Key validation passed for chatGatWay-internal
2025-08-01 21:49:21.188 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - 请求Content-Type: multipart/form-data;boundary=--------------------------968486957064680072038076
2025-08-01 21:49:21.189 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - 收集到的完整参数: question="识别附件的主要信息,并检查配置是否有问题", apiUrl="null", modelName="deepseek-reasoner", multiTurn=true
2025-08-01 21:49:21.189 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - 从X-User-Id头部获取到用户ID: 689258T
2025-08-01 21:49:21.222 [http-nio-8688-exec-2] DEBUG c.bgpay.bgai.mapper.UserMapper.findByAccessToken - ==>  Preparing: SELECT * FROM t_user WHERE access_token = ? AND token_expire_time > NOW()
2025-08-01 21:49:21.222 [http-nio-8688-exec-2] DEBUG c.bgpay.bgai.mapper.UserMapper.findByAccessToken - ==> Parameters: 6eab0b92-c85e-44e8-be5b-98a0bd5df63f(String)
2025-08-01 21:49:21.230 [http-nio-8688-exec-2] DEBUG c.bgpay.bgai.mapper.UserMapper.findByAccessToken - <==      Total: 1
2025-08-01 21:49:21.250 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - 已验证Authorization token与X-User-Id(689258T)匹配
2025-08-01 21:49:21.251 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - PARAM TRACE [689258T]: 尝试查找匹配配置 - 参数: apiUrl=null, modelName=deepseek-reasoner
2025-08-01 21:49:21.252 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 查询配置 - userId=689258T
2025-08-01 21:49:21.252 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 添加条件 - modelName=deepseek-reasoner
2025-08-01 21:49:21.253 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 排序方式 - 按ID降序
2025-08-01 21:49:21.253 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 限制结果数 - LIMIT 1
2025-08-01 21:49:21.255 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,config_name AS name,api_url,api_key,model_name,model_type,user_id,enabled,is_default,priority,description,create_time,update_time FROM api_config WHERE (user_id = ? AND model_name = ?) ORDER BY id DESC LIMIT 1
2025-08-01 21:49:21.255 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiConfigMapper.selectList - ==> Parameters: 689258T(String), deepseek-reasoner(String)
2025-08-01 21:49:21.264 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.ApiConfigMapper.selectList - <==      Total: 1
2025-08-01 21:49:21.264 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 查询结果 - 找到配置: id=1, modelName=deepseek-reasoner
2025-08-01 21:49:21.264 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - PARAM TRACE [689258T]: 找到匹配配置 - apiUrl=https://api.deepseek.com/chat/completions, modelName=deepseek-reasoner (原始请求: deepseek-reasoner)
2025-08-01 21:49:21.264 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - PARAM TRACE [689258T]: 使用传入的modelName: deepseek-reasoner
2025-08-01 21:49:21.264 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - API config resolved: url=https://api.deepseek.com/chat/completions, model=deepseek-reasoner
2025-08-01 21:49:21.265 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.controller.ReactiveChatController - Content processed, length: 35
2025-08-01 21:49:21.274 [http-nio-8688-exec-2] INFO  io.seata.tm.TransactionManagerHolder - TransactionManager Singleton io.seata.tm.DefaultTransactionManager@17c2b74d
2025-08-01 21:49:21.287 [http-nio-8688-exec-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - Begin new global transaction [seata-server:8091:135786363947581457]
2025-08-01 21:49:21.310 [http-nio-8688-exec-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作开始 - ID: seata-server:8091:135786363947581457, 名称: com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive, 模式: AT, 路径: , IP: 192.168.86.8, 用户: system
2025-08-01 21:49:21.319 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - ==>  Preparing: INSERT INTO transaction_log ( xid, transaction_name, transaction_mode, status, request_path, source_ip, user_id, branch_ids, extra_data, start_time, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-08-01 21:49:21.324 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - ==> Parameters: seata-server:8091:135786363947581457(String), com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive(String), AT(String), ACTIVE(String), (String), 192.168.86.8(String), system(String), [](String), {"result":"active","startTime":1754056161310}(String), 2025-08-01T21:49:21.312314300(LocalDateTime), 2025-08-01T21:49:21.312314300(LocalDateTime)
2025-08-01 21:49:21.834 [http-nio-8688-exec-2] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - <==    Updates: 1
2025-08-01 21:49:21.856 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581457, branchId:135786363947581458, lockKeys:transaction_log:646
2025-08-01 21:49:21.879 [http-nio-8688-exec-2] WARN  i.s.c.l.EnhancedServiceLoader$InnerEnhancedServiceLoader - Load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail: io/protostuff/runtime/IdStrategy
2025-08-01 21:49:21.965 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581457, branchId:135786363947581459, lockKeys:transaction_log:646;undo_log:3823
2025-08-01 21:49:22.001 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Transaction method starting: XID=seata-server:8091:135786363947581457, method=processRequestReactive
2025-08-01 21:49:22.003 [http-nio-8688-exec-2] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - Processing reactive request: content length=35, apiUrl=https://api.deepseek.com/chat/completions, modelName=deepseek-reasoner, userId=689258T, multiTurn=true
2025-08-01 21:49:22.007 [http-nio-8688-exec-2] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Transaction method completed: XID=seata-server:8091:135786363947581457, method=processRequestReactive
2025-08-01 21:49:22.024 [http-nio-8688-exec-2] DEBUG c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态: ID=seata-server:8091:135786363947581457, 状态=Committed
2025-08-01 21:49:22.026 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:49:22.029 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581457(String)
2025-08-01 21:49:22.042 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:49:22.052 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==>  Preparing: UPDATE transaction_log SET xid=?, transaction_name=?, transaction_mode=?, status=?, request_path=?, source_ip=?, user_id=?, branch_ids=?, extra_data=?, start_time=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:49:22.064 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==> Parameters: seata-server:8091:135786363947581457(String), com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive(String), AT(String), Committed(String), (String), 192.168.86.8(String), system(String), [](String), {"duration":6,"result":"success","xid":"seata-server:8091:135786363947581457","startTime":1754056162001,"endTime":1754056162007,"transactionId":646,"status":"Begin"}(String), 2025-08-01T21:49:21(LocalDateTime), 2025-08-01T21:49:21(LocalDateTime), 2025-08-01T21:49:22.042037800(LocalDateTime), 646(Long)
2025-08-01 21:49:22.152 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - <==    Updates: 1
2025-08-01 21:49:22.152 [http-nio-8688-exec-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态成功: ID=seata-server:8091:135786363947581457, 状态=Committed
2025-08-01 21:49:22.164 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581457, branchId:135786363947581460, lockKeys:transaction_log:646
2025-08-01 21:49:22.196 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581457, branchId:135786363947581461, lockKeys:undo_log:3825;transaction_log:646
2025-08-01 21:49:22.234 [http-nio-8688-exec-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作结束: ID=seata-server:8091:135786363947581457, 状态=Committed
2025-08-01 21:49:22.235 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:49:22.235 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581457(String)
2025-08-01 21:49:22.243 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:49:22.244 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==>  Preparing: UPDATE transaction_log SET xid=?, transaction_name=?, transaction_mode=?, status=?, request_path=?, source_ip=?, user_id=?, branch_ids=?, extra_data=?, start_time=?, end_time=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:49:22.246 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==> Parameters: seata-server:8091:135786363947581457(String), com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive(String), AT(String), Committed(String), (String), 192.168.86.8(String), system(String), [](String), {"duration":6,"result":"success","xid":"seata-server:8091:135786363947581457","startTime":1754056162001,"endTime":1754056162007,"transactionId":646,"status":"Begin"}(String), 2025-08-01T21:49:21(LocalDateTime), 2025-08-01T21:49:22.244282900(LocalDateTime), 2025-08-01T21:49:21(LocalDateTime), 2025-08-01T21:49:22.244282900(LocalDateTime), 646(Long)
2025-08-01 21:49:22.301 [http-nio-8688-exec-2] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - <==    Updates: 1
2025-08-01 21:49:22.301 [http-nio-8688-exec-2] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作结束成功: ID=seata-server:8091:135786363947581457, 状态=Committed
2025-08-01 21:49:22.312 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581457, branchId:135786363947581462, lockKeys:transaction_log:646
2025-08-01 21:49:22.344 [http-nio-8688-exec-2] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581457, branchId:135786363947581463, lockKeys:undo_log:3827;transaction_log:646
2025-08-01 21:49:22.382 [http-nio-8688-exec-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - transaction seata-server:8091:135786363947581457 will be commit
2025-08-01 21:49:22.391 [http-nio-8688-exec-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - transaction end, xid = seata-server:8091:135786363947581457
2025-08-01 21:49:22.391 [http-nio-8688-exec-2] INFO  io.seata.tm.api.DefaultGlobalTransaction - [seata-server:8091:135786363947581457] commit status: Committed
2025-08-01 21:49:22.484 [boundedElastic-3] WARN  com.bgpay.bgai.transaction.TransactionCoordinator - Found existing transaction for user 689258T: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:49:22.484 [boundedElastic-3] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - Transaction prepared with chatCompletionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:49:22.570 [boundedElastic-3] DEBUG com.bgpay.bgai.web.WebClientConfig - Request: POST https://api.deepseek.com/chat/completions
2025-08-01 21:49:22.574 [boundedElastic-3] DEBUG com.bgpay.bgai.web.WebClientConfig - Request: POST https://api.deepseek.com/chat/completions
2025-08-01 21:49:22.856 [rpcDispatch_RMROLE_1_1_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581457', branchId=135786363947581458, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false,"skipCheckLock":true}'}
2025-08-01 21:49:22.858 [rpcDispatch_RMROLE_1_1_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581457 135786363947581458 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false,"skipCheckLock":true}
2025-08-01 21:49:22.860 [rpcDispatch_RMROLE_1_1_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:49:22.871 [rpcDispatch_RMROLE_1_2_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581457', branchId=135786363947581459, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false,"skipCheckLock":true}'}
2025-08-01 21:49:22.871 [rpcDispatch_RMROLE_1_2_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581457 135786363947581459 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false,"skipCheckLock":true}
2025-08-01 21:49:22.871 [rpcDispatch_RMROLE_1_2_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:49:22.880 [rpcDispatch_RMROLE_1_3_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581457', branchId=135786363947581460, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:49:22.880 [rpcDispatch_RMROLE_1_3_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581457 135786363947581460 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:49:22.880 [rpcDispatch_RMROLE_1_3_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:49:22.888 [rpcDispatch_RMROLE_1_4_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581457', branchId=135786363947581461, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:49:22.888 [rpcDispatch_RMROLE_1_4_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581457 135786363947581461 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:49:22.888 [rpcDispatch_RMROLE_1_4_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:49:22.896 [rpcDispatch_RMROLE_1_5_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581457', branchId=135786363947581462, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:49:22.896 [rpcDispatch_RMROLE_1_5_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581457 135786363947581462 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:49:22.896 [rpcDispatch_RMROLE_1_5_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:49:22.905 [rpcDispatch_RMROLE_1_6_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581457', branchId=135786363947581463, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:49:22.905 [rpcDispatch_RMROLE_1_6_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581457 135786363947581463 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:49:22.905 [rpcDispatch_RMROLE_1_6_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:50:22.428 [parallel-1] ERROR com.bgpay.bgai.controller.ReactiveChatController - Circuit broken for API call: Did not observe any item or terminal signal within 60000ms in 'Mono.transform ⇢ at org.springframework.cloud.circuitbreaker.resilience4j.ReactiveResilience4JCircuitBreaker.run(ReactiveResilience4JCircuitBreaker.java:90)' (and no fallback has been configured)
2025-08-01 21:50:22.434 [parallel-1] INFO  com.bgpay.bgai.transaction.TransactionCoordinator - Transaction rolled back for user 689258T: chatCompletionId=chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:50:22.434 [parallel-1] INFO  com.bgpay.bgai.controller.ReactiveChatController - Using rolled back chatCompletionId for circuit breaker fallback: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:50:22.672 [parallel-1] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 503 SERVICE_UNAVAILABLE
2025-08-01 21:51:02.856 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Processing request: POST /api/chatGatWay-internal from 0:0:0:0:0:0:0:1
2025-08-01 21:51:02.865 [http-nio-8688-exec-5] WARN  com.alibaba.druid.pool.DruidAbstractDataSource - discard long time none received connection. , jdbcUrl : jdbc:mysql://8.133.246.113:3306/deepseek?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true&useSSL=false, version : 1.2.8, lastPacketReceivedIdleMillis : 99026
2025-08-01 21:51:02.921 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:51:02.921 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:51:02.929 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:51:02.929 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:51:02.930 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:51:02.937 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:51:02.937 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.filter.ApiKeyWebFilter - Strict API Key validation passed for path: /api/chatGatWay-internal
2025-08-01 21:51:02.940 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.controller.ReactiveChatController - 接收到请求: /api/chatGatWay-internal, 文件=无文件, 问题参数=识别附件的主要信息,并检查配置是否有问题, 模型参数=deepseek-reasoner
2025-08-01 21:51:02.941 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:51:02.942 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:51:02.948 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:51:02.949 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==>  Preparing: SELECT id,api_key,client_id,client_name,description,created_at,expires_at,active FROM api_key WHERE (api_key = ?)
2025-08-01 21:51:02.949 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - ==> Parameters: AjCuc4g0RUNN9a6aIh55R/0qzBAtWdSsvMhXLOh2L98=(String)
2025-08-01 21:51:02.956 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiKeyMapper.selectList - <==      Total: 1
2025-08-01 21:51:02.956 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.controller.ReactiveChatController - API Key validation passed for chatGatWay-internal
2025-08-01 21:51:02.956 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.controller.ReactiveChatController - 请求Content-Type: multipart/form-data;boundary=--------------------------123291599641755291903748
2025-08-01 21:51:02.956 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.controller.ReactiveChatController - 收集到的完整参数: question="识别附件的主要信息,并检查配置是否有问题", apiUrl="null", modelName="deepseek-reasoner", multiTurn=true
2025-08-01 21:51:02.956 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.controller.ReactiveChatController - 从X-User-Id头部获取到用户ID: 689258T
2025-08-01 21:51:02.968 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.controller.ReactiveChatController - 已验证Authorization token与X-User-Id(689258T)匹配
2025-08-01 21:51:02.968 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.controller.ReactiveChatController - PARAM TRACE [689258T]: 尝试查找匹配配置 - 参数: apiUrl=null, modelName=deepseek-reasoner
2025-08-01 21:51:02.968 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 查询配置 - userId=689258T
2025-08-01 21:51:02.968 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 添加条件 - modelName=deepseek-reasoner
2025-08-01 21:51:02.968 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 排序方式 - 按ID降序
2025-08-01 21:51:02.968 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 限制结果数 - LIMIT 1
2025-08-01 21:51:02.968 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiConfigMapper.selectList - ==>  Preparing: SELECT id,config_name AS name,api_url,api_key,model_name,model_type,user_id,enabled,is_default,priority,description,create_time,update_time FROM api_config WHERE (user_id = ? AND model_name = ?) ORDER BY id DESC LIMIT 1
2025-08-01 21:51:02.969 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiConfigMapper.selectList - ==> Parameters: 689258T(String), deepseek-reasoner(String)
2025-08-01 21:51:02.975 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.ApiConfigMapper.selectList - <==      Total: 1
2025-08-01 21:51:02.975 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.service.impl.ApiConfigServiceImpl - 查询结果 - 找到配置: id=1, modelName=deepseek-reasoner
2025-08-01 21:51:02.975 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.controller.ReactiveChatController - PARAM TRACE [689258T]: 找到匹配配置 - apiUrl=https://api.deepseek.com/chat/completions, modelName=deepseek-reasoner (原始请求: deepseek-reasoner)
2025-08-01 21:51:02.975 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.controller.ReactiveChatController - PARAM TRACE [689258T]: 使用传入的modelName: deepseek-reasoner
2025-08-01 21:51:02.975 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.controller.ReactiveChatController - API config resolved: url=https://api.deepseek.com/chat/completions, model=deepseek-reasoner
2025-08-01 21:51:02.975 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.controller.ReactiveChatController - Content processed, length: 35
2025-08-01 21:51:02.983 [http-nio-8688-exec-5] INFO  io.seata.tm.api.DefaultGlobalTransaction - Begin new global transaction [seata-server:8091:135786363947581464]
2025-08-01 21:51:02.990 [http-nio-8688-exec-5] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作开始 - ID: seata-server:8091:135786363947581464, 名称: com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive, 模式: AT, 路径: , IP: 192.168.86.8, 用户: system
2025-08-01 21:51:02.991 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - ==>  Preparing: INSERT INTO transaction_log ( xid, transaction_name, transaction_mode, status, request_path, source_ip, user_id, branch_ids, extra_data, start_time, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-08-01 21:51:02.991 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - ==> Parameters: seata-server:8091:135786363947581464(String), com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive(String), AT(String), ACTIVE(String), (String), 192.168.86.8(String), system(String), [](String), {"result":"active","startTime":1754056262990}(String), 2025-08-01T21:51:02.990834700(LocalDateTime), 2025-08-01T21:51:02.990834700(LocalDateTime)
2025-08-01 21:51:03.020 [http-nio-8688-exec-5] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - <==    Updates: 1
2025-08-01 21:51:03.030 [http-nio-8688-exec-5] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581464, branchId:135786363947581465, lockKeys:transaction_log:647
2025-08-01 21:51:03.053 [http-nio-8688-exec-5] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581464, branchId:135786363947581466, lockKeys:undo_log:3829;transaction_log:647
2025-08-01 21:51:03.077 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Transaction method starting: XID=seata-server:8091:135786363947581464, method=processRequestReactive
2025-08-01 21:51:03.077 [http-nio-8688-exec-5] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - Processing reactive request: content length=35, apiUrl=https://api.deepseek.com/chat/completions, modelName=deepseek-reasoner, userId=689258T, multiTurn=true
2025-08-01 21:51:03.077 [http-nio-8688-exec-5] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Transaction method completed: XID=seata-server:8091:135786363947581464, method=processRequestReactive
2025-08-01 21:51:03.093 [http-nio-8688-exec-5] DEBUG c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态: ID=seata-server:8091:135786363947581464, 状态=Committed
2025-08-01 21:51:03.094 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:51:03.094 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581464(String)
2025-08-01 21:51:03.100 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:51:03.101 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==>  Preparing: UPDATE transaction_log SET xid=?, transaction_name=?, transaction_mode=?, status=?, request_path=?, source_ip=?, user_id=?, branch_ids=?, extra_data=?, start_time=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:51:03.102 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==> Parameters: seata-server:8091:135786363947581464(String), com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive(String), AT(String), Committed(String), (String), 192.168.86.8(String), system(String), [](String), {"duration":1,"result":"success","xid":"seata-server:8091:135786363947581464","startTime":1754056263076,"endTime":1754056263077,"transactionId":647,"status":"Begin"}(String), 2025-08-01T21:51:03(LocalDateTime), 2025-08-01T21:51:03(LocalDateTime), 2025-08-01T21:51:03.101833900(LocalDateTime), 647(Long)
2025-08-01 21:51:03.135 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - <==    Updates: 1
2025-08-01 21:51:03.136 [http-nio-8688-exec-5] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态成功: ID=seata-server:8091:135786363947581464, 状态=Committed
2025-08-01 21:51:03.143 [http-nio-8688-exec-5] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581464, branchId:135786363947581467, lockKeys:transaction_log:647
2025-08-01 21:51:03.164 [http-nio-8688-exec-5] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581464, branchId:135786363947581468, lockKeys:transaction_log:647;undo_log:3831
2025-08-01 21:51:03.190 [http-nio-8688-exec-5] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作结束: ID=seata-server:8091:135786363947581464, 状态=Committed
2025-08-01 21:51:03.191 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:51:03.191 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581464(String)
2025-08-01 21:51:03.198 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:51:03.198 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==>  Preparing: UPDATE transaction_log SET xid=?, transaction_name=?, transaction_mode=?, status=?, request_path=?, source_ip=?, user_id=?, branch_ids=?, extra_data=?, start_time=?, end_time=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:51:03.199 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==> Parameters: seata-server:8091:135786363947581464(String), com.bgpay.bgai.service.deepseek.DeepSeekServiceImp.processRequestReactive(String), AT(String), Committed(String), (String), 192.168.86.8(String), system(String), [](String), {"duration":1,"result":"success","xid":"seata-server:8091:135786363947581464","startTime":1754056263076,"endTime":1754056263077,"transactionId":647,"status":"Begin"}(String), 2025-08-01T21:51:03(LocalDateTime), 2025-08-01T21:51:03.198515900(LocalDateTime), 2025-08-01T21:51:03(LocalDateTime), 2025-08-01T21:51:03.198515900(LocalDateTime), 647(Long)
2025-08-01 21:51:03.227 [http-nio-8688-exec-5] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - <==    Updates: 1
2025-08-01 21:51:03.228 [http-nio-8688-exec-5] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作结束成功: ID=seata-server:8091:135786363947581464, 状态=Committed
2025-08-01 21:51:03.236 [http-nio-8688-exec-5] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581464, branchId:135786363947581469, lockKeys:transaction_log:647
2025-08-01 21:51:03.259 [http-nio-8688-exec-5] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581464, branchId:135786363947581470, lockKeys:transaction_log:647;undo_log:3833
2025-08-01 21:51:03.281 [http-nio-8688-exec-5] INFO  io.seata.tm.api.DefaultGlobalTransaction - transaction seata-server:8091:135786363947581464 will be commit
2025-08-01 21:51:03.287 [http-nio-8688-exec-5] INFO  io.seata.tm.api.DefaultGlobalTransaction - transaction end, xid = seata-server:8091:135786363947581464
2025-08-01 21:51:03.287 [http-nio-8688-exec-5] INFO  io.seata.tm.api.DefaultGlobalTransaction - [seata-server:8091:135786363947581464] commit status: Committed
2025-08-01 21:51:03.297 [boundedElastic-4] WARN  com.bgpay.bgai.transaction.TransactionCoordinator - Found existing transaction for user 689258T: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:03.297 [boundedElastic-4] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - Transaction prepared with chatCompletionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:03.298 [boundedElastic-4] DEBUG com.bgpay.bgai.web.WebClientConfig - Request: POST https://api.deepseek.com/chat/completions
2025-08-01 21:51:03.299 [boundedElastic-4] DEBUG com.bgpay.bgai.web.WebClientConfig - Request: POST https://api.deepseek.com/chat/completions
2025-08-01 21:51:03.853 [rpcDispatch_RMROLE_1_7_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581464', branchId=135786363947581465, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false,"skipCheckLock":true}'}
2025-08-01 21:51:03.854 [rpcDispatch_RMROLE_1_7_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581464 135786363947581465 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false,"skipCheckLock":true}
2025-08-01 21:51:03.854 [rpcDispatch_RMROLE_1_7_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:51:03.862 [rpcDispatch_RMROLE_1_8_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581464', branchId=135786363947581466, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false,"skipCheckLock":true}'}
2025-08-01 21:51:03.862 [rpcDispatch_RMROLE_1_8_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581464 135786363947581466 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false,"skipCheckLock":true}
2025-08-01 21:51:03.862 [rpcDispatch_RMROLE_1_8_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:51:03.871 [rpcDispatch_RMROLE_1_9_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581464', branchId=135786363947581467, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:51:03.871 [rpcDispatch_RMROLE_1_9_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581464 135786363947581467 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:51:03.871 [rpcDispatch_RMROLE_1_9_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:51:03.879 [rpcDispatch_RMROLE_1_10_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581464', branchId=135786363947581468, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:51:03.879 [rpcDispatch_RMROLE_1_10_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581464 135786363947581468 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:51:03.879 [rpcDispatch_RMROLE_1_10_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:51:03.887 [rpcDispatch_RMROLE_1_11_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581464', branchId=135786363947581469, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:51:03.887 [rpcDispatch_RMROLE_1_11_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581464 135786363947581469 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:51:03.887 [rpcDispatch_RMROLE_1_11_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:51:03.895 [rpcDispatch_RMROLE_1_12_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581464', branchId=135786363947581470, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:51:03.895 [rpcDispatch_RMROLE_1_12_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581464 135786363947581470 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:51:03.895 [rpcDispatch_RMROLE_1_12_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:51:44.790 [reactor-http-nio-3] DEBUG c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - Response received from DeepSeek API: {"id":"f4b536de-d837-4154-9042-2d78103f338f","object":"chat.completion","created":1754056263,"model"...
2025-08-01 21:51:44.792 [reactor-http-nio-3] WARN  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - 在extractUsageInfo中使用默认userId：'default'，而不是null或空字符串
2025-08-01 21:51:44.792 [reactor-http-nio-3] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - 解析完成的响应，使用用户ID: default, 聊天完成ID: f4b536de-d837-4154-9042-2d78103f338f
2025-08-01 21:51:44.805 [reactor-http-nio-3] DEBUG c.bgpay.bgai.mapper.ChatCompletionsMapper.insert - ==>  Preparing: INSERT INTO chat_completions ( object, created, model, system_fingerprint, api_key ) VALUES ( ?, ?, ?, ?, ? )
2025-08-01 21:51:44.806 [reactor-http-nio-3] DEBUG c.bgpay.bgai.mapper.ChatCompletionsMapper.insert - ==> Parameters: chat.completion(String), 1754056304804(Long), deepseek-reasoner(String), 689258T(String), chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String)
2025-08-01 21:51:44.816 [reactor-http-nio-3] DEBUG c.bgpay.bgai.mapper.ChatCompletionsMapper.insert - <==    Updates: 1
2025-08-01 21:51:44.817 [reactor-http-nio-3] INFO  com.bgpay.bgai.transaction.TransactionCoordinator - Transaction committed for user 689258T: chatCompletionId=chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:44.831 [reactor-http-nio-3] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - 开始发送账单消息，chatCompletionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4, userId: 689258T
2025-08-01 21:51:44.954 [reactor-http-nio-3] INFO  io.seata.tm.api.DefaultGlobalTransaction - Begin new global transaction [seata-server:8091:135786363947581471]
2025-08-01 21:51:44.958 [reactor-http-nio-3] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作开始 - ID: seata-server:8091:135786363947581471, 名称: com.bgpay.bgai.service.mq.BillingTransactionListenerImpl.executeLocalTransaction, 模式: AT, 路径: , IP: 192.168.86.8, 用户: system
2025-08-01 21:51:44.958 [reactor-http-nio-3] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - ==>  Preparing: INSERT INTO transaction_log ( xid, transaction_name, transaction_mode, status, request_path, source_ip, user_id, branch_ids, extra_data, start_time, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-08-01 21:51:44.959 [reactor-http-nio-3] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - ==> Parameters: seata-server:8091:135786363947581471(String), com.bgpay.bgai.service.mq.BillingTransactionListenerImpl.executeLocalTransaction(String), AT(String), ACTIVE(String), (String), 192.168.86.8(String), system(String), [](String), {"result":"active","startTime":1754056304958}(String), 2025-08-01T21:51:44.958221300(LocalDateTime), 2025-08-01T21:51:44.958221300(LocalDateTime)
2025-08-01 21:51:44.983 [reactor-http-nio-3] DEBUG com.bgpay.bgai.mapper.TransactionLogMapper.insert - <==    Updates: 1
2025-08-01 21:51:44.992 [reactor-http-nio-3] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581471, branchId:135786363947581472, lockKeys:transaction_log:648
2025-08-01 21:51:45.011 [reactor-http-nio-3] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581471, branchId:135786363947581473, lockKeys:undo_log:3835;transaction_log:648
2025-08-01 21:51:45.030 [reactor-http-nio-3] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Transaction method starting: XID=seata-server:8091:135786363947581471, method=executeLocalTransaction
2025-08-01 21:51:45.030 [reactor-http-nio-3] INFO  c.b.bgai.service.mq.BillingTransactionListenerImpl - 开始执行本地事务, xid: seata-server:8091:135786363947581471, userId: 689258T, completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:45.050 [reactor-http-nio-3] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.selectCount - ==>  Preparing: SELECT COUNT( * ) AS total FROM usage_info WHERE (chat_completion_id = ?)
2025-08-01 21:51:45.051 [reactor-http-nio-3] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.selectCount - ==> Parameters: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String)
2025-08-01 21:51:45.058 [reactor-http-nio-3] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.selectCount - <==      Total: 1
2025-08-01 21:51:45.065 [reactor-http-nio-3] INFO  c.b.bgai.service.mq.BillingTransactionListenerImpl - 消息已处理，提交事务, completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:45.065 [reactor-http-nio-3] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Transaction method completed: XID=seata-server:8091:135786363947581471, method=executeLocalTransaction
2025-08-01 21:51:45.078 [reactor-http-nio-3] DEBUG c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态: ID=seata-server:8091:135786363947581471, 状态=Committed
2025-08-01 21:51:45.079 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:51:45.079 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581471(String)
2025-08-01 21:51:45.085 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:51:45.086 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==>  Preparing: UPDATE transaction_log SET xid=?, transaction_name=?, transaction_mode=?, status=?, request_path=?, source_ip=?, user_id=?, branch_ids=?, extra_data=?, start_time=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:51:45.086 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==> Parameters: seata-server:8091:135786363947581471(String), com.bgpay.bgai.service.mq.BillingTransactionListenerImpl.executeLocalTransaction(String), AT(String), Committed(String), (String), 192.168.86.8(String), system(String), [](String), {"duration":35,"result":"success","xid":"seata-server:8091:135786363947581471","startTime":1754056305030,"endTime":1754056305065,"transactionId":648,"status":"Begin"}(String), 2025-08-01T21:51:45(LocalDateTime), 2025-08-01T21:51:45(LocalDateTime), 2025-08-01T21:51:45.085514300(LocalDateTime), 648(Long)
2025-08-01 21:51:45.119 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - <==    Updates: 1
2025-08-01 21:51:45.119 [reactor-http-nio-3] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 更新操作状态成功: ID=seata-server:8091:135786363947581471, 状态=Committed
2025-08-01 21:51:45.126 [reactor-http-nio-3] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581471, branchId:135786363947581474, lockKeys:transaction_log:648
2025-08-01 21:51:45.146 [reactor-http-nio-3] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581471, branchId:135786363947581475, lockKeys:undo_log:3837;transaction_log:648
2025-08-01 21:51:45.168 [reactor-http-nio-3] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作结束: ID=seata-server:8091:135786363947581471, 状态=Committed
2025-08-01 21:51:45.169 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==>  Preparing: SELECT id,xid,transaction_name,transaction_mode,status,request_path,source_ip,user_id,branch_ids,extra_data,start_time,end_time,create_time,update_time FROM transaction_log WHERE (xid = ?) LIMIT 1
2025-08-01 21:51:45.169 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - ==> Parameters: seata-server:8091:135786363947581471(String)
2025-08-01 21:51:45.175 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.selectList - <==      Total: 1
2025-08-01 21:51:45.176 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==>  Preparing: UPDATE transaction_log SET xid=?, transaction_name=?, transaction_mode=?, status=?, request_path=?, source_ip=?, user_id=?, branch_ids=?, extra_data=?, start_time=?, end_time=?, create_time=?, update_time=? WHERE id=?
2025-08-01 21:51:45.176 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - ==> Parameters: seata-server:8091:135786363947581471(String), com.bgpay.bgai.service.mq.BillingTransactionListenerImpl.executeLocalTransaction(String), AT(String), Committed(String), (String), 192.168.86.8(String), system(String), [](String), {"duration":35,"result":"success","xid":"seata-server:8091:135786363947581471","startTime":1754056305030,"endTime":1754056305065,"transactionId":648,"status":"Begin"}(String), 2025-08-01T21:51:45(LocalDateTime), 2025-08-01T21:51:45.175915100(LocalDateTime), 2025-08-01T21:51:45(LocalDateTime), 2025-08-01T21:51:45.175915100(LocalDateTime), 648(Long)
2025-08-01 21:51:45.206 [reactor-http-nio-3] DEBUG c.b.bgai.mapper.TransactionLogMapper.updateById - <==    Updates: 1
2025-08-01 21:51:45.206 [reactor-http-nio-3] INFO  c.b.bgai.service.impl.TransactionLogServiceImpl - 记录操作结束成功: ID=seata-server:8091:135786363947581471, 状态=Committed
2025-08-01 21:51:45.213 [reactor-http-nio-3] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581471, branchId:135786363947581476, lockKeys:transaction_log:648
2025-08-01 21:51:45.248 [reactor-http-nio-3] INFO  io.seata.rm.AbstractResourceManager - branch register success, xid:seata-server:8091:135786363947581471, branchId:135786363947581477, lockKeys:undo_log:3839;transaction_log:648
2025-08-01 21:51:45.282 [reactor-http-nio-3] INFO  io.seata.tm.api.DefaultGlobalTransaction - transaction seata-server:8091:135786363947581471 will be commit
2025-08-01 21:51:45.293 [reactor-http-nio-3] INFO  io.seata.tm.api.DefaultGlobalTransaction - transaction end, xid = seata-server:8091:135786363947581471
2025-08-01 21:51:45.294 [reactor-http-nio-3] INFO  io.seata.tm.api.DefaultGlobalTransaction - [seata-server:8091:135786363947581471] commit status: Committed
2025-08-01 21:51:45.297 [reactor-http-nio-3] INFO  com.bgpay.bgai.service.mq.RocketMQProducerService - Successfully sent billing message in transaction, completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:45.297 [reactor-http-nio-3] INFO  c.bgpay.bgai.service.deepseek.DeepSeekServiceImp - 账单消息发送成功，chatCompletionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4, userId: 689258T
2025-08-01 21:51:45.302 [reactor-http-nio-3] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - 执行第一步操作 - 准备处理环境, businessKey: 689258T:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:45.318 [reactor-http-nio-3] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - 成功设置处理中状态: BILLING:PROCESSED:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4:processing
2025-08-01 21:51:45.319 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.service.mq.RocketMQBillingServiceImpl - 解码后的JSON数据: {"chatCompletionId":"chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4","completionReasoningTokens":354,"completionTokens":732,"createdAt":"2025-08-01 21:51:44.831670200","modelType":"deepseek-reasoner","promptCacheHitTokens":0,"promptCacheMissTokens":25,"promptTokens":0,"promptTokensCached":0}
2025-08-01 21:51:45.331 [reactor-http-nio-3] INFO  com.bgpay.bgai.controller.ReactiveChatController - Processed response for user 689258T, content length: 789
2025-08-01 21:51:45.352 [ConsumeMessageThread_billing-consumer-group_1] INFO  c.bgpay.bgai.service.impl.UsageRecordServiceImpl - 缓存计费数据成功: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:45.357 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - 执行第一步操作 - 准备处理环境, businessKey: 689258T:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:45.370 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - 成功设置处理中状态: BILLING:PROCESSED:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4:processing
2025-08-01 21:51:45.381 [reactor-http-nio-3] DEBUG com.bgpay.bgai.filter.LogTraceWebFilter - Completed request with status: 200 OK
2025-08-01 21:51:45.534 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Calculating input cost for model: deepseek-reasoner, timePeriod: standard, tokens: 0/25
2025-08-01 21:51:45.610 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.service.impl.BGAIServiceImpl - Cache miss cost calculated: tokens=25, price=4.0000, cost=0.0001
2025-08-01 21:51:45.611 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Total input cost calculated: 0.0001
2025-08-01 21:51:45.611 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Calculating output cost for model: deepseek-reasoner, timePeriod: standard, tokens: 732
2025-08-01 21:51:45.650 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Output cost calculated: tokens=732, price=16.0000, cost=0.0117
2025-08-01 21:51:45.692 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_type,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at,message_id,input_tokens,output_tokens,status,created_at,updated_at FROM usage_record WHERE (chat_completion_id = ? AND message_id = ?) LIMIT 1
2025-08-01 21:51:45.692 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - ==> Parameters: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String), 2408820C752992B2B5858E1AC1F35121CAD436BAF30C04B0F11D0000(String)
2025-08-01 21:51:45.696 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - <==      Total: 0
2025-08-01 21:51:45.701 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.insert - ==>  Preparing: INSERT INTO usage_record ( model_type, chat_completion_id, user_id, input_cost, output_cost, price_version, message_id, input_tokens, output_tokens, status, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-08-01 21:51:45.702 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.insert - ==> Parameters: deepseek-reasoner(String), chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String), 689258T(String), 0.0001(BigDecimal), 0.0117(BigDecimal), 1(Integer), 2408820C752992B2B5858E1AC1F35121CAD436BAF30C04B0F11D0000(String), 25(Integer), 732(Integer), PENDING(String), 2025-08-01T21:51:45.696190(LocalDateTime), 2025-08-01T21:51:45.696190(LocalDateTime)
2025-08-01 21:51:45.714 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.insert - <==    Updates: 1
2025-08-01 21:51:45.715 [ConsumeMessageThread_billing-consumer-group_1] INFO  c.bgpay.bgai.service.impl.UsageRecordServiceImpl - Inserted new usage record for completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4, messageId: 2408820C752992B2B5858E1AC1F35121CAD436BAF30C04B0F11D0000
2025-08-01 21:51:45.715 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Second step completed successfully. businessKey: 689258T:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:45.738 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Executing third step - updating billing status, businessKey: 689258T:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:45.739 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - ==>  Preparing: SELECT id,model_type,chat_completion_id,user_id,input_cost,output_cost,price_version,calculated_at,message_id,input_tokens,output_tokens,status,created_at,updated_at FROM usage_record WHERE (chat_completion_id = ? AND message_id = ?) LIMIT 1
2025-08-01 21:51:45.739 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - ==> Parameters: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String), 2408820C752992B2B5858E1AC1F35121CAD436BAF30C04B0F11D0000(String)
2025-08-01 21:51:45.744 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.bgpay.bgai.mapper.UsageRecordMapper.selectList - <==      Total: 1
2025-08-01 21:51:45.751 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.UsageInfoServiceImpl - Processing usage info for user: 689258T, completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:45.751 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.b.b.mapper.UsageInfoMapper.selectByCompletionId - ==>  Preparing: SELECT * FROM usage_info WHERE chat_completion_id = ? LIMIT 1
2025-08-01 21:51:45.752 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.b.b.mapper.UsageInfoMapper.selectByCompletionId - ==> Parameters: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String)
2025-08-01 21:51:45.757 [ConsumeMessageThread_billing-consumer-group_1] DEBUG c.b.b.mapper.UsageInfoMapper.selectByCompletionId - <==      Total: 1
2025-08-01 21:51:45.758 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.UsageInfoServiceImpl - Usage info already exists for completionId: chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4, updating...
2025-08-01 21:51:45.761 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.updateById - ==>  Preparing: UPDATE usage_info SET user_id=?, chat_completion_id=?, prompt_tokens=?, completion_tokens=?, total_tokens=?, prompt_tokens_cached=?, completion_reasoning_tokens=?, prompt_cache_hit_tokens=?, prompt_cache_miss_tokens=?, created_at=?, model_type=?, updated_at=? WHERE id=?
2025-08-01 21:51:45.761 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.updateById - ==> Parameters: 689258T(String), chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String), 50(Integer), 1023(Integer), 1073(Integer), 0(Integer), 453(Integer), 0(Integer), 50(Integer), 2025-08-01T21:28:43(LocalDateTime), deepseek-reasoner(String), 2025-08-01T21:51:45.758197200(LocalDateTime), 356(Long)
2025-08-01 21:51:45.772 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageInfoMapper.updateById - <==    Updates: 1
2025-08-01 21:51:45.779 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.update - ==>  Preparing: UPDATE usage_record SET status=?,updated_at=? WHERE (chat_completion_id = ? AND message_id = ?)
2025-08-01 21:51:45.780 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.update - ==> Parameters: COMPLETED(String), 2025-08-01T21:51:45.777193300(LocalDateTime), chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4(String), 2408820C752992B2B5858E1AC1F35121CAD436BAF30C04B0F11D0000(String)
2025-08-01 21:51:45.791 [ConsumeMessageThread_billing-consumer-group_1] DEBUG com.bgpay.bgai.mapper.UsageRecordMapper.update - <==    Updates: 1
2025-08-01 21:51:45.815 [ConsumeMessageThread_billing-consumer-group_1] INFO  com.bgpay.bgai.service.impl.BGAIServiceImpl - Third step completed successfully. businessKey: 689258T:chat-b460fe8d-c33c-4bc2-99d7-a238af8b54a4
2025-08-01 21:51:45.837 [ConsumeMessageThread_billing-consumer-group_1] INFO  c.bgpay.bgai.service.mq.RocketMQBillingServiceImpl - Message consumed: 2408820C752992B2B5858E1AC1F35121CAD436BAF30C04B0F11D0000
2025-08-01 21:51:45.854 [rpcDispatch_RMROLE_1_13_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581471', branchId=135786363947581472, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false,"skipCheckLock":true}'}
2025-08-01 21:51:45.854 [rpcDispatch_RMROLE_1_13_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581471 135786363947581472 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false,"skipCheckLock":true}
2025-08-01 21:51:45.854 [rpcDispatch_RMROLE_1_13_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:51:45.862 [rpcDispatch_RMROLE_1_14_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581471', branchId=135786363947581473, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false,"skipCheckLock":true}'}
2025-08-01 21:51:45.862 [rpcDispatch_RMROLE_1_14_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581471 135786363947581473 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false,"skipCheckLock":true}
2025-08-01 21:51:45.862 [rpcDispatch_RMROLE_1_14_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:51:45.870 [rpcDispatch_RMROLE_1_15_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581471', branchId=135786363947581474, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:51:45.870 [rpcDispatch_RMROLE_1_15_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581471 135786363947581474 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:51:45.870 [rpcDispatch_RMROLE_1_15_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:51:45.877 [rpcDispatch_RMROLE_1_16_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581471', branchId=135786363947581475, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:51:45.877 [rpcDispatch_RMROLE_1_16_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581471 135786363947581475 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:51:45.877 [rpcDispatch_RMROLE_1_16_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:51:45.885 [rpcDispatch_RMROLE_1_17_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581471', branchId=135786363947581476, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:51:45.885 [rpcDispatch_RMROLE_1_17_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581471 135786363947581476 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:51:45.885 [rpcDispatch_RMROLE_1_17_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:51:45.892 [rpcDispatch_RMROLE_1_18_24] INFO  i.s.c.rpc.processor.client.RmBranchCommitProcessor - rm client handle branch commit process:BranchCommitRequest{xid='seata-server:8091:135786363947581471', branchId=135786363947581477, branchType=AT, resourceId='jdbc:mysql://8.133.246.113:3306/deepseek', applicationData='{"autoCommit":false}'}
2025-08-01 21:51:45.892 [rpcDispatch_RMROLE_1_18_24] INFO  io.seata.rm.AbstractRMHandler - Branch committing: seata-server:8091:135786363947581471 135786363947581477 jdbc:mysql://8.133.246.113:3306/deepseek {"autoCommit":false}
2025-08-01 21:51:45.892 [rpcDispatch_RMROLE_1_18_24] INFO  io.seata.rm.AbstractRMHandler - Branch commit result: PhaseTwo_Committed
2025-08-01 21:52:46.291 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 开始刷新文件类型缓存
2025-08-01 21:52:46.291 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,extensions,magic_numbers,is_active FROM mime_type_config WHERE (is_active = ?)
2025-08-01 21:52:46.292 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:52:46.300 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - <==      Total: 52
2025-08-01 21:52:46.300 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE (is_allowed = ?)
2025-08-01 21:52:46.301 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:52:46.307 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:52:46.307 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 文件类型缓存刷新完成，共加载 52 个MIME类型配置和 11 个允许的文件类型
2025-08-01 21:53:44.950 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:10909] result: true
2025-08-01 21:57:46.294 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 开始刷新文件类型缓存
2025-08-01 21:57:47.360 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==>  Preparing: SELECT id,mime_type,extensions,magic_numbers,is_active FROM mime_type_config WHERE (is_active = ?)
2025-08-01 21:57:47.361 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:57:47.376 [scheduling-1] DEBUG com.bgpay.bgai.mapper.FileTypeMapper.selectList - <==      Total: 52
2025-08-01 21:57:47.377 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==>  Preparing: SELECT mime_type FROM allowed_file_type WHERE (is_allowed = ?)
2025-08-01 21:57:47.377 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - ==> Parameters: true(Boolean)
2025-08-01 21:57:47.382 [scheduling-1] DEBUG c.b.bgai.mapper.AllowedFileTypeMapper.selectList - <==      Total: 11
2025-08-01 21:57:47.382 [scheduling-1] INFO  com.bgpay.bgai.service.deepseek.FileTypeService - 文件类型缓存刷新完成，共加载 52 个MIME类型配置和 11 个允许的文件类型
2025-08-01 22:00:58.412 [Thread-12] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-08-01 22:00:58.412 [Thread-0] INFO  com.bgpay.bgai.BgaiApplication - 执行应用关闭钩子，正在关闭资源...
2025-08-01 22:00:58.412 [Thread-4] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-08-01 22:00:58.412 [Thread-12] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-08-01 22:00:58.413 [Thread-4] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-08-01 22:01:05.534 [SpringContextShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-08-01 22:01:05.534 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] d750d92e-152f-4055-a641-3bc9dda85a29 deregistering service bgai with instance: Instance{instanceId='null', ip='192.168.86.8', port=8080, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-08-01 22:01:05.540 [SpringContextShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-08-01 22:01:05.542 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-08-01 22:01:05.543 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-08-01 22:01:05.543 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-08-01 22:01:05.543 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-08-01 22:01:05.543 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-08-01 22:01:05.543 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-08-01 22:01:05.543 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-08-01 22:01:05.543 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-08-01 22:01:05.543 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-08-01 22:01:05.543 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-08-01 22:01:05.543 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-08-01 22:01:05.543 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-08-01 22:01:05.543 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-08-01 22:01:05.543 [SpringContextShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-08-01 22:01:05.543 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-08-01 22:01:05.543 [SpringContextShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-08-01 22:01:05.544 [SpringContextShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@55791543[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-08-01 22:01:05.544 [SpringContextShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1754056065999_139.227.195.146_3243
2025-08-01 22:01:05.547 [nacos-grpc-client-executor-8.133.246.113-304] WARN  c.a.nacos.common.remote.client.grpc.GrpcClient - [1754056065999_139.227.195.146_3243]Ignore error event,isRunning:false,isAbandon=false
2025-08-01 22:01:05.549 [SpringContextShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7d837ec6[Running, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 305]
2025-08-01 22:01:05.549 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@6ff43a85[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 266]
2025-08-01 22:01:05.550 [SpringContextShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-08-01 22:01:05.550 [SpringContextShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-08-01 22:01:05.550 [SpringContextShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-08-01 22:01:05.558 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0x6a8d58bc, L:/192.168.86.8:50232 ! R:/8.133.246.113:8091]
2025-08-01 22:01:05.558 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0x6a8d58bc, L:/192.168.86.8:50232 ! R:/8.133.246.113:8091]
2025-08-01 22:01:05.558 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0x6a8d58bc, L:/192.168.86.8:50232 ! R:/8.133.246.113:8091]
2025-08-01 22:01:05.558 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0x6a8d58bc, L:/192.168.86.8:50232 ! R:/8.133.246.113:8091]
2025-08-01 22:01:05.558 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x6a8d58bc, L:/192.168.86.8:50232 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:01:05.558 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x6a8d58bc, L:/192.168.86.8:50232 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:01:05.559 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0x418a70fb, L:/192.168.86.8:50236 ! R:/8.133.246.113:8091]
2025-08-01 22:01:05.559 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0x418a70fb, L:/192.168.86.8:50236 ! R:/8.133.246.113:8091]
2025-08-01 22:01:05.559 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0x418a70fb, L:/192.168.86.8:50236 ! R:/8.133.246.113:8091]
2025-08-01 22:01:05.559 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0x418a70fb, L:/192.168.86.8:50236 ! R:/8.133.246.113:8091]
2025-08-01 22:01:05.560 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x418a70fb, L:/192.168.86.8:50236 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:01:05.560 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x418a70fb, L:/192.168.86.8:50236 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:01:05.562 [SpringContextShutdownHook] DEBUG com.bgpay.bgai.config.AsyncConfig$1 - Shutting down ExecutorService 'blockingExecutor'
2025-08-01 22:01:05.585 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:10911] result: true
2025-08-01 22:01:05.585 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:9876] result: true
2025-08-01 22:01:05.585 [SpringContextShutdownHook] INFO  com.bgpay.bgai.service.mq.RocketMQProducerService - RocketMQ producer shutdown
2025-08-01 22:01:05.604 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:10911] result: true
2025-08-01 22:01:05.604 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:9876] result: true
2025-08-01 22:01:05.621 [SpringContextShutdownHook] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 动态路由服务关闭，执行清理操作
2025-08-01 22:01:05.622 [SpringContextShutdownHook] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 22:01:57.088 [main] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/Administrator/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/Administrator/.m2/repository/org/json/json/20220320/json-20220320.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-08-01 22:01:57.105 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-08-01 22:01:57.106 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - The following 1 profile is active: "dev"
2025-08-01 22:01:59.913 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 22:01:59.916 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-01 22:01:59.973 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.bgpay.bgai.repository.es.ChatRecordRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-08-01 22:01:59.974 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 0 JPA repository interfaces.
2025-08-01 22:02:00.231 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'allowedFileTypeMapper' and 'com.bgpay.bgai.mapper.AllowedFileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.232 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiClientMapper' and 'com.bgpay.bgai.mapper.ApiClientMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.232 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiConfigMapper' and 'com.bgpay.bgai.mapper.ApiConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.232 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiKeyMapper' and 'com.bgpay.bgai.mapper.ApiKeyMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.232 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'chatCompletionsMapper' and 'com.bgpay.bgai.mapper.ChatCompletionsMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.232 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'choicesMapper' and 'com.bgpay.bgai.mapper.ChoicesMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.233 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'fileTypeMapper' and 'com.bgpay.bgai.mapper.FileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.233 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceConfigMapper' and 'com.bgpay.bgai.mapper.PriceConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.233 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceVersionMapper' and 'com.bgpay.bgai.mapper.PriceVersionMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.233 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'transactionLogMapper' and 'com.bgpay.bgai.mapper.TransactionLogMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.233 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageInfoMapper' and 'com.bgpay.bgai.mapper.UsageInfoMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.233 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageRecordMapper' and 'com.bgpay.bgai.mapper.UsageRecordMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.233 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'userMapper' and 'com.bgpay.bgai.mapper.UserMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:00.234 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - No MyBatis mapper was found in '[com.bgpay.bgai.mapper]' package. Please check your configuration.
2025-08-01 22:02:00.376 [main] WARN  o.s.c.annotation.ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'gatewayBeanFactoryPostProcessor' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static' and/or marking the containing configuration class as 'proxyBeanMethods=false'.
2025-08-01 22:02:06.737 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:06.738 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:06.738 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:06.809 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:06.819 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:06.827 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:06.829 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda/0x0000021bb3a19318] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:06.831 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:06.846 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:06.852 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:06.876 [main] INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration - Automatically configure Seata
2025-08-01 22:02:06.971 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 22:02:06.987 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 22:02:06.996 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Initializing Global Transaction Clients ... 
2025-08-01 22:02:07.119 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 22:02:07.121 [main] INFO  io.seata.discovery.registry.RegistryFactory - use registry center type: file
2025-08-01 22:02:07.139 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 22:02:07.144 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:TMROLE,address:8.133.246.113:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='ak=
digest=default_tx_group,192.168.86.8,1754056927142
timestamp=1754056927142
authVersion=V4
vgroup=default_tx_group
ip=192.168.86.8
'} >
2025-08-01 22:02:07.378 [main] INFO  io.seata.core.rpc.netty.TmNettyRemotingClient - register TM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0x957e7e6e, L:/192.168.86.8:54375 - R:/8.133.246.113:8091]
2025-08-01 22:02:07.386 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 99 ms, version:1.8.1-SNAPSHOT,role:TMROLE,channel:[id: 0x957e7e6e, L:/192.168.86.8:54375 - R:/8.133.246.113:8091]
2025-08-01 22:02:07.387 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Transaction Manager Client is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 22:02:07.406 [main] INFO  io.seata.rm.datasource.AsyncWorker - Async Commit Buffer Limit: 10000
2025-08-01 22:02:07.407 [main] INFO  io.seata.rm.datasource.xa.ResourceManagerXA - ResourceManagerXA init ...
2025-08-01 22:02:07.417 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 22:02:07.418 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Resource Manager is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 22:02:07.418 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Global Transaction Clients are initialized. 
2025-08-01 22:02:07.428 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'unifiedEnvironmentConfig' of type [com.bgpay.bgai.config.UnifiedEnvironmentConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [persistenceExceptionTranslationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:07.430 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'environment' of type [org.springframework.core.env.StandardEnvironment] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [persistenceExceptionTranslationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:07.640 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:07.777 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:07.811 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:08.603 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'messageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:08.731 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:08.753 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:08.761 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'listenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:08.788 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'testBeanPostProcessor' of type [com.bgpay.bgai.config.TestBeanPostProcessor$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [bgaiServiceImplInjector] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 22:02:08.866 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 22:02:08.890 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:08.898 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:09.549 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-08-01 22:02:09.576 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - The ["http-nio-auto-1"] connector has been configured to support HTTP upgrade to [h2c]
2025-08-01 22:02:09.577 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-1"]
2025-08-01 22:02:09.580 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-08-01 22:02:09.581 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.20]
2025-08-01 22:02:10.192 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-08-01 22:02:10.773 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 22:02:10.774 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - RM will register :jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 22:02:10.774 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:RMROLE,address:8.133.246.113:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://8.133.246.113:3306/deepseek', version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='null'} >
2025-08-01 22:02:10.898 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - register RM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0x1fa9ca0f, L:/192.168.86.8:54383 - R:/8.133.246.113:8091]
2025-08-01 22:02:10.898 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 25 ms, version:1.8.1-SNAPSHOT,role:RMROLE,channel:[id: 0x1fa9ca0f, L:/192.168.86.8:54383 - R:/8.133.246.113:8091]
2025-08-01 22:02:10.926 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: masterDataSource
2025-08-01 22:02:10.987 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-2} inited
2025-08-01 22:02:11.103 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 22:02:11.107 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: slaveDataSource
2025-08-01 22:02:11.117 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 22:02:11.149 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 22:02:11.150 [main] INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Auto proxy data source 'dynamicDataSource' by 'AT' mode.
2025-08-01 22:02:11.164 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 22:02:11.362 [main] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-01 22:02:11.488 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
2025-08-01 22:02:11.555 [main] INFO  o.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-08-01 22:02:11.756 [main] INFO  o.s.o.j.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-01 22:02:11.863 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-01 22:02:11.866 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-01 22:02:13.035 [main] INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-01 22:02:13.044 [main] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 22:02:13.979 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - SeataDisableConfiguration已加载，Seata在测试环境中被禁用
2025-08-01 22:02:13.979 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - 设置系统属性: seata.enabled=false, saga.enabled=false
2025-08-01 22:02:14.690 [main] INFO  com.bgpay.bgai.config.NacosRouteConfigListener - 初始化Nacos路由配置监听器
2025-08-01 22:02:14.693 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:02:14.693 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:02:14.694 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 9036c42f-7e04-4a8d-b237-a179455c7829_config-0
2025-08-01 22:02:14.694 [main] INFO  com.alibaba.nacos.common.remote.client - [9036c42f-7e04-4a8d-b237-a179455c7829_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000021bb36083e0
2025-08-01 22:02:14.694 [main] INFO  com.alibaba.nacos.common.remote.client - [9036c42f-7e04-4a8d-b237-a179455c7829_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000021bb36087f0
2025-08-01 22:02:14.694 [main] INFO  com.alibaba.nacos.common.remote.client - [9036c42f-7e04-4a8d-b237-a179455c7829_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:02:14.694 [main] INFO  com.alibaba.nacos.common.remote.client - [9036c42f-7e04-4a8d-b237-a179455c7829_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:02:14.695 [main] INFO  com.alibaba.nacos.common.remote.client - [9036c42f-7e04-4a8d-b237-a179455c7829_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:02:14.696 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:02:14.848 [main] INFO  com.alibaba.nacos.common.remote.client - [9036c42f-7e04-4a8d-b237-a179455c7829_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754056934764_139.227.195.146_4046
2025-08-01 22:02:14.850 [main] INFO  com.alibaba.nacos.common.remote.client - [9036c42f-7e04-4a8d-b237-a179455c7829_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:02:14.851 [main] INFO  com.alibaba.nacos.common.remote.client - [9036c42f-7e04-4a8d-b237-a179455c7829_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x0000021bb37491a8
2025-08-01 22:02:14.852 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [9036c42f-7e04-4a8d-b237-a179455c7829_config-0] Notify connected event to listeners.
2025-08-01 22:02:14.853 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [9036c42f-7e04-4a8d-b237-a179455c7829_config-0] Connected,notify listen context...
2025-08-01 22:02:14.870 [main] WARN  com.bgpay.bgai.config.NacosRouteConfigListener - Nacos中未找到路由配置数据
2025-08-01 22:02:14.874 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-08-01 22:02:14.875 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:02:14.891 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 22:02:14.900 [main] INFO  c.bgpay.bgai.config.NacosRouteDefinitionRepository - 初始化Nacos路由定义存储库
2025-08-01 22:02:14.902 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:02:14.902 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:02:14.904 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 73765a87-ca42-4a8c-a1a7-2e1fffb62007_config-0
2025-08-01 22:02:14.904 [main] INFO  com.alibaba.nacos.common.remote.client - [73765a87-ca42-4a8c-a1a7-2e1fffb62007_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000021bb36083e0
2025-08-01 22:02:14.905 [main] INFO  com.alibaba.nacos.common.remote.client - [73765a87-ca42-4a8c-a1a7-2e1fffb62007_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000021bb36087f0
2025-08-01 22:02:14.905 [main] INFO  com.alibaba.nacos.common.remote.client - [73765a87-ca42-4a8c-a1a7-2e1fffb62007_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:02:14.905 [main] INFO  com.alibaba.nacos.common.remote.client - [73765a87-ca42-4a8c-a1a7-2e1fffb62007_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:02:14.905 [main] INFO  com.alibaba.nacos.common.remote.client - [73765a87-ca42-4a8c-a1a7-2e1fffb62007_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:02:14.906 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:02:15.078 [main] INFO  com.alibaba.nacos.common.remote.client - [73765a87-ca42-4a8c-a1a7-2e1fffb62007_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754056934995_139.227.195.146_4047
2025-08-01 22:02:15.078 [main] INFO  com.alibaba.nacos.common.remote.client - [73765a87-ca42-4a8c-a1a7-2e1fffb62007_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:02:15.079 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [73765a87-ca42-4a8c-a1a7-2e1fffb62007_config-0] Notify connected event to listeners.
2025-08-01 22:02:15.080 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [73765a87-ca42-4a8c-a1a7-2e1fffb62007_config-0] Connected,notify listen context...
2025-08-01 22:02:15.080 [main] INFO  com.alibaba.nacos.common.remote.client - [73765a87-ca42-4a8c-a1a7-2e1fffb62007_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x0000021bb37491a8
2025-08-01 22:02:15.115 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 22:02:15.115 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:02:15.116 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 22:02:15.903 [main] INFO  com.bgpay.bgai.config.RestTemplateConfig - Creating RestTemplate bean using SimpleClientHttpRequestFactory
2025-08-01 22:02:15.933 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-08-01 22:02:15.941 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-08-01 22:02:15.954 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 从WebServerApplicationContext获取实际端口: 8080
2025-08-01 22:02:15.954 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 初始化SSO配置: clientId=bgai-client-id, 使用端口=8080
2025-08-01 22:02:15.955 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 根据实际端口生成redirectUri: http://localhost:8080/api/auth/callback
2025-08-01 22:02:15.955 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - SSO URL配置已更新: redirectUri=http://localhost:8080/api/auth/callback, 系统实际运行端口=8080
2025-08-01 22:02:16.282 [main] ERROR com.bgpay.bgai.cache.RedisRetryAspect - Redis操作在多次重试后失败 - 类: RedisTemplate, 方法: keys, 异常: Redis操作失败
java.lang.RuntimeException: Redis操作失败
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$retryAroundRedisOperations$0(RedisRetryAspect.java:53)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at com.bgpay.bgai.cache.RedisRetryAspect.retryAroundRedisOperations(RedisRetryAspect.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$1.keys(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:716)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$0.keys(<generated>)
	at com.bgpay.bgai.service.impl.UserServiceImpl.cleanupOldRedisData(UserServiceImpl.java:179)
	at com.bgpay.bgai.service.impl.UserServiceImpl.init(UserServiceImpl.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:422)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.NullPointerException: Cannot invoke "org.springframework.data.redis.connection.RedisConnection.isPipelined()" because "connToUse" is null
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:390)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:363)
	at org.springframework.data.redis.core.RedisTemplate.doWithKeys(RedisTemplate.java:775)
	at org.springframework.data.redis.core.RedisTemplate.keys(RedisTemplate.java:628)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$retryAroundRedisOperations$0(RedisRetryAspect.java:46)
	... 98 common frames omitted
2025-08-01 22:02:16.314 [main] ERROR com.bgpay.bgai.service.impl.UserServiceImpl - 清理旧的Redis数据时发生错误
java.lang.RuntimeException: Redis操作失败
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$retryAroundRedisOperations$0(RedisRetryAspect.java:53)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at com.bgpay.bgai.cache.RedisRetryAspect.retryAroundRedisOperations(RedisRetryAspect.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$1.keys(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:716)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$0.keys(<generated>)
	at com.bgpay.bgai.service.impl.UserServiceImpl.cleanupOldRedisData(UserServiceImpl.java:179)
	at com.bgpay.bgai.service.impl.UserServiceImpl.init(UserServiceImpl.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:422)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.NullPointerException: Cannot invoke "org.springframework.data.redis.connection.RedisConnection.isPipelined()" because "connToUse" is null
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:390)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:363)
	at org.springframework.data.redis.core.RedisTemplate.doWithKeys(RedisTemplate.java:775)
	at org.springframework.data.redis.core.RedisTemplate.keys(RedisTemplate.java:628)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$retryAroundRedisOperations$0(RedisRetryAspect.java:46)
	... 98 common frames omitted
2025-08-01 22:02:16.997 [main] WARN  o.s.b.w.r.c.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
2025-08-01 22:02:16.998 [main] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 22:02:17.002 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0x957e7e6e, L:/192.168.86.8:54375 ! R:/8.133.246.113:8091]
2025-08-01 22:02:17.002 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0x957e7e6e, L:/192.168.86.8:54375 ! R:/8.133.246.113:8091]
2025-08-01 22:02:17.002 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0x957e7e6e, L:/192.168.86.8:54375 ! R:/8.133.246.113:8091]
2025-08-01 22:02:17.002 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0x957e7e6e, L:/192.168.86.8:54375 ! R:/8.133.246.113:8091]
2025-08-01 22:02:17.002 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x957e7e6e, L:/192.168.86.8:54375 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:02:17.003 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x957e7e6e, L:/192.168.86.8:54375 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:02:17.003 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0x1fa9ca0f, L:/192.168.86.8:54383 ! R:/8.133.246.113:8091]
2025-08-01 22:02:17.003 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0x1fa9ca0f, L:/192.168.86.8:54383 ! R:/8.133.246.113:8091]
2025-08-01 22:02:17.003 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0x1fa9ca0f, L:/192.168.86.8:54383 ! R:/8.133.246.113:8091]
2025-08-01 22:02:17.003 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0x1fa9ca0f, L:/192.168.86.8:54383 ! R:/8.133.246.113:8091]
2025-08-01 22:02:17.003 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x1fa9ca0f, L:/192.168.86.8:54383 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:02:17.003 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x1fa9ca0f, L:/192.168.86.8:54383 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:02:17.006 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-08-01 22:02:17.043 [main] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-08-01 22:02:17.076 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 58 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 72 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 73 common frames omitted
2025-08-01 22:02:17.090 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 33 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 58 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 72 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 73 common frames omitted
2025-08-01 22:02:17.249 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 初始化测试类: SampleWebFluxControllerTest
2025-08-01 22:02:17.250 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid c4008493-5881-4f68-b98c-03ecd03c638b not found
2025-08-01 22:02:17.251 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 初始化WebFlux测试: SampleWebFluxControllerTest
2025-08-01 22:02:17.307 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.348 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testCreateMessage, testId: f64a5e16-de52-4378-a755-f919c043841f
2025-08-01 22:02:17.351 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 02067f13-4efc-41c7-ad7e-a9486e41143d not found
2025-08-01 22:02:17.351 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 02067f13-4efc-41c7-ad7e-a9486e41143d not found
2025-08-01 22:02:17.367 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testCreateMessage, testId: f64a5e16-de52-4378-a755-f919c043841f
2025-08-01 22:02:17.373 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.374 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.375 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.377 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.405 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.419 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testDeleteMessage, testId: be8a228a-93bd-4901-ba9f-ceabf1269ca4
2025-08-01 22:02:17.419 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 7898644d-83d1-4d14-80d9-b6c52b3ab29d not found
2025-08-01 22:02:17.419 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 7898644d-83d1-4d14-80d9-b6c52b3ab29d not found
2025-08-01 22:02:17.426 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testDeleteMessage, testId: be8a228a-93bd-4901-ba9f-ceabf1269ca4
2025-08-01 22:02:17.428 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.428 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.429 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.430 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.444 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.452 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testGetMessageById, testId: afa3deb1-5196-48c1-8fab-ea07f83cc776
2025-08-01 22:02:17.452 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid eb1bccee-efa8-4764-ab79-6403b0774027 not found
2025-08-01 22:02:17.452 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid eb1bccee-efa8-4764-ab79-6403b0774027 not found
2025-08-01 22:02:17.459 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testGetMessageById, testId: afa3deb1-5196-48c1-8fab-ea07f83cc776
2025-08-01 22:02:17.461 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.462 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.463 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.464 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.478 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.491 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testGetMessages, testId: 3804c0aa-07ef-478f-a523-e9384daffd24
2025-08-01 22:02:17.496 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid cf320270-faa7-47ba-9998-22f29e882adb not found
2025-08-01 22:02:17.496 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid cf320270-faa7-47ba-9998-22f29e882adb not found
2025-08-01 22:02:17.524 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testGetMessages, testId: 3804c0aa-07ef-478f-a523-e9384daffd24
2025-08-01 22:02:17.527 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.528 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.530 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.531 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.544 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.560 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testMessageStream, testId: a3b995c7-ad6c-4693-a9ec-8c55b952eaf1
2025-08-01 22:02:17.560 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid e1a29cdf-b2e5-4f74-890b-9043e6927c60 not found
2025-08-01 22:02:17.560 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid e1a29cdf-b2e5-4f74-890b-9043e6927c60 not found
2025-08-01 22:02:17.573 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testMessageStream, testId: a3b995c7-ad6c-4693-a9ec-8c55b952eaf1
2025-08-01 22:02:17.579 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.580 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.581 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.582 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.600 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.610 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testUpdateMessage, testId: a9f24b7c-f2f4-4ae8-93d8-7b86079cba78
2025-08-01 22:02:17.610 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid a863835d-ec75-4a9d-9c26-682c8e9a2aac not found
2025-08-01 22:02:17.610 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid a863835d-ec75-4a9d-9c26-682c8e9a2aac not found
2025-08-01 22:02:17.620 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testUpdateMessage, testId: a9f24b7c-f2f4-4ae8-93d8-7b86079cba78
2025-08-01 22:02:17.623 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.624 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.625 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:17.625 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@f096f73 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@60135b59 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:21.573 [main] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/Administrator/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/Administrator/.m2/repository/org/json/json/20220320/json-20220320.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-08-01 22:02:21.575 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-08-01 22:02:21.576 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - The following 1 profile is active: "dev"
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'allowedFileTypeMapper' and 'com.bgpay.bgai.mapper.AllowedFileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiClientMapper' and 'com.bgpay.bgai.mapper.ApiClientMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiConfigMapper' and 'com.bgpay.bgai.mapper.ApiConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiKeyMapper' and 'com.bgpay.bgai.mapper.ApiKeyMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'chatCompletionsMapper' and 'com.bgpay.bgai.mapper.ChatCompletionsMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'choicesMapper' and 'com.bgpay.bgai.mapper.ChoicesMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'fileTypeMapper' and 'com.bgpay.bgai.mapper.FileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceConfigMapper' and 'com.bgpay.bgai.mapper.PriceConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceVersionMapper' and 'com.bgpay.bgai.mapper.PriceVersionMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'transactionLogMapper' and 'com.bgpay.bgai.mapper.TransactionLogMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageInfoMapper' and 'com.bgpay.bgai.mapper.UsageInfoMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageRecordMapper' and 'com.bgpay.bgai.mapper.UsageRecordMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'userMapper' and 'com.bgpay.bgai.mapper.UserMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:02:22.050 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - No MyBatis mapper was found in '[com.bgpay.bgai.mapper]' package. Please check your configuration.
2025-08-01 22:02:22.051 [main] WARN  o.s.c.annotation.ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'gatewayBeanFactoryPostProcessor' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static' and/or marking the containing configuration class as 'proxyBeanMethods=false'.
2025-08-01 22:02:22.076 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'unifiedEnvironmentConfig' of type [com.bgpay.bgai.config.UnifiedEnvironmentConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:22.076 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'environment' of type [org.springframework.core.env.StandardEnvironment] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:22.119 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'testBeanPostProcessor' of type [com.bgpay.bgai.config.TestBeanPostProcessor$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [bgaiServiceImplInjector] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 22:02:22.122 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'messageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:22.125 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:22.138 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:22.141 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'listenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:02:22.290 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - SeataDisableConfiguration已加载，Seata在测试环境中被禁用
2025-08-01 22:02:22.290 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - 设置系统属性: seata.enabled=false, saga.enabled=false
2025-08-01 22:02:22.396 [main] INFO  com.bgpay.bgai.config.NacosRouteConfigListener - 初始化Nacos路由配置监听器
2025-08-01 22:02:22.397 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:02:22.398 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:02:22.399 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of d26aec34-e468-4002-852f-a95c4fe7c332_config-0
2025-08-01 22:02:22.399 [main] INFO  com.alibaba.nacos.common.remote.client - [d26aec34-e468-4002-852f-a95c4fe7c332_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000021bb36083e0
2025-08-01 22:02:22.399 [main] INFO  com.alibaba.nacos.common.remote.client - [d26aec34-e468-4002-852f-a95c4fe7c332_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000021bb36087f0
2025-08-01 22:02:22.399 [main] INFO  com.alibaba.nacos.common.remote.client - [d26aec34-e468-4002-852f-a95c4fe7c332_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:02:22.399 [main] INFO  com.alibaba.nacos.common.remote.client - [d26aec34-e468-4002-852f-a95c4fe7c332_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:02:22.399 [main] INFO  com.alibaba.nacos.common.remote.client - [d26aec34-e468-4002-852f-a95c4fe7c332_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:02:22.399 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:02:22.613 [main] INFO  com.alibaba.nacos.common.remote.client - [d26aec34-e468-4002-852f-a95c4fe7c332_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754056942476_139.227.195.146_4143
2025-08-01 22:02:22.613 [main] INFO  com.alibaba.nacos.common.remote.client - [d26aec34-e468-4002-852f-a95c4fe7c332_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:02:22.613 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [d26aec34-e468-4002-852f-a95c4fe7c332_config-0] Notify connected event to listeners.
2025-08-01 22:02:22.613 [main] INFO  com.alibaba.nacos.common.remote.client - [d26aec34-e468-4002-852f-a95c4fe7c332_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x0000021bb37491a8
2025-08-01 22:02:22.613 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [d26aec34-e468-4002-852f-a95c4fe7c332_config-0] Connected,notify listen context...
2025-08-01 22:02:22.627 [main] WARN  com.bgpay.bgai.config.NacosRouteConfigListener - Nacos中未找到路由配置数据
2025-08-01 22:02:22.627 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:02:22.627 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 22:02:22.636 [main] INFO  c.bgpay.bgai.config.NacosRouteDefinitionRepository - 初始化Nacos路由定义存储库
2025-08-01 22:02:22.638 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:02:22.638 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:02:22.639 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 94bcbb96-e159-4542-b703-e6fdd783edc5_config-0
2025-08-01 22:02:22.639 [main] INFO  com.alibaba.nacos.common.remote.client - [94bcbb96-e159-4542-b703-e6fdd783edc5_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000021bb36083e0
2025-08-01 22:02:22.639 [main] INFO  com.alibaba.nacos.common.remote.client - [94bcbb96-e159-4542-b703-e6fdd783edc5_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000021bb36087f0
2025-08-01 22:02:22.639 [main] INFO  com.alibaba.nacos.common.remote.client - [94bcbb96-e159-4542-b703-e6fdd783edc5_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:02:22.639 [main] INFO  com.alibaba.nacos.common.remote.client - [94bcbb96-e159-4542-b703-e6fdd783edc5_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:02:22.640 [main] INFO  com.alibaba.nacos.common.remote.client - [94bcbb96-e159-4542-b703-e6fdd783edc5_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:02:22.640 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:02:22.770 [main] INFO  com.alibaba.nacos.common.remote.client - [94bcbb96-e159-4542-b703-e6fdd783edc5_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754056942703_139.227.195.146_4147
2025-08-01 22:02:22.770 [main] INFO  com.alibaba.nacos.common.remote.client - [94bcbb96-e159-4542-b703-e6fdd783edc5_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:02:22.770 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [94bcbb96-e159-4542-b703-e6fdd783edc5_config-0] Notify connected event to listeners.
2025-08-01 22:02:22.770 [main] INFO  com.alibaba.nacos.common.remote.client - [94bcbb96-e159-4542-b703-e6fdd783edc5_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x0000021bb37491a8
2025-08-01 22:02:22.770 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [94bcbb96-e159-4542-b703-e6fdd783edc5_config-0] Connected,notify listen context...
2025-08-01 22:02:22.785 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 22:02:22.786 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:02:22.786 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 22:02:22.846 [main] INFO  com.bgpay.bgai.config.RestTemplateConfig - Creating RestTemplate bean using SimpleClientHttpRequestFactory
2025-08-01 22:02:22.943 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - WebServerApplicationContext不可用或WebServer为null，使用配置端口: 8688
2025-08-01 22:02:22.943 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 初始化SSO配置: clientId=bgai-client-id, 使用端口=8688
2025-08-01 22:02:22.943 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 根据实际端口生成redirectUri: http://localhost:8688/api/auth/callback
2025-08-01 22:02:22.943 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - SSO URL配置已更新: redirectUri=http://localhost:8688/api/auth/callback, 系统实际运行端口=8688
2025-08-01 22:02:22.943 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 测试环境中跳过Redis数据清理
2025-08-01 22:02:23.045 [main] WARN  o.s.b.w.r.c.GenericReactiveWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
2025-08-01 22:02:23.046 [main] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-08-01 22:02:23.050 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 57 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 71 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 72 common frames omitted
2025-08-01 22:02:23.051 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: Failed to load ApplicationContext for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 33 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 57 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 71 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 72 common frames omitted
2025-08-01 22:02:23.061 [main] INFO  com.bgpay.bgai.base.YamlDataProvider - 从YAML文件加载测试数据: src/test/resources/test-data/ReactiveYamlDataDrivenApiTest/testChatApi.yml
2025-08-01 22:02:23.061 [main] WARN  com.bgpay.bgai.base.YamlDataProvider - YAML文件不存在: src/test/resources/test-data/ReactiveYamlDataDrivenApiTest/testChatApi.yml
2025-08-01 22:02:23.064 [main] INFO  com.bgpay.bgai.base.YamlDataProvider - 从指定YAML文件加载测试数据: src/test/resources/test-data/api/reactive-users.yml
2025-08-01 22:02:23.102 [main] ERROR io.qameta.allure.AllureLifecycle - Could not add attachment: no test is running
2025-08-01 22:02:23.129 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.137 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: bb123f77-0351-4bf3-9465-34403ef51841
2025-08-01 22:02:23.137 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid c294e9e5-7c2c-47c5-919d-fef826c6c711 not found
2025-08-01 22:02:23.137 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid c294e9e5-7c2c-47c5-919d-fef826c6c711 not found
2025-08-01 22:02:23.170 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.171 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.172 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.172 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.181 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.212 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 2a1ddaf5-0297-42bc-9570-a35a6e711583
2025-08-01 22:02:23.212 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 7e85cefa-e133-4abd-85c5-705f38d1fb8a not found
2025-08-01 22:02:23.212 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 7e85cefa-e133-4abd-85c5-705f38d1fb8a not found
2025-08-01 22:02:23.219 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.220 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.222 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.222 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.255 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.259 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 8654eb13-7675-4a64-ae7e-8fbaed22ef1f
2025-08-01 22:02:23.259 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 01c133f4-004f-4235-b891-d445ce12cbdd not found
2025-08-01 22:02:23.259 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 01c133f4-004f-4235-b891-d445ce12cbdd not found
2025-08-01 22:02:23.285 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.285 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.286 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.286 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.292 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.324 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: c6b03db0-b725-449a-ad5a-92b842e4e08e
2025-08-01 22:02:23.324 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 2bb59962-aade-4248-bd80-37487162dea2 not found
2025-08-01 22:02:23.324 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 2bb59962-aade-4248-bd80-37487162dea2 not found
2025-08-01 22:02:23.328 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.329 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.329 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.330 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.361 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.367 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 267f6121-8aa9-4c23-a69f-b01698696fe9
2025-08-01 22:02:23.367 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid f7043631-4541-4c80-90c0-51537e08f1fe not found
2025-08-01 22:02:23.368 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid f7043631-4541-4c80-90c0-51537e08f1fe not found
2025-08-01 22:02:23.396 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.397 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.398 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.398 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.405 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.434 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 864576c2-7dd8-46c8-80c2-a22b7e7faaeb
2025-08-01 22:02:23.434 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 61b9bdbb-c4a5-4099-9c7f-9cce862340a2 not found
2025-08-01 22:02:23.434 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 61b9bdbb-c4a5-4099-9c7f-9cce862340a2 not found
2025-08-01 22:02:23.440 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.441 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.442 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.443 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.470 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.474 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 203a4483-9f6f-4c0f-8488-2b82cc462c78
2025-08-01 22:02:23.474 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 990f0c37-540d-4e16-a398-121cf6a792b2 not found
2025-08-01 22:02:23.474 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 990f0c37-540d-4e16-a398-121cf6a792b2 not found
2025-08-01 22:02:23.499 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.500 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.500 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.501 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@695c8b32]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@5f06c6c8 testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@5142a060 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.509 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.513 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 初始化测试类: SampleWebFluxControllerTest
2025-08-01 22:02:23.513 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 015298e7-2bc5-4306-87c1-5d7ba26add81 not found
2025-08-01 22:02:23.513 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 初始化WebFlux测试: SampleWebFluxControllerTest
2025-08-01 22:02:23.515 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.559 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testCreateMessage, testId: 1dab976f-e97a-410c-8023-2136f0e97886
2025-08-01 22:02:23.559 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid f8564b21-6950-42d1-a3f1-bbbb370f835e not found
2025-08-01 22:02:23.560 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid f8564b21-6950-42d1-a3f1-bbbb370f835e not found
2025-08-01 22:02:23.564 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testCreateMessage, testId: 1dab976f-e97a-410c-8023-2136f0e97886
2025-08-01 22:02:23.590 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.590 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.591 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.591 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.602 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.626 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testDeleteMessage, testId: c491a2d5-ee9a-4be7-a69f-f2c4e836e173
2025-08-01 22:02:23.627 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 0bfe4b06-0d20-4659-8cb3-75e7352ea5ac not found
2025-08-01 22:02:23.627 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 0bfe4b06-0d20-4659-8cb3-75e7352ea5ac not found
2025-08-01 22:02:23.633 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testDeleteMessage, testId: c491a2d5-ee9a-4be7-a69f-f2c4e836e173
2025-08-01 22:02:23.636 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.636 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.637 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.638 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.662 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.672 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testGetMessageById, testId: ecca0973-880f-4d81-b13e-eee4dc4653c6
2025-08-01 22:02:23.672 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 7d9fb346-2ea6-4cab-b7c4-dbb429a10bf4 not found
2025-08-01 22:02:23.672 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 7d9fb346-2ea6-4cab-b7c4-dbb429a10bf4 not found
2025-08-01 22:02:23.695 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testGetMessageById, testId: ecca0973-880f-4d81-b13e-eee4dc4653c6
2025-08-01 22:02:23.697 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.698 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.699 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.699 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.726 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.729 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testGetMessages, testId: 530a2c91-3066-4c2a-b609-541a8d0bf6fb
2025-08-01 22:02:23.730 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 8947f065-8e32-4e4e-9036-b7d2cf1ed8b9 not found
2025-08-01 22:02:23.730 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 8947f065-8e32-4e4e-9036-b7d2cf1ed8b9 not found
2025-08-01 22:02:23.750 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testGetMessages, testId: 530a2c91-3066-4c2a-b609-541a8d0bf6fb
2025-08-01 22:02:23.752 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.752 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.753 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.753 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.758 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.794 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testMessageStream, testId: 151689d7-2ab9-4870-96c4-7c96a31068c5
2025-08-01 22:02:23.795 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 5d681c6e-a1ec-47ac-b92d-9a9e772c4064 not found
2025-08-01 22:02:23.795 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 5d681c6e-a1ec-47ac-b92d-9a9e772c4064 not found
2025-08-01 22:02:23.840 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testMessageStream, testId: 151689d7-2ab9-4870-96c4-7c96a31068c5
2025-08-01 22:02:23.842 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.843 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.843 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.844 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.875 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.902 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testUpdateMessage, testId: 0fc67e66-9004-42c2-8be6-175bc5ee2882
2025-08-01 22:02:23.902 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 73b14c9d-559f-44f2-9a16-8fd752193072 not found
2025-08-01 22:02:23.902 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 73b14c9d-559f-44f2-9a16-8fd752193072 not found
2025-08-01 22:02:23.918 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testUpdateMessage, testId: 0fc67e66-9004-42c2-8be6-175bc5ee2882
2025-08-01 22:02:23.920 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.921 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.921 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:02:23.921 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@1adec8d]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@70d68e55 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@46c8a5b4 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:28.878 [main] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/Administrator/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/Administrator/.m2/repository/org/json/json/20220320/json-20220320.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-08-01 22:04:28.890 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-08-01 22:04:28.891 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - The following 1 profile is active: "dev"
2025-08-01 22:04:31.276 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-01 22:04:31.278 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-01 22:04:31.352 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.bgpay.bgai.repository.es.ChatRecordRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-08-01 22:04:31.353 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 51 ms. Found 0 JPA repository interfaces.
2025-08-01 22:04:31.588 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'allowedFileTypeMapper' and 'com.bgpay.bgai.mapper.AllowedFileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.589 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiClientMapper' and 'com.bgpay.bgai.mapper.ApiClientMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.589 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiConfigMapper' and 'com.bgpay.bgai.mapper.ApiConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.589 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiKeyMapper' and 'com.bgpay.bgai.mapper.ApiKeyMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.589 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'chatCompletionsMapper' and 'com.bgpay.bgai.mapper.ChatCompletionsMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.589 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'choicesMapper' and 'com.bgpay.bgai.mapper.ChoicesMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.589 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'fileTypeMapper' and 'com.bgpay.bgai.mapper.FileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.589 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceConfigMapper' and 'com.bgpay.bgai.mapper.PriceConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.589 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceVersionMapper' and 'com.bgpay.bgai.mapper.PriceVersionMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.590 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'transactionLogMapper' and 'com.bgpay.bgai.mapper.TransactionLogMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.590 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageInfoMapper' and 'com.bgpay.bgai.mapper.UsageInfoMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.590 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageRecordMapper' and 'com.bgpay.bgai.mapper.UsageRecordMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.590 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'userMapper' and 'com.bgpay.bgai.mapper.UserMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:31.591 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - No MyBatis mapper was found in '[com.bgpay.bgai.mapper]' package. Please check your configuration.
2025-08-01 22:04:31.714 [main] WARN  o.s.c.annotation.ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'gatewayBeanFactoryPostProcessor' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static' and/or marking the containing configuration class as 'proxyBeanMethods=false'.
2025-08-01 22:04:35.607 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:35.608 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:35.609 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:35.677 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:35.685 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:35.691 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:35.692 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda/0x0000025d16a22600] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:35.693 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:35.705 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:35.710 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [globalTransactionScanner]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:35.719 [main] INFO  i.s.s.boot.autoconfigure.SeataAutoConfiguration - Automatically configure Seata
2025-08-01 22:04:35.827 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 22:04:35.844 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 22:04:35.854 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Initializing Global Transaction Clients ... 
2025-08-01 22:04:35.961 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 22:04:35.963 [main] INFO  io.seata.discovery.registry.RegistryFactory - use registry center type: file
2025-08-01 22:04:35.981 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 22:04:35.986 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:TMROLE,address:8.133.246.113:8091,msg:< RegisterTMRequest{version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='ak=
digest=default_tx_group,192.168.86.8,1754057075985
timestamp=1754057075985
authVersion=V4
vgroup=default_tx_group
ip=192.168.86.8
'} >
2025-08-01 22:04:36.176 [main] INFO  io.seata.core.rpc.netty.TmNettyRemotingClient - register TM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0x4a06d4c1, L:/192.168.86.8:55035 - R:/8.133.246.113:8091]
2025-08-01 22:04:36.185 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 77 ms, version:1.8.1-SNAPSHOT,role:TMROLE,channel:[id: 0x4a06d4c1, L:/192.168.86.8:55035 - R:/8.133.246.113:8091]
2025-08-01 22:04:36.186 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Transaction Manager Client is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 22:04:36.205 [main] INFO  io.seata.rm.datasource.AsyncWorker - Async Commit Buffer Limit: 10000
2025-08-01 22:04:36.206 [main] INFO  io.seata.rm.datasource.xa.ResourceManagerXA - ResourceManagerXA init ...
2025-08-01 22:04:36.214 [main] INFO  io.seata.core.rpc.netty.NettyClientBootstrap - NettyClientBootstrap has started
2025-08-01 22:04:36.214 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Resource Manager is initialized. applicationId[bgai] txServiceGroup[default_tx_group]
2025-08-01 22:04:36.214 [main] INFO  i.seata.spring.annotation.GlobalTransactionScanner - Global Transaction Clients are initialized. 
2025-08-01 22:04:36.221 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'unifiedEnvironmentConfig' of type [com.bgpay.bgai.config.UnifiedEnvironmentConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [persistenceExceptionTranslationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:36.223 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'environment' of type [org.springframework.core.env.StandardEnvironment] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [persistenceExceptionTranslationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:36.407 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource.dynamic-com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:36.531 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration' of type [com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:36.562 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dsProcessor' of type [com.baomidou.dynamic.datasource.processor.jakarta.DsJakartaHeaderProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:37.064 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'messageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:37.186 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:37.203 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:37.211 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'listenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:37.230 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'testBeanPostProcessor' of type [com.bgpay.bgai.config.TestBeanPostProcessor$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [bgaiServiceImplInjector] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 22:04:37.299 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 22:04:37.320 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:37.325 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:37.783 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-08-01 22:04:37.801 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - The ["http-nio-auto-1"] connector has been configured to support HTTP upgrade to [h2c]
2025-08-01 22:04:37.801 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-1"]
2025-08-01 22:04:37.804 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-08-01 22:04:37.805 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.20]
2025-08-01 22:04:38.184 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-08-01 22:04:38.576 [main] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - will connect to 8.133.246.113:8091
2025-08-01 22:04:38.577 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - RM will register :jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 22:04:38.577 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - NettyPool create channel to transactionRole:RMROLE,address:8.133.246.113:8091,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://8.133.246.113:3306/deepseek', version='1.7.0', applicationId='bgai', transactionServiceGroup='default_tx_group', extraData='null'} >
2025-08-01 22:04:38.607 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - register RM success. client version:1.7.0, server version:1.8.1-SNAPSHOT,channel:[id: 0xfeb54769, L:/192.168.86.8:55039 - R:/8.133.246.113:8091]
2025-08-01 22:04:38.607 [main] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - register success, cost 13 ms, version:1.8.1-SNAPSHOT,role:RMROLE,channel:[id: 0xfeb54769, L:/192.168.86.8:55039 - R:/8.133.246.113:8091]
2025-08-01 22:04:38.629 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: masterDataSource
2025-08-01 22:04:38.664 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-2} inited
2025-08-01 22:04:38.734 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 22:04:38.738 [main] WARN  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Manually register SeataDataSourceProxy(or its subclass) bean is discouraged! bean name: slaveDataSource
2025-08-01 22:04:38.743 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 22:04:38.764 [main] INFO  io.seata.core.rpc.netty.RmNettyRemotingClient - will register resourceId:jdbc:mysql://8.133.246.113:3306/deepseek
2025-08-01 22:04:38.765 [main] INFO  i.s.s.a.datasource.SeataAutoDataSourceProxyCreator - Auto proxy data source 'dynamicDataSource' by 'AT' mode.
2025-08-01 22:04:38.774 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.rm.AbstractRMHandler - the rm client received response msg [RegisterRMResponse{version='1.8.1-SNAPSHOT', extraData='null', identified=true, resultCode=null, msg='null'}] from tc server.
2025-08-01 22:04:38.921 [main] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-01 22:04:39.004 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
2025-08-01 22:04:39.058 [main] INFO  o.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-08-01 22:04:39.245 [main] INFO  o.s.o.j.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-01 22:04:39.337 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-01 22:04:39.339 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-01 22:04:40.173 [main] INFO  o.h.e.t.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-01 22:04:40.179 [main] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 22:04:40.709 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - SeataDisableConfiguration已加载，Seata在测试环境中被禁用
2025-08-01 22:04:40.709 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - 设置系统属性: seata.enabled=false, saga.enabled=false
2025-08-01 22:04:41.212 [main] INFO  com.bgpay.bgai.config.NacosRouteConfigListener - 初始化Nacos路由配置监听器
2025-08-01 22:04:41.215 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:04:41.216 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:04:41.216 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 2a9d55d6-738a-45f8-8f3a-73fb337c9026_config-0
2025-08-01 22:04:41.217 [main] INFO  com.alibaba.nacos.common.remote.client - [2a9d55d6-738a-45f8-8f3a-73fb337c9026_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000025d16615308
2025-08-01 22:04:41.217 [main] INFO  com.alibaba.nacos.common.remote.client - [2a9d55d6-738a-45f8-8f3a-73fb337c9026_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000025d16615718
2025-08-01 22:04:41.217 [main] INFO  com.alibaba.nacos.common.remote.client - [2a9d55d6-738a-45f8-8f3a-73fb337c9026_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:04:41.217 [main] INFO  com.alibaba.nacos.common.remote.client - [2a9d55d6-738a-45f8-8f3a-73fb337c9026_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:04:41.217 [main] INFO  com.alibaba.nacos.common.remote.client - [2a9d55d6-738a-45f8-8f3a-73fb337c9026_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:04:41.217 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:04:41.368 [main] INFO  com.alibaba.nacos.common.remote.client - [2a9d55d6-738a-45f8-8f3a-73fb337c9026_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754057081288_139.227.195.146_3667
2025-08-01 22:04:41.368 [main] INFO  com.alibaba.nacos.common.remote.client - [2a9d55d6-738a-45f8-8f3a-73fb337c9026_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:04:41.368 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [2a9d55d6-738a-45f8-8f3a-73fb337c9026_config-0] Notify connected event to listeners.
2025-08-01 22:04:41.368 [main] INFO  com.alibaba.nacos.common.remote.client - [2a9d55d6-738a-45f8-8f3a-73fb337c9026_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x0000025d167562d8
2025-08-01 22:04:41.368 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [2a9d55d6-738a-45f8-8f3a-73fb337c9026_config-0] Connected,notify listen context...
2025-08-01 22:04:41.382 [main] WARN  com.bgpay.bgai.config.NacosRouteConfigListener - Nacos中未找到路由配置数据
2025-08-01 22:04:41.384 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-08-01 22:04:41.385 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:04:41.393 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 22:04:41.405 [main] INFO  c.bgpay.bgai.config.NacosRouteDefinitionRepository - 初始化Nacos路由定义存储库
2025-08-01 22:04:41.407 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:04:41.407 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:04:41.408 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 5e5c7831-3394-4338-841c-88324b35adf5_config-0
2025-08-01 22:04:41.408 [main] INFO  com.alibaba.nacos.common.remote.client - [5e5c7831-3394-4338-841c-88324b35adf5_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000025d16615308
2025-08-01 22:04:41.408 [main] INFO  com.alibaba.nacos.common.remote.client - [5e5c7831-3394-4338-841c-88324b35adf5_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000025d16615718
2025-08-01 22:04:41.408 [main] INFO  com.alibaba.nacos.common.remote.client - [5e5c7831-3394-4338-841c-88324b35adf5_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:04:41.408 [main] INFO  com.alibaba.nacos.common.remote.client - [5e5c7831-3394-4338-841c-88324b35adf5_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:04:41.408 [main] INFO  com.alibaba.nacos.common.remote.client - [5e5c7831-3394-4338-841c-88324b35adf5_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:04:41.409 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:04:41.581 [main] INFO  com.alibaba.nacos.common.remote.client - [5e5c7831-3394-4338-841c-88324b35adf5_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754057081470_139.227.195.146_3668
2025-08-01 22:04:41.581 [main] INFO  com.alibaba.nacos.common.remote.client - [5e5c7831-3394-4338-841c-88324b35adf5_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:04:41.581 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [5e5c7831-3394-4338-841c-88324b35adf5_config-0] Notify connected event to listeners.
2025-08-01 22:04:41.581 [main] INFO  com.alibaba.nacos.common.remote.client - [5e5c7831-3394-4338-841c-88324b35adf5_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x0000025d167562d8
2025-08-01 22:04:41.581 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [5e5c7831-3394-4338-841c-88324b35adf5_config-0] Connected,notify listen context...
2025-08-01 22:04:41.603 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 22:04:41.603 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:04:41.604 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 22:04:42.359 [main] INFO  com.bgpay.bgai.config.RestTemplateConfig - Creating RestTemplate bean using SimpleClientHttpRequestFactory
2025-08-01 22:04:42.392 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-08-01 22:04:42.394 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-08-01 22:04:42.405 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 从WebServerApplicationContext获取实际端口: 8080
2025-08-01 22:04:42.406 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 初始化SSO配置: clientId=bgai-client-id, 使用端口=8080
2025-08-01 22:04:42.407 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 根据实际端口生成redirectUri: http://localhost:8080/api/auth/callback
2025-08-01 22:04:42.407 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - SSO URL配置已更新: redirectUri=http://localhost:8080/api/auth/callback, 系统实际运行端口=8080
2025-08-01 22:04:42.695 [main] ERROR com.bgpay.bgai.cache.RedisRetryAspect - Redis操作在多次重试后失败 - 类: RedisTemplate, 方法: keys, 异常: Redis操作失败
java.lang.RuntimeException: Redis操作失败
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$retryAroundRedisOperations$0(RedisRetryAspect.java:53)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at com.bgpay.bgai.cache.RedisRetryAspect.retryAroundRedisOperations(RedisRetryAspect.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$1.keys(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:716)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$0.keys(<generated>)
	at com.bgpay.bgai.service.impl.UserServiceImpl.cleanupOldRedisData(UserServiceImpl.java:179)
	at com.bgpay.bgai.service.impl.UserServiceImpl.init(UserServiceImpl.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:422)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.NullPointerException: Cannot invoke "org.springframework.data.redis.connection.RedisConnection.isPipelined()" because "connToUse" is null
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:390)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:363)
	at org.springframework.data.redis.core.RedisTemplate.doWithKeys(RedisTemplate.java:775)
	at org.springframework.data.redis.core.RedisTemplate.keys(RedisTemplate.java:628)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$retryAroundRedisOperations$0(RedisRetryAspect.java:46)
	... 98 common frames omitted
2025-08-01 22:04:42.703 [main] ERROR com.bgpay.bgai.service.impl.UserServiceImpl - 清理旧的Redis数据时发生错误
java.lang.RuntimeException: Redis操作失败
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$retryAroundRedisOperations$0(RedisRetryAspect.java:53)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:335)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:211)
	at com.bgpay.bgai.cache.RedisRetryAspect.retryAroundRedisOperations(RedisRetryAspect.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$1.keys(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:716)
	at org.springframework.data.redis.core.RedisTemplate$$SpringCGLIB$$0.keys(<generated>)
	at com.bgpay.bgai.service.impl.UserServiceImpl.cleanupOldRedisData(UserServiceImpl.java:179)
	at com.bgpay.bgai.service.impl.UserServiceImpl.init(UserServiceImpl.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:422)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.NullPointerException: Cannot invoke "org.springframework.data.redis.connection.RedisConnection.isPipelined()" because "connToUse" is null
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:390)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:363)
	at org.springframework.data.redis.core.RedisTemplate.doWithKeys(RedisTemplate.java:775)
	at org.springframework.data.redis.core.RedisTemplate.keys(RedisTemplate.java:628)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:354)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.bgpay.bgai.cache.RedisRetryAspect.lambda$retryAroundRedisOperations$0(RedisRetryAspect.java:46)
	... 98 common frames omitted
2025-08-01 22:04:43.131 [main] WARN  o.s.b.w.r.c.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
2025-08-01 22:04:43.131 [main] INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-01 22:04:43.135 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0x4a06d4c1, L:/192.168.86.8:55035 ! R:/8.133.246.113:8091]
2025-08-01 22:04:43.135 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0x4a06d4c1, L:/192.168.86.8:55035 ! R:/8.133.246.113:8091]
2025-08-01 22:04:43.135 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0x4a06d4c1, L:/192.168.86.8:55035 ! R:/8.133.246.113:8091]
2025-08-01 22:04:43.135 [NettyClientSelector_TMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0x4a06d4c1, L:/192.168.86.8:55035 ! R:/8.133.246.113:8091]
2025-08-01 22:04:43.135 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x4a06d4c1, L:/192.168.86.8:55035 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:04:43.135 [NettyClientSelector_TMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x4a06d4c1, L:/192.168.86.8:55035 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:04:43.136 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - channel inactive: [id: 0xfeb54769, L:/192.168.86.8:55039 ! R:/8.133.246.113:8091]
2025-08-01 22:04:43.136 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyClientChannelManager - return to pool, rm channel:[id: 0xfeb54769, L:/192.168.86.8:55039 ! R:/8.133.246.113:8091]
2025-08-01 22:04:43.136 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - channel valid false,channel:[id: 0xfeb54769, L:/192.168.86.8:55039 ! R:/8.133.246.113:8091]
2025-08-01 22:04:43.136 [NettyClientSelector_RMROLE_1_1] INFO  io.seata.core.rpc.netty.NettyPoolableFactory - will destroy channel:[id: 0xfeb54769, L:/192.168.86.8:55039 ! R:/8.133.246.113:8091]
2025-08-01 22:04:43.136 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xfeb54769, L:/192.168.86.8:55039 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:04:43.136 [NettyClientSelector_RMROLE_1_1] INFO  i.seata.core.rpc.netty.AbstractNettyRemotingClient - ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xfeb54769, L:/192.168.86.8:55039 ! R:/8.133.246.113:8091]) will closed
2025-08-01 22:04:43.139 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-08-01 22:04:43.162 [main] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-08-01 22:04:43.184 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 58 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 72 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 73 common frames omitted
2025-08-01 22:04:43.196 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 33 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 58 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 72 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 73 common frames omitted
2025-08-01 22:04:43.333 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 初始化测试类: SampleWebFluxControllerTest
2025-08-01 22:04:43.334 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid abb4dfe9-2138-4315-a8cc-a150bc298d3d not found
2025-08-01 22:04:43.334 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 初始化WebFlux测试: SampleWebFluxControllerTest
2025-08-01 22:04:43.359 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.384 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testCreateMessage, testId: 047b415c-806b-4142-999c-0836626b52a7
2025-08-01 22:04:43.385 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 75c8189c-83df-4e14-9425-271462953993 not found
2025-08-01 22:04:43.385 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 75c8189c-83df-4e14-9425-271462953993 not found
2025-08-01 22:04:43.399 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testCreateMessage, testId: 047b415c-806b-4142-999c-0836626b52a7
2025-08-01 22:04:43.402 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.402 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.403 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.403 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.422 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.430 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testDeleteMessage, testId: d40fbd85-56e2-45ed-9668-9ed9f67765b7
2025-08-01 22:04:43.430 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 56c447a4-460b-4283-8d65-45a782138285 not found
2025-08-01 22:04:43.431 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 56c447a4-460b-4283-8d65-45a782138285 not found
2025-08-01 22:04:43.437 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testDeleteMessage, testId: d40fbd85-56e2-45ed-9668-9ed9f67765b7
2025-08-01 22:04:43.440 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.441 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.442 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.442 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.455 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.464 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testGetMessageById, testId: 6415bede-3112-4842-a081-e67fe1cc8cba
2025-08-01 22:04:43.464 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 963649cc-c499-40c9-9a6f-607577bacd42 not found
2025-08-01 22:04:43.464 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 963649cc-c499-40c9-9a6f-607577bacd42 not found
2025-08-01 22:04:43.473 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testGetMessageById, testId: 6415bede-3112-4842-a081-e67fe1cc8cba
2025-08-01 22:04:43.475 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.475 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.476 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.476 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.484 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.490 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testGetMessages, testId: 831b63cd-e63f-4cf3-95e8-358ecbd38205
2025-08-01 22:04:43.490 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 2b66ef52-0939-4afe-933d-8e744738580a not found
2025-08-01 22:04:43.490 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 2b66ef52-0939-4afe-933d-8e744738580a not found
2025-08-01 22:04:43.498 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testGetMessages, testId: 831b63cd-e63f-4cf3-95e8-358ecbd38205
2025-08-01 22:04:43.500 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.501 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.502 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.502 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.509 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.518 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testMessageStream, testId: 4f74f9f2-5b1f-4c19-bd45-1c41cb132329
2025-08-01 22:04:43.518 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 3351ee04-c3e0-402c-84be-843c07290ce1 not found
2025-08-01 22:04:43.518 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 3351ee04-c3e0-402c-84be-843c07290ce1 not found
2025-08-01 22:04:43.522 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testMessageStream, testId: 4f74f9f2-5b1f-4c19-bd45-1c41cb132329
2025-08-01 22:04:43.524 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.524 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.525 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.525 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.535 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.542 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testUpdateMessage, testId: aefeddc7-7382-43bd-99a6-d7477e9f7781
2025-08-01 22:04:43.542 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid c4af7f54-8fb6-41e7-b580-e7bb1e073b74 not found
2025-08-01 22:04:43.542 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid c4af7f54-8fb6-41e7-b580-e7bb1e073b74 not found
2025-08-01 22:04:43.549 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testUpdateMessage, testId: aefeddc7-7382-43bd-99a6-d7477e9f7781
2025-08-01 22:04:43.551 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.551 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.552 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:43.552 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@40ed1802]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@13c2016c testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@37389825 key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:46.776 [main] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/Administrator/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/Administrator/.m2/repository/org/json/json/20220320/json-20220320.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-08-01 22:04:46.778 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-08-01 22:04:46.778 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - The following 1 profile is active: "dev"
2025-08-01 22:04:47.280 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'allowedFileTypeMapper' and 'com.bgpay.bgai.mapper.AllowedFileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiClientMapper' and 'com.bgpay.bgai.mapper.ApiClientMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiConfigMapper' and 'com.bgpay.bgai.mapper.ApiConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiKeyMapper' and 'com.bgpay.bgai.mapper.ApiKeyMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'chatCompletionsMapper' and 'com.bgpay.bgai.mapper.ChatCompletionsMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'choicesMapper' and 'com.bgpay.bgai.mapper.ChoicesMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'fileTypeMapper' and 'com.bgpay.bgai.mapper.FileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceConfigMapper' and 'com.bgpay.bgai.mapper.PriceConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceVersionMapper' and 'com.bgpay.bgai.mapper.PriceVersionMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'transactionLogMapper' and 'com.bgpay.bgai.mapper.TransactionLogMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageInfoMapper' and 'com.bgpay.bgai.mapper.UsageInfoMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageRecordMapper' and 'com.bgpay.bgai.mapper.UsageRecordMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'userMapper' and 'com.bgpay.bgai.mapper.UserMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:04:47.281 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - No MyBatis mapper was found in '[com.bgpay.bgai.mapper]' package. Please check your configuration.
2025-08-01 22:04:47.286 [main] WARN  o.s.c.annotation.ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'gatewayBeanFactoryPostProcessor' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static' and/or marking the containing configuration class as 'proxyBeanMethods=false'.
2025-08-01 22:04:47.318 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'unifiedEnvironmentConfig' of type [com.bgpay.bgai.config.UnifiedEnvironmentConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:47.319 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'environment' of type [org.springframework.core.env.StandardEnvironment] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:47.404 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'testBeanPostProcessor' of type [com.bgpay.bgai.config.TestBeanPostProcessor$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [bgaiServiceImplInjector] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 22:04:47.413 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'messageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:47.416 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:47.437 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:47.439 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'listenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:04:47.624 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - SeataDisableConfiguration已加载，Seata在测试环境中被禁用
2025-08-01 22:04:47.624 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - 设置系统属性: seata.enabled=false, saga.enabled=false
2025-08-01 22:04:47.732 [main] INFO  com.bgpay.bgai.config.NacosRouteConfigListener - 初始化Nacos路由配置监听器
2025-08-01 22:04:47.733 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:04:47.733 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:04:47.734 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of af5b8719-49d5-43f1-ad68-c51cd1707691_config-0
2025-08-01 22:04:47.734 [main] INFO  com.alibaba.nacos.common.remote.client - [af5b8719-49d5-43f1-ad68-c51cd1707691_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000025d16615308
2025-08-01 22:04:47.734 [main] INFO  com.alibaba.nacos.common.remote.client - [af5b8719-49d5-43f1-ad68-c51cd1707691_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000025d16615718
2025-08-01 22:04:47.734 [main] INFO  com.alibaba.nacos.common.remote.client - [af5b8719-49d5-43f1-ad68-c51cd1707691_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:04:47.734 [main] INFO  com.alibaba.nacos.common.remote.client - [af5b8719-49d5-43f1-ad68-c51cd1707691_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:04:47.735 [main] INFO  com.alibaba.nacos.common.remote.client - [af5b8719-49d5-43f1-ad68-c51cd1707691_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:04:47.735 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:04:47.871 [main] INFO  com.alibaba.nacos.common.remote.client - [af5b8719-49d5-43f1-ad68-c51cd1707691_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754057087798_139.227.195.146_3693
2025-08-01 22:04:47.871 [main] INFO  com.alibaba.nacos.common.remote.client - [af5b8719-49d5-43f1-ad68-c51cd1707691_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:04:47.871 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [af5b8719-49d5-43f1-ad68-c51cd1707691_config-0] Notify connected event to listeners.
2025-08-01 22:04:47.871 [main] INFO  com.alibaba.nacos.common.remote.client - [af5b8719-49d5-43f1-ad68-c51cd1707691_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x0000025d167562d8
2025-08-01 22:04:47.871 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [af5b8719-49d5-43f1-ad68-c51cd1707691_config-0] Connected,notify listen context...
2025-08-01 22:04:47.882 [main] WARN  com.bgpay.bgai.config.NacosRouteConfigListener - Nacos中未找到路由配置数据
2025-08-01 22:04:47.882 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:04:47.883 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 22:04:47.885 [main] INFO  c.bgpay.bgai.config.NacosRouteDefinitionRepository - 初始化Nacos路由定义存储库
2025-08-01 22:04:47.886 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:04:47.886 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:04:47.886 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 4121da2d-de84-4b3e-8117-4f899a0a4025_config-0
2025-08-01 22:04:47.887 [main] INFO  com.alibaba.nacos.common.remote.client - [4121da2d-de84-4b3e-8117-4f899a0a4025_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000025d16615308
2025-08-01 22:04:47.887 [main] INFO  com.alibaba.nacos.common.remote.client - [4121da2d-de84-4b3e-8117-4f899a0a4025_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x0000025d16615718
2025-08-01 22:04:47.887 [main] INFO  com.alibaba.nacos.common.remote.client - [4121da2d-de84-4b3e-8117-4f899a0a4025_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:04:47.887 [main] INFO  com.alibaba.nacos.common.remote.client - [4121da2d-de84-4b3e-8117-4f899a0a4025_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:04:47.887 [main] INFO  com.alibaba.nacos.common.remote.client - [4121da2d-de84-4b3e-8117-4f899a0a4025_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:04:47.887 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:04:48.014 [main] INFO  com.alibaba.nacos.common.remote.client - [4121da2d-de84-4b3e-8117-4f899a0a4025_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754057087947_139.227.195.146_3695
2025-08-01 22:04:48.014 [main] INFO  com.alibaba.nacos.common.remote.client - [4121da2d-de84-4b3e-8117-4f899a0a4025_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:04:48.014 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [4121da2d-de84-4b3e-8117-4f899a0a4025_config-0] Notify connected event to listeners.
2025-08-01 22:04:48.014 [main] INFO  com.alibaba.nacos.common.remote.client - [4121da2d-de84-4b3e-8117-4f899a0a4025_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x0000025d167562d8
2025-08-01 22:04:48.014 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [4121da2d-de84-4b3e-8117-4f899a0a4025_config-0] Connected,notify listen context...
2025-08-01 22:04:48.024 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 22:04:48.024 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:04:48.024 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 22:04:48.075 [main] INFO  com.bgpay.bgai.config.RestTemplateConfig - Creating RestTemplate bean using SimpleClientHttpRequestFactory
2025-08-01 22:04:48.123 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - WebServerApplicationContext不可用或WebServer为null，使用配置端口: 8688
2025-08-01 22:04:48.124 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 初始化SSO配置: clientId=bgai-client-id, 使用端口=8688
2025-08-01 22:04:48.124 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 根据实际端口生成redirectUri: http://localhost:8688/api/auth/callback
2025-08-01 22:04:48.124 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - SSO URL配置已更新: redirectUri=http://localhost:8688/api/auth/callback, 系统实际运行端口=8688
2025-08-01 22:04:48.124 [main] INFO  com.bgpay.bgai.service.impl.UserServiceImpl - 测试环境中跳过Redis数据清理
2025-08-01 22:04:48.189 [main] WARN  o.s.b.w.r.c.GenericReactiveWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
2025-08-01 22:04:48.190 [main] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-08-01 22:04:48.193 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 57 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 71 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 72 common frames omitted
2025-08-01 22:04:48.195 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: Failed to load ApplicationContext for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'enhancedChatController' defined in file [E:\project\bgai\target\classes\com\bgpay\bgai\controller\EnhancedChatController.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 33 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'deepSeekServiceImp' defined in class path resource [com/bgpay/bgai/config/RemoveDeepSeekServiceImpConfig.class]: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 57 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.bgpay.bgai.service.deepseek.DeepSeekService]: Factory method 'removeDeepSeekServiceImp' threw exception with message: deepSeekServiceImp should not be created in test context
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644)
	... 71 common frames omitted
Caused by: java.lang.IllegalStateException: deepSeekServiceImp should not be created in test context
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig.removeDeepSeekServiceImp(RemoveDeepSeekServiceImpConfig.java:13)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.CGLIB$removeDeepSeekServiceImp$0(<generated>)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at com.bgpay.bgai.config.RemoveDeepSeekServiceImpConfig$$SpringCGLIB$$0.removeDeepSeekServiceImp(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 72 common frames omitted
2025-08-01 22:04:48.202 [main] INFO  com.bgpay.bgai.base.YamlDataProvider - 从YAML文件加载测试数据: src/test/resources/test-data/ReactiveYamlDataDrivenApiTest/testChatApi.yml
2025-08-01 22:04:48.202 [main] WARN  com.bgpay.bgai.base.YamlDataProvider - YAML文件不存在: src/test/resources/test-data/ReactiveYamlDataDrivenApiTest/testChatApi.yml
2025-08-01 22:04:48.203 [main] INFO  com.bgpay.bgai.base.YamlDataProvider - 从指定YAML文件加载测试数据: src/test/resources/test-data/api/reactive-users.yml
2025-08-01 22:04:48.232 [main] ERROR io.qameta.allure.AllureLifecycle - Could not add attachment: no test is running
2025-08-01 22:04:48.235 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.241 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: a3fd6e06-1c98-4cc0-bb05-fba8b5e0be4f
2025-08-01 22:04:48.241 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 6ff46fcc-0eba-437e-88d3-6f3138a56203 not found
2025-08-01 22:04:48.241 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 6ff46fcc-0eba-437e-88d3-6f3138a56203 not found
2025-08-01 22:04:48.246 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.246 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.247 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.247 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.254 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.259 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 22065e31-2105-48e0-8bd5-ffaece784253
2025-08-01 22:04:48.259 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 68606899-b3b0-48b3-8895-4de783190fc0 not found
2025-08-01 22:04:48.259 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 68606899-b3b0-48b3-8895-4de783190fc0 not found
2025-08-01 22:04:48.265 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.265 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.266 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.266 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.273 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.278 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 2302d7b3-b651-4565-bf01-477b5d7e32cf
2025-08-01 22:04:48.278 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid c7b3f249-852c-464c-a3bc-c8db5de804e0 not found
2025-08-01 22:04:48.278 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid c7b3f249-852c-464c-a3bc-c8db5de804e0 not found
2025-08-01 22:04:48.283 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.284 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.284 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.285 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.291 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.296 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 5504dc97-bc86-4949-bd91-d2084a72b5aa
2025-08-01 22:04:48.296 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid fcb963d6-a8c4-496f-97d0-3e786e49589f not found
2025-08-01 22:04:48.296 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid fcb963d6-a8c4-496f-97d0-3e786e49589f not found
2025-08-01 22:04:48.301 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.301 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.302 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.303 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.308 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.313 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: c360916e-4cb2-44e8-afee-39bb76766eb1
2025-08-01 22:04:48.314 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 3b93d211-b206-4b35-9cd8-9f5a2a778084 not found
2025-08-01 22:04:48.314 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 3b93d211-b206-4b35-9cd8-9f5a2a778084 not found
2025-08-01 22:04:48.318 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.319 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.319 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.319 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.325 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.330 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: b10716d9-8371-4f5d-b0ba-81ee32d54ddf
2025-08-01 22:04:48.330 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid eb65f6fb-63c1-4a3a-ba20-78c514f306f8 not found
2025-08-01 22:04:48.330 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid eb65f6fb-63c1-4a3a-ba20-78c514f306f8 not found
2025-08-01 22:04:48.336 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.336 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.337 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.338 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.346 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.352 [main] INFO  c.b.bgai.controller.ReactiveYamlDataDrivenApiTest - 开始执行测试方法: testUserApi, testId: 3d66b398-d055-442e-ad04-faa8550f7d25
2025-08-01 22:04:48.353 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 5ce62bff-63df-4662-b149-f45cd8b86a93 not found
2025-08-01 22:04:48.353 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 5ce62bff-63df-4662-b149-f45cd8b86a93 not found
2025-08-01 22:04:48.357 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.358 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.358 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.359 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest.testUserApi(java.util.Map)] and test instance [com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest@4c9bed65]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [ReactiveWebMergedContextConfiguration@c96533a testClass = com.bgpay.bgai.controller.ReactiveYamlDataDrivenApiTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[classpath:application-test.yml], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.cloud.gateway.enabled=false", "spring.autoconfigure.exclude=org.springframework.cloud.gateway.config.GatewayAutoConfiguration", "org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3e32f0b2 key = [com.bgpay.bgai.config.UsageInfoServiceMockConfig, com.bgpay.bgai.config.ApiKeyServiceMockConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, com.bgpay.bgai.config.MockEnvironmentConfig, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, com.bgpay.bgai.config.ElasticsearchAutoConfigurationDisabler, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, com.bgpay.bgai.config.PriceVersionServiceImplMockConfig, com.bgpay.bgai.config.LoadBalancerTestConfig, com.bgpay.bgai.config.TestGatewayRouteConfigProvider, com.bgpay.bgai.config.ChoicesMapperMockConfig, com.bgpay.bgai.config.RocketMQTestConfig, com.bgpay.bgai.config.WebClientBeanExclusionConfig, com.bgpay.bgai.config.CircuitBreakerTestConfig, com.bgpay.bgai.config.MockWebClientConfig, com.bgpay.bgai.config.ServiceDiscoveryMockConfig, com.bgpay.bgai.config.TestComponentScanFilterRegistrar, com.bgpay.bgai.config.WebClientTestOverrideConfig, com.bgpay.bgai.config.ElasticsearchMockConfig, com.bgpay.bgai.config.WebClientBuilderUnifier, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, com.bgpay.bgai.config.ChatCompletionsServiceImplMockConfig, com.bgpay.bgai.config.CompleteGatewayDisablingConfig, com.bgpay.bgai.config.GatewayBeanFactoryPostProcessor, org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration, com.bgpay.bgai.config.ApiConfigServiceMockConfig, org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration, com.bgpay.bgai.config.DeepSeekWebClientMockConfig, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, com.bgpay.bgai.config.ExcludeMainWebClientConfig, com.bgpay.bgai.config.WebClientAutoConfigurationDisabler, com.bgpay.bgai.config.ReactiveWebMockConfig, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, com.bgpay.bgai.config.TestWebFluxConfig, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.bgpay.bgai.config.CircuitBreakerAutoConfigurationDisabler, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, com.bgpay.bgai.config.UserServiceMockConfig, com.bgpay.bgai.config.MyBatisMockConfig, com.bgpay.bgai.config.BGAIServiceMockConfig, com.bgpay.bgai.config.ApplicationTestConfig, com.bgpay.bgai.config.PriceConfigServiceImplMockConfig, com.bgpay.bgai.config.CloudDiscoveryAutoConfigurationDisabler, com.bgpay.bgai.config.ChoicesServiceImplMockConfig, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, com.bgpay.bgai.config.TestApplicationEnvironmentConfig, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, com.bgpay.bgai.config.KeyResolverBeanPostProcessor, org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration, com.bgpay.bgai.config.WebClientConfigMock, com.bgpay.bgai.config.GatewayRouteConfigReplacement, com.bgpay.bgai.config.MockExtConsumerResetConfig, com.bgpay.bgai.config.ChatCompletionsMapperMockConfig, com.bgpay.bgai.config.DeepSeekServiceMockConfig, com.bgpay.bgai.config.ReactiveChatControllerMockConfig, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, com.bgpay.bgai.config.ReactiveLoadBalancerConfig, com.bgpay.bgai.config.TestGatewayRouteConfigDisabler, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, com.bgpay.bgai.config.ValidationAutoConfigurationDisabler, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, com.bgpay.bgai.config.AllMappersMockConfig, com.bgpay.bgai.config.LoadBalancerAutoConfigurationDisabler, com.bgpay.bgai.config.SpringTestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3d299393, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@aebf76d6, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d090ca6b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@3266d348], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.370 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:119)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:176)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:122)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.374 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 初始化测试类: SampleWebFluxControllerTest
2025-08-01 22:04:48.374 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 8cc72040-047c-4cb1-870a-32295ad9ca83 not found
2025-08-01 22:04:48.374 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 初始化WebFlux测试: SampleWebFluxControllerTest
2025-08-01 22:04:48.376 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.390 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testCreateMessage, testId: ab5afc4a-beef-4184-9e16-bd4888b172c0
2025-08-01 22:04:48.390 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 665a5834-2754-420b-8385-e7c8b7c8c267 not found
2025-08-01 22:04:48.391 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 665a5834-2754-420b-8385-e7c8b7c8c267 not found
2025-08-01 22:04:48.396 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testCreateMessage, testId: ab5afc4a-beef-4184-9e16-bd4888b172c0
2025-08-01 22:04:48.398 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.399 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.399 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.400 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testCreateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.408 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.416 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testDeleteMessage, testId: e332a695-6027-49a6-9b82-cb55b30d6d0e
2025-08-01 22:04:48.416 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid c90ab71a-d528-4756-b5a7-ece435740e82 not found
2025-08-01 22:04:48.416 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid c90ab71a-d528-4756-b5a7-ece435740e82 not found
2025-08-01 22:04:48.420 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testDeleteMessage, testId: e332a695-6027-49a6-9b82-cb55b30d6d0e
2025-08-01 22:04:48.422 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.422 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.422 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.423 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testDeleteMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.431 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.438 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testGetMessageById, testId: 27064989-3344-4b92-a0ee-1fc5d116a053
2025-08-01 22:04:48.439 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 8584be4f-7027-4b52-a6f1-8bea71c1ab1b not found
2025-08-01 22:04:48.439 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 8584be4f-7027-4b52-a6f1-8bea71c1ab1b not found
2025-08-01 22:04:48.443 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testGetMessageById, testId: 27064989-3344-4b92-a0ee-1fc5d116a053
2025-08-01 22:04:48.446 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.446 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.447 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.447 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessageById()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.452 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.457 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testGetMessages, testId: 30368700-a351-4b29-abff-776f21a3b0ae
2025-08-01 22:04:48.457 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 84a77023-5267-4ad8-a396-92d11f62c84c not found
2025-08-01 22:04:48.457 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 84a77023-5267-4ad8-a396-92d11f62c84c not found
2025-08-01 22:04:48.462 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testGetMessages, testId: 30368700-a351-4b29-abff-776f21a3b0ae
2025-08-01 22:04:48.464 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.464 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.465 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.465 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testGetMessages()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.472 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.476 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testMessageStream, testId: 9ff3a399-71d4-429e-8a11-820af50e4b67
2025-08-01 22:04:48.477 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 7991a1c1-f203-4e82-8599-f739ed62ac83 not found
2025-08-01 22:04:48.477 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid 7991a1c1-f203-4e82-8599-f739ed62ac83 not found
2025-08-01 22:04:48.481 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testMessageStream, testId: 9ff3a399-71d4-429e-8a11-820af50e4b67
2025-08-01 22:04:48.482 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.482 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.483 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.483 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testMessageStream()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.489 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.beforeTestMethod(ResetMocksTestExecutionListener.java:60)
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextBeforeTestMethod(AbstractTestNGSpringContextTests.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:523)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.493 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 开始执行测试方法: testUpdateMessage, testId: de55c0e6-913b-4862-a708-063246cd74e2
2025-08-01 22:04:48.493 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid be06fcb9-6ce3-4cdd-b951-a3dca21aeb91 not found
2025-08-01 22:04:48.494 [main] ERROR io.qameta.allure.AllureLifecycle - Could not update test case: test case with uuid be06fcb9-6ce3-4cdd-b951-a3dca21aeb91 not found
2025-08-01 22:04:48.498 [main] INFO  c.b.bgai.controller.SampleWebFluxControllerTest - 测试方法执行完成: testUpdateMessage, testId: de55c0e6-913b-4862-a708-063246cd74e2
2025-08-01 22:04:48.500 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener.afterTestMethod(WebDriverTestExecutionListener.java:42)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.500 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener.afterTestMethod(MockMvcPrintOnlyOnFailureTestExecutionListener.java:39)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.501 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener.afterTestMethod(MockRestServiceServerResetTestExecutionListener.java:40)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:04:48.501 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void com.bgpay.bgai.controller.SampleWebFluxControllerTest.testUpdateMessage()] and test instance [com.bgpay.bgai.controller.SampleWebFluxControllerTest@4629dde5]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3c9c0c21 testClass = com.bgpay.bgai.controller.SampleWebFluxControllerTest, locations = [], classes = [com.bgpay.bgai.BgaiApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [PropertySourceDescriptor[locations=[], ignoreResourceNotFound=false, name=null, propertySourceFactory=null, encoding=null]], propertySourceProperties = ["spring.main.allow-bean-definition-overriding=true", "seata.enabled=false", "saga.enabled=false", "seata.saga.state-machine.auto-register=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@14abbf key = [org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1fc713c9, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@161aa04a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@71f1cc02, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@6f8aba08, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@470d183, org.springframework.boot.test.context.SpringBootTestAnnotation@f0789119], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
	at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextAfterTestMethod(AbstractTestNGSpringContextTests.java:183)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:134)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:63)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:348)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:302)
	at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:695)
	at org.testng.internal.TestInvoker.runAfterGroupsConfigurations(TestInvoker.java:671)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:543)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:816)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.testng.TestRunner.privateRun(TestRunner.java:766)
	at org.testng.TestRunner.run(TestRunner.java:587)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1109)
	at org.testng.TestNG.runSuites(TestNG.java:1039)
	at org.testng.TestNG.run(TestNG.java:1007)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:308)
	at org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:71)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-08-01 22:15:56.491 [main] WARN  o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/Administrator/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/Administrator/.m2/repository/org/json/json/20220320/json-20220320.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-08-01 22:15:56.512 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-08-01 22:15:56.515 [main] INFO  c.b.b.c.ReactiveChatControllerYamlWebFluxTest - The following 1 profile is active: "dev"
2025-08-01 22:15:59.349 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'allowedFileTypeMapper' and 'com.bgpay.bgai.mapper.AllowedFileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.350 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiClientMapper' and 'com.bgpay.bgai.mapper.ApiClientMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.350 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiConfigMapper' and 'com.bgpay.bgai.mapper.ApiConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.350 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'apiKeyMapper' and 'com.bgpay.bgai.mapper.ApiKeyMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.350 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'chatCompletionsMapper' and 'com.bgpay.bgai.mapper.ChatCompletionsMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.350 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'choicesMapper' and 'com.bgpay.bgai.mapper.ChoicesMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.350 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'fileTypeMapper' and 'com.bgpay.bgai.mapper.FileTypeMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.351 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceConfigMapper' and 'com.bgpay.bgai.mapper.PriceConfigMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.351 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'priceVersionMapper' and 'com.bgpay.bgai.mapper.PriceVersionMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.351 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'transactionLogMapper' and 'com.bgpay.bgai.mapper.TransactionLogMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.351 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageInfoMapper' and 'com.bgpay.bgai.mapper.UsageInfoMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.351 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'usageRecordMapper' and 'com.bgpay.bgai.mapper.UsageRecordMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.351 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - Skipping MapperFactoryBean with name 'userMapper' and 'com.bgpay.bgai.mapper.UserMapper' mapperInterface. Bean already defined with the same name!
2025-08-01 22:15:59.352 [main] WARN  org.mybatis.spring.mapper.ClassPathMapperScanner - No MyBatis mapper was found in '[com.bgpay.bgai.mapper]' package. Please check your configuration.
2025-08-01 22:15:59.354 [main] WARN  o.s.c.annotation.ConfigurationClassPostProcessor - Cannot enhance @Configuration bean definition 'gatewayBeanFactoryPostProcessor' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static' and/or marking the containing configuration class as 'proxyBeanMethods=false'.
2025-08-01 22:16:05.993 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'unifiedEnvironmentConfig' of type [com.bgpay.bgai.config.UnifiedEnvironmentConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:16:05.995 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'environment' of type [org.springframework.core.env.StandardEnvironment] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:16:06.860 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'messageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:16:06.961 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:16:06.992 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:16:06.996 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'listenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [org.apache.rocketmq.spring.annotation.RocketMQMessageListenerBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-08-01 22:16:07.006 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'testBeanPostProcessor' of type [com.bgpay.bgai.config.TestBeanPostProcessor$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [bgaiServiceImplInjector] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-08-01 22:16:07.486 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - SeataDisableConfiguration已加载，Seata在测试环境中被禁用
2025-08-01 22:16:07.487 [main] INFO  com.bgpay.bgai.config.SeataDisableConfiguration - 设置系统属性: seata.enabled=false, saga.enabled=false
2025-08-01 22:16:07.849 [main] INFO  com.bgpay.bgai.config.NacosRouteConfigListener - 初始化Nacos路由配置监听器
2025-08-01 22:16:07.851 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:16:07.852 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:16:07.853 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of ac602f04-0b13-4aa7-bc84-1526e8917b74_config-0
2025-08-01 22:16:07.853 [main] INFO  com.alibaba.nacos.common.remote.client - [ac602f04-0b13-4aa7-bc84-1526e8917b74_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ec484fb338
2025-08-01 22:16:07.853 [main] INFO  com.alibaba.nacos.common.remote.client - [ac602f04-0b13-4aa7-bc84-1526e8917b74_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ec484fb748
2025-08-01 22:16:07.853 [main] INFO  com.alibaba.nacos.common.remote.client - [ac602f04-0b13-4aa7-bc84-1526e8917b74_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:16:07.853 [main] INFO  com.alibaba.nacos.common.remote.client - [ac602f04-0b13-4aa7-bc84-1526e8917b74_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:16:07.854 [main] INFO  com.alibaba.nacos.common.remote.client - [ac602f04-0b13-4aa7-bc84-1526e8917b74_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:16:07.855 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:16:07.999 [main] INFO  com.alibaba.nacos.common.remote.client - [ac602f04-0b13-4aa7-bc84-1526e8917b74_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754057767925_139.227.195.146_3104
2025-08-01 22:16:08.000 [main] INFO  com.alibaba.nacos.common.remote.client - [ac602f04-0b13-4aa7-bc84-1526e8917b74_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:16:08.000 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [ac602f04-0b13-4aa7-bc84-1526e8917b74_config-0] Notify connected event to listeners.
2025-08-01 22:16:08.000 [main] INFO  com.alibaba.nacos.common.remote.client - [ac602f04-0b13-4aa7-bc84-1526e8917b74_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001ec4865da70
2025-08-01 22:16:08.000 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [ac602f04-0b13-4aa7-bc84-1526e8917b74_config-0] Connected,notify listen context...
2025-08-01 22:16:08.017 [main] WARN  com.bgpay.bgai.config.NacosRouteConfigListener - Nacos中未找到路由配置数据
2025-08-01 22:16:08.022 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-08-01 22:16:08.023 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:16:08.044 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 22:16:08.050 [main] INFO  c.bgpay.bgai.config.NacosRouteDefinitionRepository - 初始化Nacos路由定义存储库
2025-08-01 22:16:08.057 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:16:08.057 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:16:08.059 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 9211f98f-9434-42df-8cdf-9b745f6d5de2_config-0
2025-08-01 22:16:08.059 [main] INFO  com.alibaba.nacos.common.remote.client - [9211f98f-9434-42df-8cdf-9b745f6d5de2_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ec484fb338
2025-08-01 22:16:08.059 [main] INFO  com.alibaba.nacos.common.remote.client - [9211f98f-9434-42df-8cdf-9b745f6d5de2_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ec484fb748
2025-08-01 22:16:08.060 [main] INFO  com.alibaba.nacos.common.remote.client - [9211f98f-9434-42df-8cdf-9b745f6d5de2_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:16:08.060 [main] INFO  com.alibaba.nacos.common.remote.client - [9211f98f-9434-42df-8cdf-9b745f6d5de2_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:16:08.061 [main] INFO  com.alibaba.nacos.common.remote.client - [9211f98f-9434-42df-8cdf-9b745f6d5de2_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:16:08.061 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:16:08.214 [main] INFO  com.alibaba.nacos.common.remote.client - [9211f98f-9434-42df-8cdf-9b745f6d5de2_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754057768128_139.227.195.146_3105
2025-08-01 22:16:08.215 [main] INFO  com.alibaba.nacos.common.remote.client - [9211f98f-9434-42df-8cdf-9b745f6d5de2_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:16:08.215 [main] INFO  com.alibaba.nacos.common.remote.client - [9211f98f-9434-42df-8cdf-9b745f6d5de2_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001ec4865da70
2025-08-01 22:16:08.215 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [9211f98f-9434-42df-8cdf-9b745f6d5de2_config-0] Notify connected event to listeners.
2025-08-01 22:16:08.216 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [9211f98f-9434-42df-8cdf-9b745f6d5de2_config-0] Connected,notify listen context...
2025-08-01 22:16:08.231 [main] WARN  c.bgpay.bgai.config.NacosRouteDefinitionRepository - Nacos中未找到路由定义配置
2025-08-01 22:16:08.235 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:16:08.236 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 22:16:09.354 [main] INFO  com.bgpay.bgai.config.RestTemplateConfig - Creating RestTemplate bean using SimpleClientHttpRequestFactory
2025-08-01 22:16:09.624 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Seata事务监听器初始化
2025-08-01 22:16:09.625 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - 已设置seata.saga.state-machine.auto-register=false，防止状态机重复注册
2025-08-01 22:16:10.679 [main] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 初始化动态路由服务
2025-08-01 22:16:10.685 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:16:10.686 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:16:10.690 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of c6c4a090-8355-4c18-90c2-d59bdc20e364_config-0
2025-08-01 22:16:10.690 [main] INFO  com.alibaba.nacos.common.remote.client - [c6c4a090-8355-4c18-90c2-d59bdc20e364_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ec484fb338
2025-08-01 22:16:10.690 [main] INFO  com.alibaba.nacos.common.remote.client - [c6c4a090-8355-4c18-90c2-d59bdc20e364_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ec484fb748
2025-08-01 22:16:10.690 [main] INFO  com.alibaba.nacos.common.remote.client - [c6c4a090-8355-4c18-90c2-d59bdc20e364_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:16:10.690 [main] INFO  com.alibaba.nacos.common.remote.client - [c6c4a090-8355-4c18-90c2-d59bdc20e364_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:16:10.691 [main] INFO  com.alibaba.nacos.common.remote.client - [c6c4a090-8355-4c18-90c2-d59bdc20e364_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:16:10.691 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:16:10.893 [main] INFO  com.alibaba.nacos.common.remote.client - [c6c4a090-8355-4c18-90c2-d59bdc20e364_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754057770792_139.227.195.146_3115
2025-08-01 22:16:10.894 [main] INFO  com.alibaba.nacos.common.remote.client - [c6c4a090-8355-4c18-90c2-d59bdc20e364_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:16:10.894 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [c6c4a090-8355-4c18-90c2-d59bdc20e364_config-0] Notify connected event to listeners.
2025-08-01 22:16:10.894 [main] INFO  com.alibaba.nacos.common.remote.client - [c6c4a090-8355-4c18-90c2-d59bdc20e364_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001ec4865da70
2025-08-01 22:16:10.894 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [c6c4a090-8355-4c18-90c2-d59bdc20e364_config-0] Connected,notify listen context...
2025-08-01 22:16:10.929 [main] WARN  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - Nacos中没有找到路由配置，使用默认配置
2025-08-01 22:16:10.930 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] gateway-routes+DEFAULT_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:16:10.930 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=gateway-routes, group=DEFAULT_GROUP, cnt=1
2025-08-01 22:16:10.930 [main] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 注册Nacos配置监听器成功
2025-08-01 22:16:12.945 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (billing-producer-group) init on namesrv 8.133.246.113:9876
2025-08-01 22:16:17.785 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-08-01 22:16:18.646 [main] INFO  io.seata.config.ConfigurationFactory - load Configuration from :Spring Configuration
2025-08-01 22:16:18.736 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-08-01 22:16:18.737 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-08-01 22:16:18.738 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 79258f1a-8ad4-4ebd-a065-6a47b2b20902_config-0
2025-08-01 22:16:18.738 [main] INFO  com.alibaba.nacos.common.remote.client - [79258f1a-8ad4-4ebd-a065-6a47b2b20902_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ec484fb338
2025-08-01 22:16:18.739 [main] INFO  com.alibaba.nacos.common.remote.client - [79258f1a-8ad4-4ebd-a065-6a47b2b20902_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda/0x000001ec484fb748
2025-08-01 22:16:18.739 [main] INFO  com.alibaba.nacos.common.remote.client - [79258f1a-8ad4-4ebd-a065-6a47b2b20902_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-08-01 22:16:18.739 [main] INFO  com.alibaba.nacos.common.remote.client - [79258f1a-8ad4-4ebd-a065-6a47b2b20902_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-08-01 22:16:18.739 [main] INFO  com.alibaba.nacos.common.remote.client - [79258f1a-8ad4-4ebd-a065-6a47b2b20902_config-0] Try to connect to server on start up, server: {serverIp = '8.133.246.113', server main port = 8848}
2025-08-01 22:16:18.740 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:8.133.246.113 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-08-01 22:16:19.096 [main] INFO  com.alibaba.nacos.common.remote.client - [79258f1a-8ad4-4ebd-a065-6a47b2b20902_config-0] Success to connect to server [8.133.246.113:8848] on start up, connectionId = 1754057778845_139.227.195.146_3158
2025-08-01 22:16:19.096 [main] INFO  com.alibaba.nacos.common.remote.client - [79258f1a-8ad4-4ebd-a065-6a47b2b20902_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-08-01 22:16:19.096 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [79258f1a-8ad4-4ebd-a065-6a47b2b20902_config-0] Notify connected event to listeners.
2025-08-01 22:16:19.096 [main] INFO  com.alibaba.nacos.common.remote.client - [79258f1a-8ad4-4ebd-a065-6a47b2b20902_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda/0x000001ec4865da70
2025-08-01 22:16:19.096 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [79258f1a-8ad4-4ebd-a065-6a47b2b20902_config-0] Connected,notify listen context...
2025-08-01 22:16:19.172 [main] INFO  io.seata.rm.datasource.AsyncWorker - Async Commit Buffer Limit: 10000
2025-08-01 22:16:19.173 [main] INFO  io.seata.rm.datasource.xa.ResourceManagerXA - ResourceManagerXA init ...
2025-08-01 22:16:19.580 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [subscribe] transport.enableRmClientBatchSendRequest+SEATA_GROUP+d750d92e-152f-4055-a641-3bc9dda85a29
2025-08-01 22:16:19.581 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=1
2025-08-01 22:16:19.582 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-d750d92e-152f-4055-a641-3bc9dda85a29-8.133.246.113_8848] [add-listener] ok, tenant=d750d92e-152f-4055-a641-3bc9dda85a29, dataId=transport.enableRmClientBatchSendRequest, group=SEATA_GROUP, cnt=2
2025-08-01 22:16:19.643 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-2} inited
2025-08-01 22:16:19.780 [main] INFO  com.bgpay.bgai.service.deepseek.ConfigLoader - 配置文件 deepseek-config.properties 加载成功
2025-08-01 22:16:23.412 [main] INFO  org.springframework.mock.web.MockServletContext - Initializing Spring TestDispatcherServlet ''
2025-08-01 22:16:23.413 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-08-01 22:16:23.422 [main] INFO  o.s.test.web.servlet.TestDispatcherServlet - Completed initialization in 6 ms
2025-08-01 22:16:23.437 [main] INFO  com.bgpay.bgai.controller.AuthController - 初始化认证控制器: clientId=bgai-client-id, 配置的端口=8688
2025-08-01 22:16:23.438 [main] INFO  com.bgpay.bgai.controller.AuthController - 根据实际端口生成redirectUri: http://localhost:8688/api/auth/callback
2025-08-01 22:16:23.438 [main] INFO  com.bgpay.bgai.controller.AuthController - 认证控制器URL配置已更新: redirectUri=http://localhost:8688/api/auth/callback, 系统实际运行端口=8688
2025-08-01 22:16:26.730 [main] INFO  org.redisson.Version - Redisson 3.24.3
2025-08-01 22:16:27.195 [redisson-netty-2-6] INFO  o.r.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-08-01 22:16:27.256 [redisson-netty-2-11] INFO  org.redisson.connection.pool.MasterConnectionPool - 4 connections initialized for 8.133.246.113/8.133.246.113:6379
2025-08-01 22:16:27.960 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 加载到2个Saga状态机定义文件
2025-08-01 22:16:27.965 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 成功加载状态机定义: /E:/project/bgai/target/classes/statelang/bgai-saga-transaction.json
2025-08-01 22:16:27.968 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 成功加载状态机定义: /E:/project/bgai/target/classes/statelang/chat_completion_saga.json
2025-08-01 22:16:27.970 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已设置saga.state-machine.auto-register=false，防止状态机重复注册
2025-08-01 22:16:28.576 [main] INFO  c.b.b.controller.ServiceDiscoveryExampleController - ServiceDiscoveryExampleController initialized with: serviceDiscoveryUtils=available, loadBalancedWebClient=not available, loadBalancedRestTemplate=available, restTemplate=available
2025-08-01 22:16:29.864 [main] DEBUG com.bgpay.bgai.config.AsyncConfig$1 - Initializing ExecutorService 'blockingExecutor'
2025-08-01 22:16:30.086 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - Seata Saga配置加载
2025-08-01 22:16:30.086 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - 状态机自动注册设置: 禁用
2025-08-01 22:16:30.086 [main] INFO  com.bgpay.bgai.seata.SeataAuthConfig - 状态机自动注册已禁用，这将防止重复注册错误
2025-08-01 22:16:32.174 [main] INFO  o.s.scheduling.config.TaskSchedulerRouter - No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
2025-08-01 22:16:32.183 [main] INFO  c.b.b.c.ReactiveChatControllerYamlWebFluxTest - Started ReactiveChatControllerYamlWebFluxTest in 39.401 seconds (process running for 70.943)
2025-08-01 22:16:32.189 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - ==================== Saga状态机加载报告 ====================
2025-08-01 22:16:32.190 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - Saga状态机配置加载状态: 成功
2025-08-01 22:16:32.190 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已加载的状态机定义文件数量: 2
2025-08-01 22:16:32.190 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 已加载的状态机定义文件:
2025-08-01 22:16:32.190 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig -  - /E:/project/bgai/target/classes/statelang/bgai-saga-transaction.json
2025-08-01 22:16:32.190 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig -  - /E:/project/bgai/target/classes/statelang/chat_completion_saga.json
2025-08-01 22:16:32.191 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - Saga解析器状态: Mock JSON Parser
2025-08-01 22:16:32.191 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - Mock parsing results
2025-08-01 22:16:32.191 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - 状态机自动注册已禁用(saga.state-machine.auto-register=false)，避免重复注册错误
2025-08-01 22:16:32.191 [main] INFO  com.bgpay.bgai.seata.SagaStateMachineConfig - =============================================================
2025-08-01 22:16:32.192 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - 应用程序已就绪，Seata事务监听器激活
2025-08-01 22:16:32.192 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener - Seata配置信息:
2025-08-01 22:16:32.192 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - seata.saga.state-machine.auto-register: false
2025-08-01 22:16:32.192 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - seata.enabled: false
2025-08-01 22:16:32.192 [main] INFO  com.bgpay.bgai.seata.SeataTransactionListener -  - saga.enabled: false
2025-08-01 22:16:32.479 [main] ERROR o.s.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> POST /api/chatGatWay-internal
> WebTestClient-Request-Id: [1]
> Content-Type: [application/json, application/json]
> X-API-Key: [valid-key]
> Content-Length: [79]

{"question":"Hello, how are you?","modelName":"gpt-3.5-turbo","multiTurn":true}

< 200 OK OK
< 

0 bytes of content (unknown content-type).

2025-08-01 22:16:32.568 [main] ERROR o.s.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> POST /api/chatGatWay-internal
> WebTestClient-Request-Id: [2]
> Content-Type: [application/json, application/json]
> X-API-Key: [valid-key]
> Content-Length: [169]

{"question":"Hello, how are you?\nI'm doing well, thank you for asking. How can I help you today?\nTell me about yourself.","modelName":"gpt-3.5-turbo","multiTurn":true}

< 200 OK OK
< 

0 bytes of content (unknown content-type).

2025-08-01 22:16:32.600 [main] ERROR o.s.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> POST /api/chatGatWay-internal
> WebTestClient-Request-Id: [3]
> Content-Type: [application/json, application/json]
> X-API-Key: [valid-key]
> Content-Length: [79]

{"question":"Hello, how are you?","modelName":"invalid-model","multiTurn":true}

< 200 OK OK
< 

0 bytes of content (unknown content-type).

2025-08-01 22:16:32.628 [main] ERROR o.s.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> POST /api/chatGatWay-internal
> WebTestClient-Request-Id: [4]
> Content-Type: [application/json, application/json]
> X-API-Key: [valid-key]
> Content-Length: [46]

{"modelName":"gpt-3.5-turbo","multiTurn":true}

< 200 OK OK
< 

0 bytes of content (unknown content-type).

2025-08-01 22:16:32.665 [main] ERROR o.s.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> POST /api/chatGatWay-internal
> WebTestClient-Request-Id: [5]
> Content-Type: [application/json, application/json]
> X-API-Key: [valid-key]
> Content-Length: [79]

{"question":"Hello, how are you?","modelName":"gpt-3.5-turbo","multiTurn":true}

< 200 OK OK
< 

0 bytes of content (unknown content-type).

2025-08-01 22:16:32.696 [main] ERROR o.s.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> POST /api/chatGatWay-internal
> WebTestClient-Request-Id: [6]
> Content-Type: [application/json, application/json]
> X-API-Key: [valid-key]
> Content-Length: [93]

{"question":"Hello, how are you?","modelName":"gpt-3.5-turbo","multiTurn":true,"stream":true}

< 200 OK OK
< 

0 bytes of content (unknown content-type).

2025-08-01 22:16:32.806 [main] ERROR o.s.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> POST /api/chatGatWay-internal
> WebTestClient-Request-Id: [7]
> Content-Type: [multipart/form-data;boundary=gsIeC26w2trQnPH6ywThcjxt6JkaARPC]
> X-API-Key: [valid-key]

580 bytes of content.

< 200 OK OK
< 

0 bytes of content (unknown content-type).

2025-08-01 22:16:32.825 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-08-01 22:16:32.825 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-08-01 22:16:32.825 [Thread-1] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-08-01 22:16:32.827 [Thread-1] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-08-01 22:16:32.851 [SpringApplicationShutdownHook] DEBUG com.bgpay.bgai.config.AsyncConfig$1 - Shutting down ExecutorService 'blockingExecutor'
2025-08-01 22:16:32.919 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:10911] result: true
2025-08-01 22:16:32.921 [SpringApplicationShutdownHook] INFO  c.bgpay.bgai.service.impl.DynamicRouteServiceImpl - 动态路由服务关闭，执行清理操作
2025-08-01 22:16:32.921 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[8.133.246.113:9876] result: true
