spring:
  application:
    name: test-service
  main:
    web-application-type: reactive
  autoconfigure:
    exclude:
      - com.jiangyang.base.seata.config.SeataAutoConfiguration
      - com.jiangyang.base.seata.config.SeataSagaConfig
  # 数据库配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://8.133.246.113:3306/deepseek?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true&useSSL=false
    username: bgtech
    password: Zly689258..
    # 动态数据源配置
    dynamic:
      datasource:
        master:
          url: jdbc:mysql://8.133.246.113:3306/deepseek?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true&useSSL=false
          username: bgtech
          password: Zly689258..
          driver-class-name: com.mysql.cj.jdbc.Driver
        slave1:
          url: jdbc:mysql://8.133.246.113:3306/deepSearch_service?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true&useSSL=false
          username: bgtech
          password: Zly689258..
          driver-class-name: com.mysql.cj.jdbc.Driver
        slave2:
          driver-class-name: com.mysql.cj.jdbc.Driver
          url: jdbc:mysql://8.133.246.113:3306/messages_service?characterEncoding=utf8&useSSL=false&serverTimezone=GMT%2B8&rewriteBatchedStatements=true&allowPublicKeyRetrieval=true
          username: bgtech
          password: Zly689258..
          type: com.alibaba.druid.pool.DruidDataSource
          pool:
            initial-size: 5
            min-idle: 5
            max-active: 20
            max-wait: 60000
            time-between-eviction-runs-millis: 60000
            min-evictable-idle-time-millis: 300000
            validation-query: SELECT 1
            test-while-idle: true
            test-on-borrow: false
            test-on-return: false
            pool-prepared-statements: true
            max-pool-prepared-statement-per-connection-size: 20
            filters: stat,wall,slf4j
            connection-properties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=5000
        # 从数据源
        slave3:
          driver-class-name: com.mysql.cj.jdbc.Driver
          url: jdbc:mysql://8.133.246.113:3306/seata?characterEncoding=utf8&useSSL=false&serverTimezone=GMT%2B8&rewriteBatchedStatements=true&allowPublicKeyRetrieval=true
          username: bgtech
          password: Zly689258..
          type: com.alibaba.druid.pool.DruidDataSource
          pool:
            initial-size: 5
            min-idle: 5
            max-active: 20
            max-wait: 60000
            time-between-eviction-runs-millis: 60000
            min-evictable-idle-time-millis: 300000
            validation-query: SELECT 1
            test-while-idle: true
            test-on-borrow: false
            test-on-return: false
            pool-prepared-statements: true
            max-pool-prepared-statement-per-connection-size: 20
            filters: stat,wall,slf4j
            connection-properties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=5000
        slave4:
          driver-class-name: com.mysql.cj.jdbc.Driver
          url: jdbc:mysql://8.133.246.113:3306/ai_agent?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true&useSSL=false
          username: bgtech
          password: Zly689258..
          type: com.alibaba.druid.pool.DruidDataSource
          druid:
            initial-size: 5
            min-idle: 10
            max-active: 20
            max-wait: 60000
            time-between-eviction-runs-millis: 60000
            min-evictable-idle-time-millis: 300000
            validation-query: SELECT 1 FROM DUAL
            test-while-idle: true
            test-on-borrow: false
            test-on-return: false
            pool-prepared-statements: true
            max-pool-prepared-statement-per-connection-size: 20
            filters: stat,wall
            connection-properties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=5000

# 禁用 seata
seata:
  enabled: false

# 降低日志噪声
logging:
  level:
    root: WARN
    org.springframework: INFO
    com.jiangyang: INFO

# 目标网关地址（可用 -Dtarget.gateway.base-url 覆盖）
target:
  gateway:
    base-url: http://localhost:8080

# 生成用例的 Swagger 目标服务（除 test-service 外）
swagger:
  api-docs-path: /v3/api-docs
  targets:
    - name: messages-service
      url: http://localhost:8081
    - name: bgai-service
      url: http://localhost:8688
    - name: signature-service
      url: http://localhost:8689


